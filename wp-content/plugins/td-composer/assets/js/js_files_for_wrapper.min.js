var tdcNotice;
(function(g,d){tdcNotice={$_noticeWrapper:d,_isInitialized:!1,notice:function(b,e,a){if(tdcNotice._isInitialized){var c="";"undefined"!==typeof e&&!0===e&&(c="tdc-notice-error");var l="";"undefined"!==typeof a&&!0===a&&(l='<div class="tdc-close-notice"></div>');this.$element=g('<div class="tdc-notice '+c+'">'+b+l+"</div>");tdcNotice.$_noticeWrapper.append(this.$element);var f=this;if("undefined"!==typeof e&&!0===e)throw b;setTimeout(function(){f.$element.length&&f.$element.remove()},5E3)}},init:function(){tdcNotice._isInitialized||
(tdcNotice.$_noticeWrapper=g('<div class="tdc-notice-wrapper"></div>'),tdcNotice.$_noticeWrapper.on("click",".tdc-close-notice",function(b){g(this).closest(".tdc-notice").remove()}),g("#tdc-live-iframe-wrapper").append(tdcNotice.$_noticeWrapper),tdcNotice._isInitialized=!0)}};tdcNotice.init()})(jQuery);var tdcDebug;
(function(g,d){tdcDebug={_debug:!0,_logWindowObj:d,_content:d,_disabled:!1,log:function(b){tdcDebug._debug&&console.log(b)},dumpAllItems:function(){var b=tdcAdminIFrameUI.getIframeWindow();console.group("All items dump:");"undefined"!==typeof b.tdcComposerBlocksApi&&(console.log("%c tdcComposerBlocksApi.items ","background: #222; color: white"),console.log(b.tdcComposerBlocksApi.items));"undefined"!==typeof b.tdPullDown&&(console.log("%c tdPullDown.items ","background: #222; color: white"),console.log(b.tdPullDown.items));
"undefined"!==typeof b.tdAnimationSprite&&(console.log("%c tdAnimationSprite.items ","background: #222; color: white"),console.log(b.tdAnimationSprite.items));"undefined"!==typeof b.tdHomepageFull&&(console.log("%c tdHomepageFull.items ","background: #222; color: white"),console.log(b.tdHomepageFull.items));"undefined"!==typeof b.tdTrendingNow&&(console.log("%c tdTrendingNow.items ","background: #222; color: white"),console.log(b.tdTrendingNow.items));console.groupEnd()},group:function(b,e){!1!==
tdcDebug._debug&&(console.group?console.group(b,e):console.log(b))},groupCollapsed:function(b,e){!1!==tdcDebug._debug&&(console.groupCollapsed?console.groupCollapsed(b,e):console.log(b))},groupEnd:function(){!1!==tdcDebug._debug&&console.groupEnd&&console.groupEnd()},logWindow:function(b){if(d===tdcDebug._logWindowObj){tdcDebug._logWindowObj=g("<div></div>");var e=g('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Clear</div>'),a=g('<div style="width: 50px; cursor: pointer; float: left; border: 1px solid black">Disable</div>');
tdcDebug._content=g('<div style="clear: both"></div>');tdcDebug._logWindowObj.append(e);tdcDebug._logWindowObj.append(a);e.click(function(a){tdcDebug._content.html("")});a.click(function(a){tdcDebug._disabled=!tdcDebug._disabled;tdcDebug._disabled?g(this).css("background-color","#FF000"):g(this).css("background-color","")});tdcDebug._logWindowObj.append(tdcDebug._content);g("body").append(tdcDebug._logWindowObj);tdcDebug._logWindowObj.css({width:300,height:500,border:"1px solid red",position:"fixed",
bottom:0,right:20,"background-color":"#FFFFFF",overflow:"scroll","z-index":1E4})}tdcDebug._disabled||tdcDebug._content.html(b+"<br>"+tdcDebug._content.html())}}})(jQuery);var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(g,d){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+g+"&"+d:window.tdcAdminSettings.wpRestUrl+g+"?"+d},makeSafeForCSS:function(g){return g.replace(/[^a-z0-9]/g,function(d){var b=d.charCodeAt(0);return 32===b?"-":65<=b&&90>=b?d.toLowerCase():"__"+("000"+b.toString(16)).slice(-4)})},updateTdcSavings:function(g,d){jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_parts","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{tdc_savings:window.tdcAdminSettings.tdcSavings,action:"tdc_ajax_save_parts"}}).done(function(b,e,a){"success"===e&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,!0,!1):("undefined"!==typeof d&&d.call(g),tdcSidebar.updateSavedShortcodes()))}).fail(function(b,e,a){})}}})();var tdcRecycle;
(function(g,d,b){tdcRecycle={_maxItems:100,_items:[],$_restoreItem:b,$_restoreContent:b,item:function(b,a,c){this.timestamp=b;this.description=a;this.shortcode=c},init:function(){tdcRecycle.$_restoreItem=g("#tdc-restore");tdcRecycle.$_restoreContent=g("#tdc-restore-content");tdcRecycle.$_restoreItem.on("click",function(b){tdcRecycle.$_restoreContent.toggle()});tdcRecycle.$_restoreContent.on("click",".tdc-snapshot",function(e){e=new tdcJobManager.job;var a=g(this).find(".tdc-snapshot-shortcode").html();
e.shortcode=a;e.columns=3;e.success_callback=function(c){var e=g(tdcAdminIFrameUI._$liveIframe).contents(),f=e.find("#tdc-rows");d.has(c,"replyHtml")&&f.replaceWith(c.replyHtml);window.addWrappers(e);tdcIFrameData._isInitialized=!1;tdcIFrameData._postOriginalContentJSON=b;window.tdcPostSettings.postContent=a;tdcIFrameData.init(e);tdcOperationUI.init(e);d.has(c,"replyJsForEval")&&tdcAdminIFrameUI.evalInIframe(c.replyJsForEval)};e.error_callback=function(a,b){tdcDebug.log(b);tdcDebug.log(a)};tdcJobManager.addJob(e)})},
takeSnapshot:function(e){var a={error:b,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);d.isUndefined(a.error)||tdcDebug.log(a.error);if(!d.isUndefined(a.getShortcode)){var c=new Date;e=new tdcRecycle.item(c.getTime(),e,a.getShortcode);tdcRecycle._maxItems===tdcRecycle._items.length&&(tdcRecycle._items.splice(0,1),tdcRecycle.$_restoreContent.find(".tdc-snapshot:first").remove());tdcRecycle._items.push(e);tdcRecycle.$_restoreContent.prepend('<div class="tdc-snapshot"><div style="width: 150px; float: left">'+
c.toLocaleDateString()+" "+c.toLocaleTimeString()+'</div><div style="width: 350px; float: left">Before '+e.description+'</div><div class="tdc-snapshot-shortcode" style="display: none">'+e.shortcode+"</div></div>")}}};tdcRecycle.init()})(jQuery,_);var tdcSavePost;
(function(g,d,b,e){tdcSavePost={content:e,save:function(){var a={error:e,getShortcode:""};tdcIFrameData.getShortcodeFromData(a);b.isUndefined(a.error)||tdcDebug.log(a.error);b.isUndefined(a.getShortcode)||b.isUndefined(window.tdcPostSettings)||(tdcSavePost.content=a.getShortcode,tdcLivePanel.$tdcAction.val("tdc_ajax_save_post"),tdcLivePanel.$tdcContent.val(tdcSavePost.content),tdcDebug.log(tdcSavePost.content),g.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/save_post","uuid="+
tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce);tdcLivePanelMenuSettings.saveMenuSettings()},data:tdcLivePanel.$panel.serialize()}).done(function(a,e,f){window.tdcPostSettings.postContent=tdcSavePost.content;g(".tdc-save-page").removeClass("tdc-saving-loader");"success"===e&&(b.isObject(a)&&b.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):new tdcNotice.notice(e,!1,!0),tdcMain.resetContentModified())}).fail(function(a,
b,e){}))}}})(jQuery,Backbone,_);var tdcShortcodeParser={};
(function(){tdcShortcodeParser={levels:{},init:function(g){tdcShortcodeParser.levels=_.clone(g);tdcShortcodeParser.levels[2]=tdcShortcodeParser.levels[2].concat(tdcShortcodeParser.levels[4])},multiNext:function(g,d){for(var b=tdcShortcodeParser.levels[g],e,a=0;a<b.length;a++){var c=tdcShortcodeParser.generateTreeElement(wp.shortcode.next(b[a],d));"undefined"!==typeof c&&("undefined"===typeof e||e.index>c.index)&&(e=c)}return e},parse:function(g,d){for(var b=tdcShortcodeParser.multiNext(g,d),e=0,a=
[];"undefined"!==typeof b&&5E3>e;)d=d.substring(b.index+b.content.length),4>g&&(b.child=tdcShortcodeParser.parse(g+1,b.content)),a.push(b),b=tdcShortcodeParser.multiNext(g,d),e++;return a},generateTreeElement:function(g){return g}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(g){this.shortcode=g.shortcode;this.columns=g.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(g){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var d=new tdcJobManager.jobRequest(g),
b="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&!1!==window.tdcPostSettings.tdbTemplateType?b="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId+"&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType:!1!==window.tdcPostSettings.tdbTemplateType&&(b="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+d.jobId+"&tmp_blockUid="+d.blockUid+"&post_id="+window.tdcPostSettings.postId+
b+"&uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,data:d,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},success:function(b,a,c){null===b?g.error_callback(d,"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(g.blockUid,
b.jobId)?g.success_callback(b):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(b,a,c){g.error_callback(d,"tdcJobManager.addJob - Error callback - textStatus: "+a+" errorThrown: "+c);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(g,d){return"undefined"===typeof tdcJobManager._sentJobs[g]||parseInt(tdcJobManager._sentJobs[g])<parseInt(d)?(tdcJobManager._sentJobs[g]=d,!0):!1},_generateJobId:function(){var g=
tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return g},_getUniqueID:function(){function g(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return g()+g()+"-"+g()+"-"+g()+"-"+g()+"-"+g()+g()+g()}}})();var tdcAdminWrapperUI;
(function(g,d){tdcAdminWrapperUI={$placeholder:d,$helper:d,_helperClass:"",$recycle:d,_initialized:!1,init:function(){tdcAdminWrapperUI._tdcJqObjElements=g(".tdc-sidebar-elements");tdcAdminWrapperUI.helperId="tdc-dragged-helper";tdcAdminWrapperUI.placeholderId="tdc-placeholder";tdcAdminWrapperUI.maskId="tdc-mask";tdcAdminWrapperUI.$helper=g('<div id="'+tdcAdminWrapperUI.helperId+'"></div>');tdcAdminWrapperUI.$placeholder=g('<span id="'+tdcAdminWrapperUI.placeholderId+'"></span>');g("body").append(tdcAdminWrapperUI.$helper);
g("body").append(tdcAdminWrapperUI.$placeholder);g(".tdc-save-page").click(function(b){g(this).hasClass("tdc-saving-loader")||(g(this).addClass("tdc-saving-loader"),tdcSavePost.save())})},setHelperClass:function(b){tdcAdminWrapperUI._helperClass!==b&&(tdcAdminWrapperUI._helperClass=b,tdcAdminWrapperUI.$helper.addClass(b))},getHelperClass:function(){return tdcAdminWrapperUI._helperClass},clearHelperClass:function(){tdcAdminWrapperUI._helperClass=""}};tdcAdminWrapperUI.init()})(jQuery);var tdcOperationUI;
(function(g,d,b,e){tdcOperationUI={iframeContents:e,_draggedElement:{$element:e},_currentElementOver:{$element:e},_emptyElementClass:"tdc-element-empty",_isPlaceholderVisible:!1,_intervalUpdateInfoHelper:e,_isMenuDeactivated:!1,init:function(a,c){window.previousMouseClientX=0;window.previousMouseClientY=0;tdcOperationUI.iframeContents=a;tdcRowUI.init(tdcOperationUI.iframeContents.find("#tdc-rows"));tdcColumnUI.init(tdcOperationUI.iframeContents);tdcInnerRowUI.init(tdcOperationUI.iframeContents);tdcInnerColumnUI.init(tdcOperationUI.iframeContents);
tdcElementUI.init(tdcOperationUI.iframeContents);tdcRecycleUI.init(c);tdcAdminWrapperUI.$mask=g('<div id="'+tdcAdminWrapperUI.maskId+'"></div>');tdcOperationUI.iframeContents.find("body").append(tdcAdminWrapperUI.$mask);tdcMaskUI.init(tdcAdminWrapperUI.$mask,c);g(window).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper()}).mousemove(function(a){tdcOperationUI.showHelper(a)}).keydown(function(a){});a.mousedown(function(a){tdcSidebar.setSettings({$currentRow:e,$currentColumn:e,
$currentInnerRow:e,$currentInnerColumn:e,$currentElement:e});tdcSidebar.closeModals()}).mouseup(function(a){tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(e);tdcElementUI.positionElementPlaceholder(a)}).mousemove(function(a){tdcOperationUI.showHelper(a);window.previousMouseClientX=a.clientX;window.previousMouseClientY=a.clientY}).scroll(function(a){tdcOperationUI.isElementDragged()?tdcElementUI.positionElementPlaceholder(a):tdcOperationUI.isInnerColumnDragged()?
tdcInnerColumnUI.positionInnerColumnPlaceholder(a):tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?tdcInnerRowUI.positionInnerRowPlaceholder(a):tdcOperationUI.isColumnDragged()?tdcColumnUI.positionColumnPlaceholder(a):(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())&&tdcRowUI.positionRowPlaceholder(a)}).keydown(function(a){});tdcAdminWrapperUI.$helper.mouseup(function(a){tdcOperationUI.hideHelper()})},_keyDownHandler:function(a){46===a.keyCode&&(a=tdcSidebar.getCurrentModel(),
b.isUndefined(a)||"vc_row"===a.get("tag")||"vc_column"===a.get("tag")||"vc_row_inner"===a.get("tag")||"vc_column_inner"===a.get("tag")||tdcElementHandlerUI.deleteHandler(null))},setDraggedElement:function(a){tdcOperationUI._draggedElement.$element=a;b.isUndefined(a)||(tdcOperationUI._draggedElement.classes=a[0].className.split(" "))},getDraggedElement:function(){return tdcOperationUI._draggedElement.$element},hasClassDraggedElement:function(a){if(!b.isUndefined(tdcOperationUI._draggedElement.$element))return-1!==
tdcOperationUI._draggedElement.classes.indexOf(a)},addClassDraggedElement:function(a){b.isUndefined(tdcOperationUI._draggedElement.$element)||tdcOperationUI._draggedElement.$element.addClass(a)},setCurrentElementOver:function(a){if(!b.isUndefined(a)||!b.isUndefined(tdcOperationUI._currentElementOver.$element))if(b.isUndefined(a)||b.isUndefined(tdcOperationUI._currentElementOver.$element)||!a.is(tdcOperationUI._currentElementOver.$element.get(0)))tdcOperationUI._currentElementOver.$element=a,b.isUndefined(a)||
(tdcOperationUI._currentElementOver.elementOuterHeight=a.outerHeight(!0),tdcOperationUI._currentElementOver.elementOuterWidth=a.outerWidth(!0),tdcOperationUI._currentElementOver.elementHeight=a.outerHeight(),tdcOperationUI._currentElementOver.elementWidth=a.outerWidth(),tdcOperationUI._currentElementOver.elementOffset=a.offset(),tdcOperationUI._currentElementOver.elementPosition=a.position())},getCurrentElementOver:function(){return tdcOperationUI._currentElementOver.$element},getCurrentElementOverOuterHeight:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&
!b.isUndefined(tdcOperationUI._currentElementOver.elementOuterHeight))return tdcOperationUI._currentElementOver.elementOuterHeight},getCurrentElementOverOuterWidth:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementOuterWidth))return tdcOperationUI._currentElementOver.elementOuterWidth},getCurrentElementOverHeight:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementHeight))return tdcOperationUI._currentElementOver.elementHeight},
getCurrentElementOverOffset:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementOffset))return tdcOperationUI._currentElementOver.elementOffset},getCurrentElementOverPosition:function(){if(!b.isUndefined(tdcOperationUI._currentElementOver.$element)&&!b.isUndefined(tdcOperationUI._currentElementOver.elementPosition))return tdcOperationUI._currentElementOver.elementPosition},_placeholderCacheCssSettings:{classes:e,props:e},
setPlaceholderCss:function(a){if(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings)||!b.isEqual(tdcOperationUI._placeholderCacheCssSettings,a))tdcOperationUI._placeholderCacheCssSettings=a,tdcAdminWrapperUI.$placeholder.css(a)},setReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.addClass("tdc-ready-to-move")},clearReadyToMove:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.removeClass("tdc-ready-to-move")},activeDraggedElement:function(a){tdcOperationUI.setDraggedElement(a);
tdcOperationUI.hasClassDraggedElement("tdc-dragged")||tdcOperationUI.addClassDraggedElement("tdc-dragged")},deactiveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||(a.removeClass("tdc-dragged"),tdcOperationUI._moveDraggedElement(),tdcOperationUI.setDraggedElement(e))},showHelper:function(a){var c=tdcAdminWrapperUI.$helper,e=tdcOperationUI.getDraggedElement();if(b.isUndefined(e))tdcOperationUI.hideHelper(),tdcRecycleUI.hide(),tdcOperationUI.setLiveIframeCss("tdc-active-helper",
!0);else{var f=0;!0!==tdcMain.getSidebarInline()||!1!==tdcMain.getSidebarHidden()||g(a.target).closest("#tdc-sidebar").length||(f=tdcSidebar.$_sidebar.width());var d=tdcAdminIFrameUI.getLiveIframe().width(),k=0;window.innerWidth!==d&&(k=(window.innerWidth-d)/2,!0===tdcMain.getSidebarInline()&&!1===tdcMain.getSidebarHidden()&&(k-=tdcSidebar.$_sidebar.width()/2));g(a.target).closest("#tdc-sidebar").length?k=0:g(a.target).closest("#tdc-live-iframe-wrapper").length&&(k=0,tdcMain.getSidebarInline()&&(k=
-tdcSidebar.$_sidebar.width()));c.css({left:a.clientX-30+f+k,top:a.clientY-22});c.show();tdcOperationUI.deactivateMenu();tdcOperationUI.setLiveIframeCss("tdc-active-helper");a=e.data("shortcodeName");c=e.data("templateContent");b.isUndefined(a)&&b.isUndefined(c)&&(e=e.data("model_id"),a=tdcIFrameData.getModel(e).get("tag"));b.isUndefined(a)||tdcAdminWrapperUI.setHelperClass("tdc-element-ico tdc-ico-"+a);tdcRecycleUI.show()}},hideHelper:function(){tdcAdminWrapperUI.clearHelperClass();tdcAdminWrapperUI.$helper.hide();
tdcAdminWrapperUI.$helper.removeClass();tdcOperationUI.activateMenu()},setLiveIframeCss:function(a,c){var e=tdcAdminIFrameUI.getLiveIframe();b.isUndefined(c)?e.contents().find("body").addClass(a):e.contents().find("body").removeClass(a)},activateMenu:function(){if(tdcOperationUI._isMenuDeactivated){var a=tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.removeClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!1}},deactivateMenu:function(){if(!tdcOperationUI._isMenuDeactivated){var a=
tdcAdminIFrameUI.getLiveIframe().contents().find(".td-header-wrap");a.length&&a.addClass("tdc-inactive-menu");tdcOperationUI._isMenuDeactivated=!0}},updateInfoHelper:function(a){},showPlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!1===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=!0,a.show(),tdcOperationUI.updateInfoHelper(e))},hidePlaceholder:function(){var a=tdcAdminWrapperUI.$placeholder;!0===tdcOperationUI._isPlaceholderVisible&&(tdcOperationUI._isPlaceholderVisible=
!1,a.hide(),tdcOperationUI.updateInfoHelper(!0))},isPlaceholderVisible:function(){return tdcOperationUI._isPlaceholderVisible},isRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcRowUI.getElementCssClass())},inRow:function(a){a=a.closest("."+tdcRowUI.getElementCssClass());if(a.length)return a},isRow:function(a){return a.hasClass(tdcRowUI.getElementCssClass())},isTempRowDragged:function(){var a=tdcOperationUI.getDraggedElement();
return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-row-temp")},isElementWithRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-with-row")},isColumnDragged:function(a){var c=tdcOperationUI.getDraggedElement();c=!b.isUndefined(c)&&tdcOperationUI.hasClassDraggedElement(tdcColumnUI.getElementCssClass());b.isUndefined(a)||(c=c&&(0<a.siblings(".tdc-column.tdc-dragged").length||a.hasClass("tdc-dragged")));
return c},inColumn:function(a){a=a.closest("."+tdcColumnUI.getElementCssClass());if(a.length)return a},isColumn:function(a){return a.hasClass(tdcColumnUI.getElementCssClass())},isInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement(tdcInnerRowUI.getElementCssClass())},inInnerRow:function(a){a=a.closest("."+tdcInnerRowUI.getElementCssClass());if(a.length)return a},isInnerRow:function(a){return a.hasClass(tdcInnerRowUI.getElementCssClass())},
isTempInnerRowDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element-inner-row-temp")},isInnerColumnDragged:function(a){var c=tdcOperationUI.getDraggedElement();c=!b.isUndefined(c)&&tdcOperationUI.hasClassDraggedElement(tdcInnerColumnUI.getElementCssClass());b.isUndefined(a)||(c=c&&(0<a.siblings(".tdc-inner-column.tdc-dragged").length||a.hasClass("tdc-dragged")));return c},inInnerColumn:function(a){a=a.closest("."+tdcInnerColumnUI.getElementCssClass());
if(a.length)return a},isInnerColumn:function(a){return a.hasClass(tdcInnerColumnUI.getElementCssClass())},isElement:function(a){return a.hasClass(tdcElementUI.getElementCssClass())},isElementDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-element")},isSidebarElementDragged:function(){var a=tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI.hasClassDraggedElement("tdc-sidebar-element")},getRowStartValues:function(){var a=
tdcOperationUI.getDraggedElement();return!b.isUndefined(a)&&tdcOperationUI._draggedElement.$element.data("row-start-values")},setPlaceholder:function(a,c){var e=tdcAdminWrapperUI.$placeholder;if(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)||!b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.classes)&&tdcOperationUI._placeholderCacheCssSettings.classes!==a)tdcOperationUI._placeholderCacheCssSettings.classes=a,a.length?e.addClass(a):e.attr("class","");b.isObject(c)&&(b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)||
!b.isUndefined(tdcOperationUI._placeholderCacheCssSettings.props)&&!b.isEqual(tdcOperationUI._placeholderCacheCssSettings.props,c))&&(tdcOperationUI._placeholderCacheCssSettings.props=c,e.css(c))},setHorizontalPlaceholder:function(a){tdcOperationUI.setPlaceholder("",a)},setVerticalPlaceholder:function(a){tdcOperationUI.setPlaceholder("vertical",a)},_moveDraggedElement:function(){var a=tdcOperationUI.getDraggedElement(),c=tdcOperationUI.getCurrentElementOver(),l=tdcAdminWrapperUI.$placeholder,f="";
if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(l)||!l.is(":visible")&&c!==tdcAdminWrapperUI.$recycle)){var d=tdcOperationUI.isSidebarElementDragged(),k=tdcOperationUI.isElementDragged(),h=!1,m=!1,n=!1,p=!1,t=!1,v=!1,u=tdcOperationUI.isElementWithRowDragged(),r=tdcOperationUI.getRowStartValues();if(k){var w=a.closest(".tdc-elements");if(!d&&(f=tdcIFrameData._getSourceCol(),b.isUndefined(f)))return}else(h=tdcOperationUI.isInnerColumnDragged())&&(w=a.closest(".tdc-inner-columns"));!h&&(m=tdcOperationUI.isInnerRowDragged(),
n=tdcOperationUI.isTempInnerRowDragged(),m||n)&&(w=a.closest(".tdc-elements"));m||n||(p=tdcOperationUI.isColumnDragged())&&(w=a.closest(".tdc-columns"));!p&&(t=tdcOperationUI.isRowDragged(),v=tdcOperationUI.isTempRowDragged(),t||v)&&(w=a.closest("#tdc-rows"));if(d||k||h||m||n||p||t||v){var A="",x=a.find(".td_block_inner");x.length&&(A=x.attr("id"));if(!d&&!b.isUndefined(w)&&w.length){var z=w.children();x=z.index(a);var y=z.index(l);if(c!==tdcAdminWrapperUI.$recycle&&-1!==y&&1===Math.abs(x-y))return;
if(k||m||n||t||v){if((k||m||t)&&c===tdcAdminWrapperUI.$recycle){l="Deleting ";tdConfirm.showModal(m?l+"inner row":t?l+"row":l+"element",tdcOperationUI,function(){if((-1===y&&1===z.length||2===z.length&&-1!==y)&&(!t||1!==tdcIFrameData.tdcRows.length)){var c="";B=a.closest(".tdc-inner-column");B.length?c=" tdc-element-inner-column":(C=a.closest(".tdc-column"),C.length&&(c=" tdc-element-column"));c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');
tdcElementUI.bindEmptyElement(c);w.append(c)}tdcOperationUI.setDraggedElement(a);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);tdcIFrameData.changeData({wasSidebarElementDragged:d,wasElementDragged:k,wasInnerColumnDragged:h,wasInnerRowDragged:m,wasTempInnerRowDragged:n,wasColumnDragged:p,wasRowDragged:t,wasTempRowDragged:v,wasElementWithRowDragged:u,rowStartValues:r,draggedBlockUid:A,sourceColParam:f});tdcSidebarPanel.clearPanel();tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);
tb_remove()},e,"Are you sure you want to delete this element?");return}if(-1===y&&1===z.length||2===z.length&&-1!==y){c="";var B=a.closest(".tdc-inner-column");if(B.length)c=" tdc-element-inner-column";else{var C=a.closest(".tdc-column");C.length&&(c=" tdc-element-column")}c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(c);w.append(c)}}}d&&(c="",k?c="tdc-element":n?c="tdc-element-inner-row-temp":
m?c="tdc-element-inner-row":v?c="tdc-row-temp":t&&(c="tdc-row"),c=g('<div class="'+c+'">'+a.html()+"</div>"),b.isUndefined(a.data("shortcodeName"))||c.data("shortcodeName",a.data("shortcodeName")),b.isUndefined(a.data("startValues"))||c.data("startValues",a.data("startValues")),b.isUndefined(a.data("shortcodeContent"))||c.data("shortcodeContent",a.data("shortcodeContent")),b.isUndefined(a.data("rowStartValues"))||c.data("rowStartValues",a.data("rowStartValues")),b.isUndefined(a.data("templateContent"))||
c.data("templateContent",a.data("templateContent")),tdcOperationUI.setDraggedElement(c),a=tdcOperationUI.getDraggedElement());l.replaceWith(a);if(d||k)B=a.closest(".tdc-inner-column"),B.length?(a.removeClass("tdc-element-column"),a.addClass("tdc-element-inner-column")):(C=a.closest(".tdc-column"),C.length&&(a.removeClass("tdc-element-inner-column"),a.addClass("tdc-element-column")));l=a.prev();l.hasClass(tdcOperationUI._emptyElementClass)&&l.remove();l=a.next();l.hasClass(tdcOperationUI._emptyElementClass)&&
l.remove();tdcIFrameData.changeData({wasSidebarElementDragged:d,wasElementDragged:k,wasInnerColumnDragged:h,wasInnerRowDragged:m,wasTempInnerRowDragged:n,wasColumnDragged:p,wasRowDragged:t,wasTempRowDragged:v,wasElementWithRowDragged:u,rowStartValues:r,draggedBlockUid:A,sourceColParam:f})}else new tdcNotice.notice("_moveDraggedElement Error: $draggedElement not valid!",!0,!1)}}}})(jQuery,Backbone,_);var tdcRowUI;
(function(g,d,b,e){tdcRowUI={_elementCssClass:"tdc-row",tdcRow:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcRowUI.tdcRow=a.find("."+tdcRowUI._elementCssClass);tdcRowUI.tdcRow.each(function(a,b){tdcRowUI.bindRow(g(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcRowUI._mouseCoordinates},bindRow:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===
c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a)}),tdcRowUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(c){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())c.preventDefault(),tdcOperationUI.clearReadyToMove(),
tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcRowUI._setMouseCoordinates(e);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged())b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcRowUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c),
tdcMaskUI.hide(),tdcRowUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove())}).mouseenter(function(c){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentContainer(a)}).mouseleave(function(a){tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()?(a.preventDefault(),tdcOperationUI.setCurrentElementOver(e),
tdcRowUI.positionRowPlaceholder(a)):tdcMaskUI.setCurrentContainer(e)}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isRowDragged()||tdcOperationUI.isTempRowDragged()){var b=a.outerHeight(!0),e=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(d.left+e)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+b)&&(tdcOperationUI.setCurrentElementOver(a),tdcRowUI.positionRowPlaceholder(c))}})},positionRowPlaceholder:function(a,c){var l=
tdcAdminWrapperUI.$placeholder,f=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var k={pageX:f,pageY:d};tdcOperationUI.setCurrentElementOver(e);
tdcRowUI.tdcRow.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",k))});return}f=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(f))tdcOperationUI.hidePlaceholder();else{var h=tdcOperationUI.getCurrentElementOverOuterHeight(),m=tdcOperationUI.getCurrentElementOverOuterWidth(),n=tdcOperationUI.getCurrentElementOverOffset();if(d>n.top+h/2){d=f.next();if(!d.length||d.length&&
d.attr("id")!==tdcAdminWrapperUI.placeholderId)f.after(l),tdcOperationUI.updateInfoHelper();parseInt(n.top)+parseInt(h)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"",right:"auto",bottom:"0",width:m,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"",right:"",bottom:"",width:m,"margin-left":""})}else{d=f.prev();if(!d.length||d.length&&d.attr("id")!==
tdcAdminWrapperUI.placeholderId)f.before(l),tdcOperationUI.updateInfoHelper();parseInt(n.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"",right:"auto",bottom:"",width:m,"margin-left":""}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"",right:"",bottom:"",width:m,"margin-left":""})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcRowUI._elementCssClass}}})(jQuery,
Backbone,_);var tdcColumnUI;
(function(g,d,b,e){tdcColumnUI={_elementCssClass:"tdc-column",tdcColumn:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcColumnUI.tdcColumn=a.find("."+tdcColumnUI._elementCssClass);tdcColumnUI.tdcColumn.each(function(a,b){tdcColumnUI.bindColumn(g(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcColumnUI._mouseCoordinates},bindColumn:function(a){a.unbind();a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===
c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a)}),tdcColumnUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(c){tdcOperationUI.isColumnDragged(a)&&(c.preventDefault(),tdcOperationUI.clearReadyToMove(),
tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(e),tdcColumnUI.positionColumnPlaceholder(c),tdcColumnUI._setMouseCoordinates(e));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){tdcOperationUI.isColumnDragged(a)&&(b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcColumnUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),
tdcColumnUI.positionColumnPlaceholder(c),tdcMaskUI.hide(),tdcColumnUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(c){tdcOperationUI.isColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),
tdcColumnUI.positionColumnPlaceholder(c)):(tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inRow(a),b.isUndefined(c)||c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isColumnDragged(a)){var b=a.find(".tdc-elements:first");if(b.length){var e=b.outerHeight(!0);b=b.outerWidth();var d=a.offset(),k=0,h=a.prevAll("."+tdcColumnUI._elementCssClass);h.length&&h.each(function(a,c){k+=parseInt(g(c).find(".tdc-elements:first").width())});k+=d.left;parseInt(k)<=parseInt(c.pageX)&&parseInt(c.pageX)<=
parseInt(k+b)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcColumnUI.positionColumnPlaceholder(c))}}})},positionColumnPlaceholder:function(a,c){var l=tdcAdminWrapperUI.$placeholder,f=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===
a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var k={pageX:f,pageY:d};tdcOperationUI.setCurrentElementOver(e);tdcOperationUI.getDraggedElement().closest(".tdc-columns").find(".tdc-column").each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",k))});return}d=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||
b.isUndefined(d))tdcOperationUI.hidePlaceholder();else{var h=d.outerWidth(!0),m=tdcOperationUI.getCurrentElementOverOffset(),n=0,p=d.prevAll();p.length&&p.each(function(a,c){var b=g(c);b.hasClass("tdc-column")&&(n+=parseInt(b.outerWidth(!0)))});p=d.parent(".tdc-columns").parent(".vc_row");var t=p.css("position");if(b.isUndefined(t)||"static"!==t)if(p=p.css("padding-left"),b.isUndefined(p)||(p=parseInt(p.replace("px",""))),f>m.left+h/2){f=d.next();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)d.after(l),
tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(n+h+p),"margin-left":-24,top:""})}else{f=d.prev();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)d.before(l),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(n+p),"margin-left":-24,top:""})}else if(f>m.left+h/2){f=d.next();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)d.after(l),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m.left+
h),"margin-left":-24,top:""})}else{f=d.prev();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)d.before(l),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(m.left),"margin-left":-24,top:""})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerRowUI;
(function(g,d,b,e){tdcInnerRowUI={_elementCssClass:"tdc-element-inner-row",tdcElementInnerRow:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerRowUI.tdcElementInnerRow=a.find("."+tdcInnerRowUI._elementCssClass);tdcInnerRowUI.tdcElementInnerRow.each(function(a,b){tdcInnerRowUI.bindInnerRow(g(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcInnerRowUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerRowUI._mouseCoordinates},bindInnerRow:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a)}),tdcInnerRowUI._setMouseCoordinates({screenX:c.screenX,
screenY:c.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(c){c.preventDefault();tdcOperationUI.clearReadyToMove();tdcOperationUI.deactiveDraggedElement();tdcOperationUI.hideHelper();tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcInnerRowUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):
(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c),tdcMaskUI.hide(),tdcInnerRowUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove())}).mouseenter(function(c){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&
(tdcMaskUI.setCurrentContainer(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged()?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcInnerRowUI.positionInnerRowPlaceholder(c)):(tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inColumn(a),b.isUndefined(c)||c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||
tdcOperationUI.isTempInnerRowDragged()){var b=a.outerHeight(!0),e=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(d.left+e)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+b)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerRowUI.positionInnerRowPlaceholder(c))}})},positionInnerRowPlaceholder:function(a,c){var l=tdcAdminWrapperUI.$placeholder,f=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=
a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var k={pageX:f,pageY:d};tdcOperationUI.setCurrentElementOver(e);tdcElementUI.tdcElement.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",
k))});tdcInnerRowUI.tdcElementInnerRow.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",k))});return}f=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(f))tdcOperationUI.hidePlaceholder();else{var h=f.outerHeight(!0),m=f.innerWidth(),n=f.offset();if(d>n.top+h/2){d=f.next();if(!d.length||d.length&&d.attr("id")!==tdcAdminWrapperUI.placeholderId)f.after(l),tdcOperationUI.updateInfoHelper(e);
parseInt(n.top)+parseInt(h)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"","margin-left":"",bottom:"0",width:m}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:m})}else{d=f.prev();if(!d.length||d.length&&d.attr("id")!==tdcAdminWrapperUI.placeholderId)f.before(l),tdcOperationUI.updateInfoHelper(e);parseInt(n.top)<
parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",bottom:"",width:m}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:m})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerRowUI._elementCssClass}}})(jQuery,Backbone,_);var tdcInnerColumnUI;
(function(g,d,b,e){tdcInnerColumnUI={_elementCssClass:"tdc-inner-column",tdcInnerColumn:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcInnerColumnUI.tdcInnerColumn=a.find("."+tdcInnerColumnUI._elementCssClass);tdcInnerColumnUI.tdcInnerColumn.each(function(a,b){tdcInnerColumnUI.bindInnerColumn(g(b))})},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcInnerColumnUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcInnerColumnUI._mouseCoordinates},bindInnerColumn:function(a){a.unbind();
a.click(function(a){a.preventDefault();a.stopPropagation()}).mousedown(function(c){1===c.which&&(c.preventDefault(),c.stopPropagation(),tdcOperationUI.activeDraggedElement(g(this)),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(c,!0),tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),$currentInnerColumn:tdcOperationUI.inInnerColumn(a)}),
tdcInnerColumnUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY}),tdcOperationUI.setReadyToMove())}).mouseup(function(c){tdcOperationUI.isInnerColumnDragged(a)&&(c.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcOperationUI.setCurrentElementOver(e),tdcInnerColumnUI.positionInnerColumnPlaceholder(c),tdcInnerColumnUI._setMouseCoordinates(e));tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){tdcOperationUI.isInnerColumnDragged(a)&&
(b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcInnerColumnUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(c),tdcMaskUI.hide(),tdcInnerColumnUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove()))}).mouseenter(function(c){tdcOperationUI.isInnerColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),
tdcInnerColumnUI.positionInnerColumnPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentContainer(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isInnerColumnDragged(a)?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcInnerColumnUI.positionInnerColumnPlaceholder(c)):(tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inInnerRow(a),b.isUndefined(c)||c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isInnerColumnDragged(a)){var b=
a.find(".tdc-elements:first");if(b.length){var e=b.outerHeight(!0);b=b.outerWidth();var d=a.offset(),k=0,h=a.prevAll("."+tdcInnerColumnUI._elementCssClass);h.length&&h.each(function(a,c){k+=parseInt(g(c).find(".tdc-elements:first").width())});k+=d.left;parseInt(k)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(k+b)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+e)&&(tdcOperationUI.setCurrentElementOver(a),tdcInnerColumnUI.positionInnerColumnPlaceholder(c))}}})},positionInnerColumnPlaceholder:function(a,
c){var l=tdcAdminWrapperUI.$placeholder,f=0,d=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)f=a.pageX,d=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){f=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;d=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var k={pageX:f,pageY:d};tdcOperationUI.setCurrentElementOver(e);
tdcOperationUI.getDraggedElement().closest(".tdc-inner-columns").find(".tdc-inner-column").each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",k))});return}d=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(d))tdcOperationUI.hidePlaceholder();else{var h=d.outerWidth(!0),m=d.offset(),n=0,p=d.prevAll();p.length&&p.each(function(a,c){var b=g(c);b.hasClass("tdc-inner-column")&&(n+=
parseInt(b.outerWidth(!0)))});p=d.parent(".tdc-inner-columns").parent(".vc_row_inner").css("padding-left");p=b.isUndefined(p)?0:parseInt(p.replace("px",""));if(f>m.left+h/2){f=d.next();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)d.after(l),tdcOperationUI.updateInfoHelper();tdcOperationUI.setVerticalPlaceholder({left:parseInt(n+h+p),"margin-left":-24})}else{f=d.prev();if(!f.length||f.length&&f.attr("id")!==tdcAdminWrapperUI.placeholderId)d.before(l),tdcOperationUI.updateInfoHelper();
tdcOperationUI.setVerticalPlaceholder({left:parseInt(n+p),"margin-left":-24})}b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},getElementCssClass:function(){return tdcInnerColumnUI._elementCssClass}}})(jQuery,Backbone,_);var tdcElementsUI;
(function(g,d,b,e){tdcElementsUI={tdcElements:e,init:function(){tdcElementsUI.tdcElements=tdcOperationUI.iframeContents.find(".tdc-elements");tdcElementsUI.tdcElements.each(function(a,c){tdcElementsUI.bindElementList(g(c))})},bindElementList:function(a){a.mousemove(function(a){a.preventDefault()}).mouseenter(function(a){a.preventDefault()}).mouseleave(function(a){a.preventDefault()})}}})(jQuery,Backbone,_);var tdcElementUI;
(function(g,d,b,e){tdcElementUI={_elementCssClass:"tdc-element",_innerColumnGap:10,tdcElements:e,init:function(a){b.isUndefined(a)&&(a=tdcOperationUI.iframeContents);tdcElementUI.tdcElement=a.find("."+tdcElementUI._elementCssClass);tdcElementUI.tdcElement.each(function(a,b){tdcElementUI.bindElement(g(b))})},positionElementPlaceholder:function(a,c){var l={X:0,Y:0};if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)l.X=a.pageX,l.Y=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||
(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){l.X=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;l.Y=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var f={pageX:l.X,pageY:l.Y};tdcOperationUI.setCurrentElementOver(e);tdcElementUI.tdcElement.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",f))});return}var d=tdcOperationUI.getCurrentElementOver();
if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(d))tdcOperationUI.hidePlaceholder();else{var k=tdcOperationUI.getCurrentElementOverOuterHeight(),h=tdcOperationUI.getCurrentElementOverOuterWidth(),m=tdcOperationUI.getCurrentElementOverOffset(),n=tdcOperationUI.getCurrentElementOverHeight(),p=!1;"inline-block"===d.css("display")&&(p=!0);p?(k=tdcOperationUI.getCurrentElementOverPosition(),p=parseInt(d.css("margin-top")),l.Y>m.top+n/2?(l=tdcElementUI._checkInnerColumnLastElement(l),
b.isUndefined(l.elementOuterWidth)||(h=l.elementOuterWidth),parseInt(m.top)+parseInt(n)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?(m=parseInt(m.left),l.isInnerColumnLastElement&&(d=d.closest(".tdc-element-inner-row"),m=parseInt(d.offset().left)-parseInt(d.css("margin-left"))),tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:m,"margin-top":"","margin-left":"",bottom:"0",width:h})):(m=parseInt(k.left),l.isInnerColumnLastElement&&(d=d.closest(".tdc-element-inner-row"),
m=parseInt(d.position().left)+parseInt(d.css("margin-left"))),tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:k.top+p+n,left:m,"margin-top":"","margin-left":"",bottom:"",width:h}))):(l=tdcElementUI._checkInnerColumnFirstElement(l),b.isUndefined(l.elementOuterWidth)||(h=l.elementOuterWidth),parseInt(m.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?(m=parseInt(m.left)-parseInt(d.css("margin-left")),tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:m,"margin-top":"0",
"margin-left":"",bottom:"",width:h})):(m=parseInt(k.left),tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:k.top+p,left:m,"margin-top":"","margin-left":"",bottom:"",width:h})))):l.Y>m.top+n/2?(l=tdcElementUI._checkInnerColumnLastElement(l),b.isUndefined(l.elementOuterWidth)||(h=l.elementOuterWidth),parseInt(m.top)+parseInt(k)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"",
"margin-left":"",bottom:"0",width:h}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:h})):(l=tdcElementUI._checkInnerColumnFirstElement(l),b.isUndefined(l.elementOuterWidth)||(h=l.elementOuterWidth),parseInt(m.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"0",left:"","margin-top":"0","margin-left":"",bottom:"",width:h}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",
top:"",left:"","margin-top":"","margin-left":"",bottom:"",width:h}));b.isUndefined(c)||!0!==c?tdcOperationUI.showPlaceholder():tdcOperationUI.hidePlaceholder()}},_checkInnerColumnFirstElement:function(a){var c={isInnerColumnFirstElement:!1},b=tdcAdminWrapperUI.$placeholder,f=tdcOperationUI.getCurrentElementOver(),d=tdcOperationUI.getCurrentElementOverOffset();tdcElementUI.isInnerColumnFirstElement(f)&&a.Y<d.top+tdcElementUI._innerColumnGap&&(c.isInnerColumnFirstElement=!0);if(c.isInnerColumnFirstElement){if(f=
f.closest(".tdc-element-inner-row"),c.elementOuterWidth=f.outerWidth(!0),a=f.prev(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)f.before(b),tdcOperationUI.updateInfoHelper(e)}else if(a=f.prev(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)f.before(b),tdcOperationUI.updateInfoHelper(e);return c},_checkInnerColumnLastElement:function(a){var c={isInnerColumnLastElement:!1},b=tdcAdminWrapperUI.$placeholder,f=tdcOperationUI.getCurrentElementOver(),d=tdcOperationUI.getCurrentElementOverHeight(),
k=tdcOperationUI.getCurrentElementOverOffset();tdcElementUI.isInnerColumnLastElement(f)&&a.Y>k.top+d-tdcElementUI._innerColumnGap&&(c.isInnerColumnLastElement=!0);if(c.isInnerColumnLastElement){if(f=f.closest(".tdc-element-inner-row"),c.elementOuterWidth=f.outerWidth(!0),a=f.next(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)f.after(b),tdcOperationUI.updateInfoHelper(e)}else if(a=f.next(),!a.length||a.length&&a.attr("id")!==tdcAdminWrapperUI.placeholderId)f.after(b),tdcOperationUI.updateInfoHelper(e);
return c},positionEmptyElementPlaceholder:function(a){var c=tdcAdminWrapperUI.$placeholder,l=0,f=0;if("mousedown"===a.type||"mousemove"===a.type||"fakemouseenterevent"===a.type)l=a.pageX,f=a.pageY,b.isUndefined(a.clientX)||b.isUndefined(a.clientY)||(window.previousMouseClientX=a.clientX,window.previousMouseClientY=a.clientY);else if("scroll"===a.type){l=tdcOperationUI.iframeContents.scrollLeft()+window.previousMouseClientX;f=tdcOperationUI.iframeContents.scrollTop()+window.previousMouseClientY;var d=
{pageX:l,pageY:f};tdcOperationUI.setCurrentElementOver(e);tdcElementUI.tdcElement.each(function(a,c){b.isUndefined(tdcOperationUI.getCurrentElementOver())&&g(c).trigger(g.Event("fakemouseenterevent",d))});return}var k=tdcOperationUI.getCurrentElementOver();if(b.isUndefined(tdcOperationUI.getDraggedElement())||b.isUndefined(k))tdcOperationUI.hidePlaceholder();else{var h=tdcOperationUI.getCurrentElementOverOuterHeight();a=tdcOperationUI.getCurrentElementOverOuterWidth();l=tdcOperationUI.getCurrentElementOverOffset();
if(f>l.top+h/2){var m=!1;tdcElementUI.isInnerColumnLastElement(k)&&f>l.top+h-tdcElementUI._innerColumnGap&&(m=!0);m?(k=k.closest(".tdc-element-inner-row"),a=k.outerWidth(!0),f=k.next(),f.length||(k.after(c),tdcOperationUI.updateInfoHelper(e))):(f=k.next(),f.length||(k.after(c),tdcOperationUI.updateInfoHelper(e)));parseInt(l.top)+parseInt(h)>parseInt(tdcOperationUI.iframeContents.scrollTop())+parseInt(window.innerHeight)?tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:"",left:"","margin-top":"",
"margin-left":"",bottom:0,width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":-50,"margin-left":"",bottom:"",width:a})}else h=!1,tdcElementUI.isInnerColumnFirstElement(k)&&f<l.top+tdcElementUI._innerColumnGap&&(h=!0),h?(k=k.closest(".tdc-element-inner-row"),a=k.outerWidth(!0),f=k.prev(),f.length||(k.before(c),tdcOperationUI.updateInfoHelper(e))):(f=k.prev(),f.length||(k.before(c),tdcOperationUI.updateInfoHelper(e))),parseInt(l.top)<parseInt(tdcOperationUI.iframeContents.scrollTop())?
tdcOperationUI.setHorizontalPlaceholder({position:"fixed",top:0,left:"","margin-top":0,"margin-left":"",bottom:"",width:a}):tdcOperationUI.setHorizontalPlaceholder({position:"absolute",top:"",left:"","margin-top":0,"margin-left":"",bottom:"",width:a});tdcOperationUI.showPlaceholder()}},_mouseCoordinates:e,_setMouseCoordinates:function(a){tdcElementUI._mouseCoordinates=a},_getMouseCoordinates:function(){return tdcElementUI._mouseCoordinates},bindElement:function(a){a.click(function(a){a.preventDefault();
a.stopPropagation()}).mousedown(function(c){tdcDebug.log("element mouse down");if(1===c.which){if("td-lock-button"===c.target.className)return window.open(c.target.href),!1;c.preventDefault();c.stopPropagation();tdcOperationUI.activeDraggedElement(a);tdcOperationUI.hideHelper();tdcOperationUI.setCurrentElementOver(a);tdcElementUI.positionElementPlaceholder(c,!0);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(a),$currentColumn:tdcOperationUI.inColumn(a),$currentInnerRow:tdcOperationUI.inInnerRow(a),
$currentInnerColumn:tdcOperationUI.inInnerColumn(a),$currentElement:a});tdcElementUI._setMouseCoordinates({screenX:c.screenX,screenY:c.screenY});tdcOperationUI.setReadyToMove()}}).mouseup(function(c){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))c.preventDefault(),tdcOperationUI.clearReadyToMove(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionElementPlaceholder(c),
tdcElementUI._setMouseCoordinates(e);tdcMaskUI.setContentAtMouseUp(a)}).mousemove(function(c){if(tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))b.isEqual({screenX:c.screenX,screenY:c.screenY},tdcElementUI._getMouseCoordinates())?(c.stopPropagation(),tdcOperationUI.hideHelper()):(c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(c),
tdcMaskUI.hide(),tdcElementUI._setMouseCoordinates(e),tdcOperationUI.clearReadyToMove())}).mouseenter(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(a),c.stopPropagation())}).mouseleave(function(c){tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcElementUI.positionElementPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&(tdcMaskUI.setCurrentElement(e),tdcMaskUI.setCurrentContainer(e),c=tdcOperationUI.inInnerColumn(a),b.isUndefined(c)?(c=tdcOperationUI.inColumn(a),b.isUndefined(c)||c.mouseenter()):c.mouseenter())}).on("fakemouseenterevent",function(c){if(tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")){c.preventDefault();c.stopPropagation();var b=a.outerHeight(!0),e=a.outerWidth(),d=a.offset();parseInt(d.left)<=parseInt(c.pageX)&&parseInt(c.pageX)<=parseInt(d.left+e)&&parseInt(d.top)<=parseInt(c.pageY)&&parseInt(c.pageY)<=parseInt(d.top+b)&&(tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionElementPlaceholder(c))}})},bindEmptyElement:function(a){a.click(function(a){a.preventDefault()}).mousedown(function(c){1===
c.which&&(a.hasClass("tdc-element-column")?tdcColumnHandlerUI._triggerEvent(c):a.hasClass("tdc-element-inner-column")&&tdcInnerColumnHandlerUI._triggerEvent(c))}).mouseup(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),c.stopPropagation(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper(),tdcElementUI.positionEmptyElementPlaceholder(c)):tdcMaskUI.setCurrentElement(a)}).mousemove(function(c){if(tdcOperationUI.isElementDragged()||
(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column"))c.preventDefault(),c.stopPropagation(),tdcOperationUI.showHelper(c),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(c)}).mouseenter(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(a),tdcElementUI.positionEmptyElementPlaceholder(c)):
b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(a)}).mouseleave(function(c){tdcOperationUI.isElementDragged()||(tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isTempInnerRowDragged())&&a.hasClass("tdc-element-column")?(c.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcElementUI.positionEmptyElementPlaceholder(c)):b.isUndefined(tdcOperationUI.getDraggedElement())&&tdcMaskUI.setCurrentElement(e)})},isInnerColumnFirstElement:function(a){var c=a.closest(".tdc-inner-column");
return c.length&&(c=c.find(".tdc-element-inner-column"),c.length&&0===c.index(a))?!0:!1},isInnerColumnLastElement:function(a){var c=a.closest(".tdc-inner-column");return c.length&&(c=c.find(".tdc-element-inner-column"),c.length&&c.length===c.index(a)+1)?!0:!1},getElementCssClass:function(){return tdcElementUI._elementCssClass}}})(jQuery,Backbone,_);var tdcRecycleUI;
(function(g,d,b,e){tdcRecycleUI={_activeClass:"active",_showClass:"show",_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcRecycleUI._isInitialized=!1);tdcRecycleUI._isInitialized||(tdcAdminWrapperUI.$recycle.mouseup(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcRecycleUI._deactivate())}).mouseenter(function(a){(tdcOperationUI.isElementDragged()||
tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle),tdcRecycleUI._activate())}).mouseleave(function(a){(tdcOperationUI.isElementDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isRowDragged())&&!tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.setCurrentElementOver(e),tdcRecycleUI._deactivate())}),tdcRecycleUI._isInitialized=
!0)},_activate:function(){tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._activeClass)},_deactivate:function(){tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._activeClass)},show:function(){!0!==tdcMain.getRecycleShown()&&(tdcMain.setRecycleShown(),!0===tdcMain.getRecycleShown()&&tdcAdminWrapperUI.$recycle.addClass(tdcRecycleUI._showClass))},hide:function(){!1!==tdcMain.getRecycleShown()&&(tdcMain.resetRecycleShown(),tdcAdminWrapperUI.$recycle.removeClass(tdcRecycleUI._showClass))}}})(jQuery,
Backbone,_);var tdcMaskUI;
(function(g,d,b,e){tdcMaskUI={$currentContainer:e,$currentElement:e,$wrapper:e,$content:e,_inMouseUpBubbling:!1,_isInitialized:!1,_handlers:e,contentSettings:{innerColumn:{top:0,left:0},innerRow:{top:0,left:0},column:{top:0,left:0},row:{top:0,left:0}},init:function(a,c){b.isUndefined(c)||!0!==c||(tdcMaskUI._isInitialized=!1);tdcMaskUI._isInitialized||(tdcMaskUI.$wrapper=a,tdcMaskUI.$content=g('<div id="tdc-mask-content"></div>'),tdcMaskUI.$contentFull=g('<div id="tdc-mask-content-full"></div>'),tdcMaskUI.$handlerStructure=
g('<div id="tdc-mask-handler-structure"></div>'),tdcMaskUI.$wrapper.after(tdcMaskUI.$content),tdcMaskUI.$wrapper.after(tdcMaskUI.$contentFull),tdcMaskUI.$wrapper.append(tdcMaskUI.$handlerStructure),tdcRowHandlerUI.init(c),tdcColumnHandlerUI.init(c),tdcInnerRowHandlerUI.init(c),tdcInnerColumnHandlerUI.init(c),tdcElementHandlerUI.init(c),tdcMaskUI._isInitialized=!0)},setCurrentContainer:function(a){if(tdcMaskUI._isInitialized)if(tdcMaskUI.$currentContainer=a,b.isUndefined(tdcMaskUI.$currentContainer))tdcMaskUI.$content.css({top:"",
left:"",width:"",height:""}),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide(),tdcSidebar.setSidebarInfo("");else{var c="";if(tdcOperationUI.isRow(tdcMaskUI.$currentContainer)){var e=tdcMaskUI.$currentContainer;c="tdc-content-row"}else tdcOperationUI.isColumn(tdcMaskUI.$currentContainer)?(e=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),c="tdc-content-column"):tdcOperationUI.isInnerRow(tdcMaskUI.$currentContainer)?(e=tdcMaskUI.$currentContainer,c="tdc-content-inner-row"):tdcOperationUI.isInnerColumn(tdcMaskUI.$currentContainer)&&
(e=tdcMaskUI.$currentContainer.find(".tdc-elements:first"),c="tdc-content-inner-column");if(e.length){var f=e.offset();a=f.top;f=f.left;var d=e.outerWidth();e=e.outerHeight(!0);tdcMaskUI.$content.css({top:a,left:f,width:d,height:e});tdcMaskUI.$content.attr("class",c);tdcMaskUI.$content.show();tdcMaskUI.$contentFull.hide();e=tdcMaskUI.$currentContainer.data("model_id");b.isUndefined(e)||(e=tdcIFrameData.getModel(e),tdcSidebar.setSidebarInfo(e.get("tag")))}}},setCurrentElement:function(a){if(tdcMaskUI._isInitialized&&
!tdcSidebar.mouseOverSidebar)if(tdcMaskUI.$currentElement=a,b.isUndefined(tdcMaskUI.$currentElement))tdcMaskUI.$wrapper.hide(),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide();else{a=tdcIFrameData.iframeContents.find("#tdc-rows").offset();var c=tdcMaskUI.$currentElement.offset(),e=tdcMaskUI.$currentElement.outerWidth(),f=tdcMaskUI.$currentElement.outerWidth(!0),d=tdcMaskUI.$currentElement.outerHeight(),k=tdcMaskUI.$currentElement.outerHeight(!0),h=tdcMaskUI.$currentElement.css("margin-top"),
m=tdcMaskUI.$currentElement.css("margin-left");12>Math.abs(a.top-c.top)?tdcMaskUI.$wrapper.addClass("tdc-mask-top"):tdcMaskUI.$wrapper.removeClass("tdc-mask-top");tdcMaskUI.$wrapper.css({top:c.top,left:c.left,width:e,height:d});tdcMaskUI.$content.css({top:c.top,left:c.left,width:e,height:d});tdcMaskUI.$contentFull.css({top:c.top-parseFloat(h),left:c.left-parseFloat(m),width:f,height:k});tdcMaskUI.$content.removeAttr("class");tdcMaskUI.$wrapper.show();tdcMaskUI.$content.show();tdcMaskUI.$contentFull.show();
tdcMaskUI.setHandlers();a=tdcMaskUI.$currentElement.data("model_id");b.isUndefined(a)||(a=tdcIFrameData.getModel(a),c=a.get("attrs"),b.has(c,"custom_title")?tdcSidebar.setSidebarInfo(c.custom_title):tdcSidebar.setSidebarInfo(a.get("tag")))}},repositionMask:function(a){tdcMaskUI._isInitialized&&(a=tdcAdminIFrameUI._$liveIframe[0].contentWindow.document.elementFromPoint(a.pageX,a.pageY),a=g(a).closest(".tdc-element"),a.length&&tdcMaskUI.setCurrentElement(a))},setContentAtMouseUp:function(a){a.hasClass("tdc-row")?
tdcMaskUI._inMouseUpBubbling?tdcMaskUI._inMouseUpBubbling=!1:tdcMaskUI.setCurrentContainer(a):a.hasClass("tdc-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element-inner-row")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-inner-column")?tdcMaskUI._inMouseUpBubbling||(tdcMaskUI._inMouseUpBubbling=!0,tdcMaskUI.setCurrentContainer(a)):a.hasClass("tdc-element")&&
(tdcMaskUI.setCurrentElement(a),tdcMaskUI._inMouseUpBubbling=!0)},setHandlers:function(){tdcMaskUI._isInitialized&&(b.isUndefined(tdcMaskUI.$currentElement)||b.isUndefined(tdcMaskUI._handlers)||b.map(tdcMaskUI._handlers,function(a,c){a.setElement(tdcMaskUI.$currentElement)}))},addHandler:function(a,c){tdcMaskUI._isInitialized||(b.isUndefined(tdcMaskUI._handlers)?(tdcMaskUI._handlers={},tdcMaskUI._handlers[a]=c):b.has(tdcMaskUI._handlers,a)||(tdcMaskUI._handlers[a]=c))},show:function(){tdcMaskUI._isInitialized&&
!b.isUndefined(tdcMaskUI.$wrapper)&&(tdcMaskUI.$wrapper.show(),tdcMaskUI.$content.show())},hide:function(){tdcMaskUI._isInitialized&&!b.isUndefined(tdcMaskUI.$wrapper)&&(tdcMaskUI.$wrapper.hide(),tdcMaskUI.$content.hide(),tdcMaskUI.$contentFull.hide())}}})(jQuery,Backbone,_);var tdcRowHandlerUI;
(function(g,d,b,e){tdcRowHandlerUI={_handlerId:"tdc-row",_handlerText:"Row",_handlerCssClass:"tdc-mask-row",$elementRow:e,_$handlerWrapper:e,_$handlerClone:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcRowHandlerUI._isInitialized=!1);tdcRowHandlerUI._isInitialized||(tdcRowHandlerUI._$handlerWrapper=g('<div id="'+tdcRowHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Row settings">'+tdcRowHandlerUI._handlerText+"</div></div>"),tdcRowHandlerUI._$handlerClone=
g('<div class="tdc-mask-clone" title="Duplicate row"></div>'),tdcRowHandlerUI._$handlerWrapper.append(tdcRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcRowHandlerUI._$handlerWrapper),tdcRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcRowHandlerUI.$elementRow);
tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}),tdcRowHandlerUI._$handlerClone.mousedown(tdcRowHandlerUI.cloneHandler),tdcMaskUI.addHandler(tdcRowHandlerUI._handlerId,tdcRowHandlerUI),tdcRowHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inRow(a);b.isUndefined(a)?tdcRowHandlerUI._$handlerWrapper.hide():(tdcRowHandlerUI.$elementRow=a,tdcRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||
b.isUndefined(tdcRowHandlerUI.$elementRow)||tdcRowHandlerUI.$elementRow.trigger(a)},cloneHandler:function(a){1===a.which&&(a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone row",tdcRowHandlerUI,function(a){a=g(a.currentTarget);if(a.hasClass("tdc-sidebar-clone-row")){a=a.data("model_id");var c=tdcIFrameData.getModel(a).get("blockUid"),f=tdcAdminIFrameUI.getLiveIframe();tdcRowHandlerUI.$elementRow=f.contents().find("#"+c);tdcDebug.log(a);tdcDebug.log(c);if(!tdcRowHandlerUI.$elementRow.length){tb_remove();
return}tdcRowHandlerUI.$elementRow.data("model_id",a)}a=tdcRowHandlerUI.$elementRow.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcRowHandlerUI -> tdcRowHandlerUI._$handlerClone Error: Element model not in structure data!",!0,!1);else{tdcOperationUI.setDraggedElement(g('<div class="tdc-row">Cloned row</div>'));
var d=tdcOperationUI.getDraggedElement();d.insertAfter(tdcRowHandlerUI.$elementRow);tdcRowUI.bindRow(d);var k=d.prevAll(".tdc-row").length;c=new tdcIFrameData.TdcModel({content:"",attrs:b.clone(a.get("attrs")),tag:"vc_row",type:"closed",level:0,parentModel:e});new tdcIFrameData.TdcLiveView({model:c,el:d[0]});f=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:1,parentModel:c});d.data("model_id",c.cid);tdcIFrameData.tdcRows.add(c,{at:k});d=new tdcIFrameData.TdcCollection;
d.add(f);c.set("childCollection",d);d=new tdcIFrameData.TdcCollection;f.set("childCollection",d);c.getShortcodeRender(1,"",!0,a);tdcOperationUI.setDraggedElement(e);tb_remove()}},[a],"Are you sure you want to clone the current row and all its elements?"),tdcRowHandlerUI._inCloneOperation=!1)},deleteHandler:function(a){null!==a&&a.preventDefault();a.preventDefault();a.stopPropagation();tdConfirm.showModal("Delete row",tdcRowHandlerUI,function(a){a=g(a.currentTarget);if(a.hasClass("tdc-sidebar-delete-row")){a=
a.data("model_id");var c=tdcIFrameData.getModel(a).get("blockUid"),b=tdcAdminIFrameUI.getLiveIframe();tdcRowHandlerUI.$elementRow=b.contents().find("#"+c);tdcDebug.log(a);tdcDebug.log(c);if(!tdcRowHandlerUI.$elementRow.length){tb_remove();return}tdcRowHandlerUI.$elementRow.data("model_id",a)}tdcOperationUI.setDraggedElement(tdcRowHandlerUI.$elementRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();c=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");
b=a.children();c=b.index(c);if(-1===c&&1===b.length||2===b.length&&-1!==c)c="",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(c=" tdc-element-column"),c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(c),a.append(c);tdcIFrameData.changeData({wasSidebarElementDragged:!1,wasElementDragged:!1,
wasInnerColumnDragged:!1,wasInnerRowDragged:!1,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!0,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tdcSidebarPanel.clearPanel();tb_remove()},[a],"Are you sure you want to delete the current row and all its elements?")}}})(jQuery,Backbone,_);var tdcColumnHandlerUI;
(function(g,d,b,e){tdcColumnHandlerUI={_handlerId:"tdc-column",_handlerText:"Column",_handlerCssClass:"tdc-mask-column",$elementColumn:e,_$handlerWrapper:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcColumnHandlerUI._isInitialized=!1);tdcColumnHandlerUI._isInitialized||(a=g('<div id="'+tdcColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Column settings">'+tdcColumnHandlerUI._handlerText+"</div></div>"),tdcColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a),
tdcColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcColumnHandlerUI._triggerEvent(a)}),tdcColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(tdcColumnHandlerUI.$elementColumn);
tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcColumnHandlerUI._handlerId,tdcColumnHandlerUI),tdcColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inColumn(a);b.isUndefined(a)?tdcColumnHandlerUI._$handlerWrapper.hide():(tdcColumnHandlerUI.$elementColumn=a,tdcColumnHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcColumnHandlerUI.$elementColumn)||
tdcColumnHandlerUI.$elementColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcInnerRowHandlerUI;
(function(g,d,b,e){tdcInnerRowHandlerUI={_handlerId:"tdc-element-inner-row",_handlerText:"Inner Row",_handlerCssClass:"tdc-mask-inner-row",$elementInnerRow:e,_$handlerWrapper:e,_$handlerClone:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcInnerRowHandlerUI._isInitialized=!1);tdcInnerRowHandlerUI._isInitialized||(tdcInnerRowHandlerUI._$handlerWrapper=g('<div id="'+tdcInnerRowHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Inner row settings">'+tdcInnerRowHandlerUI._handlerText+
"</div></div>"),tdcInnerRowHandlerUI._$handlerClone=g('<div class="tdc-mask-clone" title="Duplicate inner row"></div>'),tdcInnerRowHandlerUI._$handlerWrapper.append(tdcInnerRowHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcInnerRowHandlerUI._$handlerWrapper),tdcInnerRowHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerRowHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerRowHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcInnerRowHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(tdcInnerRowHandlerUI.$elementInnerRow);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}),tdcInnerRowHandlerUI._$handlerClone.mousedown(tdcInnerRowHandlerUI.cloneHandler),tdcMaskUI.addHandler(tdcInnerRowHandlerUI._handlerId,tdcInnerRowHandlerUI),tdcInnerRowHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerRow(a);b.isUndefined(a)?tdcInnerRowHandlerUI._$handlerWrapper.hide():(tdcInnerRowHandlerUI.$elementInnerRow=
a,tdcInnerRowHandlerUI._$handlerWrapper.show())},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcInnerRowHandlerUI.$elementInnerRow)||tdcInnerRowHandlerUI.$elementInnerRow.trigger(a)},cloneHandler:function(a){1===a.which&&(a.preventDefault(),a.stopPropagation(),tdConfirm.showModal("Clone inner row",tdcInnerRowHandlerUI,function(a){a=g(a.currentTarget);if(a.hasClass("tdc-sidebar-clone-inner-row")){a=a.data("model_id");var c=tdcIFrameData.getModel(a).get("blockUid"),f=tdcAdminIFrameUI.getLiveIframe();
console.log(a);console.log(c);c=f.contents().find("#"+c);if(!c.length){tb_remove();return}tdcInnerRowHandlerUI.$elementInnerRow=c.closest("."+tdcInnerRowUI.getElementCssClass());tdcInnerRowHandlerUI.$elementInnerRow.data("model_id",a)}a=tdcInnerRowHandlerUI.$elementInnerRow.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcInnerRowHandlerUI -> tdcInnerRowHandlerUI._$handlerClone Error: Element model not in structure data!",
!0,!1);else{tdcOperationUI.setDraggedElement(g('<div class="tdc-element-column tdc-element-inner-row">Cloned Inner Row</div>'));var d=tdcOperationUI.getDraggedElement();d.insertAfter(tdcInnerRowHandlerUI.$elementInnerRow);tdcInnerRowUI.bindInnerRow(d);var k=d.prevAll(".tdc-element-column").length;c=new tdcIFrameData.TdcModel({content:"",attrs:b.clone(a.get("attrs")),tag:"vc_row_inner",type:"closed",level:2,parentModel:a.get("parentModel")});new tdcIFrameData.TdcLiveView({model:c,el:d[0]});f=new tdcIFrameData.TdcModel({content:"",
attrs:{},tag:"vc_column_inner",type:"closed",level:3,parentModel:c});d.data("model_id",c.cid);a.get("parentModel").get("childCollection").add(c,{at:k});d=new tdcIFrameData.TdcCollection;d.add(f);c.set("childCollection",d);d=new tdcIFrameData.TdcCollection;f.set("childCollection",d);f=tdcIFrameData._getDestinationCol();c.getShortcodeRender(f,"",!0,a);tdcOperationUI.setDraggedElement(e);tb_remove()}},[a],"Are you sure you want to clone the current inner row and all its elements?"))},deleteHandler:function(a){null!==
a&&a.preventDefault();tdConfirm.showModal("Delete inner row",tdcInnerRowHandlerUI,function(){tdcOperationUI.setDraggedElement(tdcInnerRowHandlerUI.$elementInnerRow);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);var a=tdcOperationUI.getDraggedElement(),d=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");var f=a.children();d=f.index(d);if(-1===d&&1===f.length||2===f.length&&-1!==d)d="",b.isUndefined(tdcElementHandlerUI.$element)&&(tdcElementHandlerUI.$element=tdcInnerRowHandlerUI.$elementInnerRow),
tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?d=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(d=" tdc-element-column"),d=g('<div class="'+tdcOperationUI._emptyElementClass+d+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(d),a.append(d);tdcIFrameData.changeData({wasSidebarElementDragged:!1,wasElementDragged:!1,wasInnerColumnDragged:!1,wasInnerRowDragged:!0,wasTempInnerRowDragged:!1,wasColumnDragged:!1,
wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tdcSidebarPanel.clearPanel();tb_remove()},e,"Are you sure you want to delete the current inner row and all its elements?")}}})(jQuery,Backbone,_);var tdcInnerColumnHandlerUI;
(function(g,d,b,e){tdcInnerColumnHandlerUI={_handlerId:"tdc-inner-column",_handlerText:"Inner Column",_handlerCssClass:"tdc-mask-inner-column",$elementInnerColumn:e,_$handlerWrapper:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcInnerColumnHandlerUI._isInitialized=!1);tdcInnerColumnHandlerUI._isInitialized||(a=g('<div id="'+tdcInnerColumnHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Inner column settings">'+tdcInnerColumnHandlerUI._handlerText+"</div></div>"),
tdcInnerColumnHandlerUI._$handlerWrapper=a,tdcMaskUI.$handlerStructure.append(a),tdcInnerColumnHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseenter(function(a){tdcMaskUI.show();tdcInnerColumnHandlerUI._triggerEvent(a)}).mouseleave(function(a){tdcInnerColumnHandlerUI._triggerEvent(a)}),tdcInnerColumnHandlerUI._$handlerWrapper.mouseenter(function(a){a.preventDefault();
tdcMaskUI.setCurrentContainer(tdcInnerColumnHandlerUI.$elementInnerColumn);tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentContainer(e);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcInnerColumnHandlerUI._handlerId,tdcInnerColumnHandlerUI),tdcInnerColumnHandlerUI._isInitialized=!0)},setElement:function(a){a=tdcOperationUI.inInnerColumn(a);b.isUndefined(a)?tdcInnerColumnHandlerUI._$handlerWrapper.hide():(tdcInnerColumnHandlerUI.$elementInnerColumn=a,tdcInnerColumnHandlerUI._$handlerWrapper.show())},
_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcInnerColumnHandlerUI.$elementInnerColumn)||tdcInnerColumnHandlerUI.$elementInnerColumn.trigger(a)}}})(jQuery,Backbone,_);var tdcElementHandlerUI;
(function(g,d,b,e){tdcElementHandlerUI={_handlerId:"tdc-element",_handlerCssClass:"tdc-mask-element",_handlerText:"Element",_confirmDeletion:"Do you want to delete element?",$element:e,_$handlerWrapper:e,_$handlerClone:e,_$handlerDelete:e,_isInitialized:!1,init:function(a){b.isUndefined(a)||!0!==a||(tdcElementHandlerUI._isInitialized=!1);tdcElementHandlerUI._isInitialized||(tdcElementHandlerUI._$handlerWrapper=g('<div id="'+tdcElementHandlerUI._handlerCssClass+'"><div class="tdc-mask-handler-drag" title="Element settings">'+
tdcElementHandlerUI._handlerText+"</div></div>"),tdcElementHandlerUI._$handlerDelete=g('<div class="tdc-mask-element-delete" title="Delete element"></div>'),tdcElementHandlerUI._$handlerClone=g('<div class="tdc-mask-element-clone" title="Duplicate element"></div>'),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerDelete),tdcElementHandlerUI._$handlerWrapper.append(tdcElementHandlerUI._$handlerClone),tdcMaskUI.$handlerStructure.append(tdcElementHandlerUI._$handlerWrapper),tdcElementHandlerUI._$handlerDelete.click(function(a){tdConfirm.showModal("Delete current element",
tdcElementHandlerUI,function(a){tdcElementHandlerUI.deleteHandler(a);tb_remove()},[a],"Are you sure you want to delete this element?")}),tdcElementHandlerUI._$handlerClone.click(function(a){a.preventDefault();a.stopPropagation();a=tdcElementHandlerUI.$element.data("model_id");if(b.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model id is not in $draggedElement data!",!0,!1);else if(a=tdcIFrameData.getModel(a),b.isUndefined(a))new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Element model not in structure data!",
!0,!1);else{var c=a.clone(),f=a.get("parentModel").get("childCollection");f.add(c,{at:f.indexOf(a)+1,silent:!0});tdcOperationUI.setDraggedElement(g('<div class="tdc-element">Cloned Element</div>'));f=tdcOperationUI.getDraggedElement();f.insertAfter(tdcElementHandlerUI.$element);tdcElementUI.bindElement(f);var d=tdcIFrameData._getDestinationModel([".tdc-inner-column",".tdc-column"]);b.isUndefined(d)&&new tdcNotice.notice("tdcElementHandlerUI -> tdcElementHandlerUI._$handlerClone Error: Destination model not in structure data!",
!0,!1);d=tdcIFrameData._getDestinationCol();new tdcIFrameData.TdcLiveView({model:c,el:f[0]});f.data("model_id",c.cid);c.getShortcodeRender(d,"",!0,a);tdcOperationUI.setDraggedElement(e)}}),tdcElementHandlerUI._$handlerWrapper.mousedown(function(a){1===a.which&&tdcElementHandlerUI._triggerEvent(a)}).mouseup(function(a){tdcElementHandlerUI._triggerEvent(a)}).mousemove(function(a){tdcMaskUI.show();tdcElementHandlerUI._triggerEvent(a)}).mouseenter(function(a){a.preventDefault();tdcMaskUI.setCurrentElement(tdcElementHandlerUI.$element);
tdcMaskUI.show()}).mouseleave(function(a){a.preventDefault();tdcMaskUI.setCurrentElement(e);tdcMaskUI.hide()}),tdcMaskUI.addHandler(tdcElementHandlerUI._handlerId,tdcElementHandlerUI),tdcElementHandlerUI._isInitialized=!0)},deleteHandler:function(a){null!==a&&a.preventDefault();tdcOperationUI.setDraggedElement(tdcElementHandlerUI.$element);tdcOperationUI.setCurrentElementOver(tdcAdminWrapperUI.$recycle);a=tdcOperationUI.getDraggedElement();var c=tdcAdminWrapperUI.$placeholder;a=a.closest(".tdc-elements");
var b=a.children();c=b.index(c);if(-1===c&&1===b.length||2===b.length&&-1!==c)c="",tdcElementHandlerUI.$element.closest(".tdc-inner-column").length?c=" tdc-element-inner-column":tdcElementHandlerUI.$element.closest(".tdc-column").length&&(c=" tdc-element-column"),c=g('<div class="'+tdcOperationUI._emptyElementClass+c+'" title="Empty element that should be removed by composer"></div>'),tdcElementUI.bindEmptyElement(c),a.append(c);tdcIFrameData.changeData({wasSidebarElementDragged:!1,wasElementDragged:!0,
wasInnerColumnDragged:!1,wasInnerRowDragged:!1,wasTempInnerRowDragged:!1,wasColumnDragged:!1,wasRowDragged:!1,wasTempRowDragged:!1,draggedBlockUid:"",sourceColParam:null});tdcOperationUI.setDraggedElement(e);tdcOperationUI.setCurrentElementOver(e);tdcSidebarPanel.clearPanel()},setElement:function(a){!b.isUndefined(a)&&tdcOperationUI.isElement(a)?(tdcElementHandlerUI.$element=a,tdcElementHandlerUI._$handlerWrapper.show()):tdcElementHandlerUI._$handlerWrapper.hide()},show:function(){tdcElementHandlerUI._$handlerWrapper.show()},
hide:function(){tdcElementHandlerUI._$handlerWrapper.hide()},_triggerEvent:function(a){b.isUndefined(a)||b.isUndefined(tdcElementHandlerUI.$element)||tdcElementHandlerUI.$element.trigger(a)}}})(jQuery,Backbone,_);var tdcIFrameData;
(function(g,d,b,e){tdcIFrameData={iframeContents:e,tdcRows:e,TdcModel:e,TdcCollection:e,TdcLiveView:e,_postOriginalContentJSON:e,_shortcodeParserSettingsClone:e,_isInitialized:!1,init:function(a,c){b.isUndefined(c)||!0!==c||(tdcIFrameData._isInitialized=!1);if(!tdcIFrameData._isInitialized&&(tdcIFrameData.iframeContents=a,tdcIFrameData._defineStructuredData(),!0===tdcIFrameData._initStructuredData())){var e={};tdcIFrameData.bindViewsModelsWrappers(e);if(!b.isEmpty(e)){for(var f in e)tdcDebug.log(e[f]);
var d='The model does not match the <a href="'+a.attr("URL")+'" target="_blank">content</a>';b.isUndefined(e[f].info)||(d=e[f].info+". "+d);new tdcNotice.notice(d,!0,!1)}tdcDebug.log(tdcIFrameData.tdcRows.models);tdcIFrameData._isInitialized=!0}},_defineStructuredData:function(){tdcIFrameData._isInitialized||(tdcIFrameData.TdcModel=Backbone.Model.extend({getShortcodeRender:function(a,c,d,f){var l=this,k={error:e,getShortcode:""};b.isUndefined(f)?tdcIFrameData._checkModelData(l,k):tdcIFrameData._checkModelData(f,
k);if(!b.isUndefined(k.getShortcode)){var h=new tdcJobManager.job;h.shortcode=k.getShortcode;h.columns=a;h.blockUid=c;h.success_callback=function(a){tdcDebug.log(a);var k=tdcAdminIFrameUI.getIframeWindow();b.isUndefined(f)&&tdcIFrameData.deleteCallback(l);!1===d?l.set("blockUid",a.blockUid):l.set("blockUid",e);b.has(a,"replyHtml")&&(l.set("bindNewContent",d),l.set("shortcode",h.shortcode),l.set("html",a.replyHtml));b.has(a,"replyJsForEval")&&(k.tdcEvalGlobal={oldBlockUid:c},tdcAdminIFrameUI.evalInIframe(a.replyJsForEval))};
h.error_callback=function(a,c){tdcDebug.log(c);tdcDebug.log(a)};a=tdcOperationUI.getDraggedElement();b.isUndefined(a)||a.addClass("tdc-dropped");tdcJobManager.addJob(h)}k={error:e,getShortcode:""};tdcIFrameData._checkModelData(l,k);b.isUndefined(k.error)||tdcDebug.log(k.error);k={error:e,getShortcode:""};b.isUndefined(l.get("parentModel"))||(tdcIFrameData._checkModelData(l.get("parentModel"),k),b.isUndefined(k.error)||tdcDebug.log(k.error))}}),tdcIFrameData.TdcCollection=Backbone.Collection.extend({model:tdcIFrameData.TdcModel}),
tdcIFrameData.TdcLiveView=Backbone.View.extend({initialize:function(){this.listenTo(this.model,"change:current",this.changeCurrent);this.listenTo(this.model,"change:html",this.customRender);this.listenTo(this.model,"remove",this.customRemove)},changeCurrent:function(a,c,e){this.model.has("current")&&!b.isUndefined(this.model.get("current"))&&!0===this.model.get("current")?this.$el.addClass("tdc-element-selected"):this.$el.removeClass("tdc-element-selected");this.model.set("cssWidth",this.$el.width())},
customRemove:function(a,c,b){"tdc-rows"===this.$el.attr("id")?this.$el.html(""):this.remove()},customRender:function(a,c,d){tdcDebug.log("customRender - Rendering our model");if(this.model.has("html")&&!b.isUndefined(this.model.get("html"))&&(this.$el.removeClass("tdc-dropped"),this.$el.removeClass("tdc-changed"),this.$el.html(this.model.get("html")),setTimeout(function(){"undefined"!==typeof tdcIFrameData.iframeContents.lastMouseEvent&&tdcMaskUI.repositionMask(tdcIFrameData.iframeContents.lastMouseEvent)},
100),d=this.$el.find(".td_block_wrap"),d.length&&0===parseInt(d.outerHeight(!0))&&d.addClass("tdc-block-empty"),this.model.has("bindNewContent")&&!0===this.model.get("bindNewContent")))if(this.model.set("bindNewContent",!1,{silent:!0}),this.$el.hasClass("tdc-element-inner-row-temp")){if(a.has("templateContent")){d=window.atob(a.get("templateContent"));var f=this.$el.find(".tdc-inner-row");a.set("type","closed");a.set("content",d);a.unset("shortcode",{silent:!0});a.unset("templateContent",{silent:!0});
tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);var l=tdcShortcodeParser.parse(2,d);l.length&&(l=b.clone(l[0].shortcode.attrs.named),a.set("attrs",l));this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row");this.model.set("blockUid",f.attr("id"));window.addInnerRowWrappers(this.$el);if(!0===tdcIFrameData._initNewContentStructureData(3,d,a)){c=a.get("childCollection");var k={};tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,3);if(!b.isEmpty(k)){for(var h in k)tdcDebug.log(k[h]);
new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}}}else if(f=this.$el.find(".tdc-inner-row"),c=a.get("childCollection"),this.$el.removeClass("tdc-element-inner-row-temp").addClass("tdc-element-inner-row"),this.model.set("blockUid",f.attr("id")),window.addInnerRowWrappers(this.$el),!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,3),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerRowUI.init(this.$el.parent());tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},e,this.model)}else if(this.$el.hasClass("tdc-element-inner-row")){f=this.$el.find(".tdc-inner-row");c=this.model.get("childCollection");b.isUndefined(c)||c.reset();window.addInnerRowWrappers(this.$el);this.model.set("blockUid",
f.attr("id"));var m=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,m,a)&&(c=this.model.get("childCollection"),!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,3),!b.isEmpty(k)))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),
$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el)},e,this.model)}else if(this.$el.hasClass("tdc-row-cloud-temp")){if(this.model.has("templateContent")){var n=this;d=n.model.get("templateContent");h=n.$el.find(".tdc-row");tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);a=tdcShortcodeParser.parse(0,window.atob(d));if(a.length!==h.length)new tdcNotice.notice("Errors happened in templateContent(content.length!==$tdcRows.length) during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);else{var p=tdcIFrameData.tdcRows;tdcIFrameData.tdcRows=new tdcIFrameData.TdcCollection;b.each(a,function(a,c,b){tdcIFrameData._getData(e,a,k)});b.isEmpty(k)||(tdcDebug.log(k),new tdcNotice.notice("Errors happened in templateContent during tdcIFrameData.changeData() -> _getData()!",!0,!1));a={error:e,shortcode:e};tdcIFrameData.checkCurrentData(a);b.isUndefined(a.error)||(tdcDebug.log(a.error),new tdcNotice.notice(k,!0,!1));h.length!==tdcIFrameData.tdcRows.length?new tdcNotice.notice("Errors happened in templateContent during() tdcIFrameData.TdcLiveView -> customRender!",
!0,!1):(n.$el.find(".tdc-row").each(function(a,c){var e=g(c);e.insertBefore(n.$el);var d=tdcIFrameData.tdcRows.at(a);new tdcIFrameData.TdcLiveView({model:d,el:c});var f=n.$el.prevAll().length,l=d.get("childCollection");p.add(d,{at:f});window.addRowWrappers(e);if(!0===tdcIFrameData._initNewContentStructureData(1,m,d)&&!b.isUndefined(l))if(f={},tdcIFrameData.bindViewsModelsWrappers(f,l,e,1),b.isEmpty(f))e.data("model_id",d.cid);else{for(var k in f)tdcDebug.log(f[k]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1)}}),tdcIFrameData.tdcRows.reset(),tdcIFrameData.tdcRows=p,n.$el.remove(),tdcIFrameData.removeModel(n.model),tdcRowUI.init(f),tdcColumnUI.init(f),tdcInnerRowUI.init(f),tdcInnerColumnUI.init(f),tdcElementUI.init(f),tdcSidebar.setSettings({$currentRow:f},e,this.model))}}}else if(this.$el.hasClass("tdc-row-temp"))if(a.has("templateContent")){d=window.atob(a.get("templateContent"));f=this.$el.find(".tdc-row");c=a.get("childCollection");console.log("childCollection");console.log(c);a.set("type","closed");
a.set("content",d);a.unset("shortcode",{silent:!0});a.unset("templateContent",{silent:!0});tdcShortcodeParser.init(tdcIFrameData._shortcodeParserSettingsClone);l=tdcShortcodeParser.parse(0,d);l.length&&(l=b.clone(l[0].shortcode.attrs.named),a.set("attrs",l));this.$el.removeClass("tdc-row-temp").addClass(f.attr("class"));this.$el.attr("id",f.attr("id"));this.$el.html(f.html());this.model.set("blockUid",f.attr("id"));window.addRowWrappers(this.$el);if(!0===tdcIFrameData._initNewContentStructureData(1,
d,a)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,1),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el.parent());tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:this.$el},e,a)}else if(f=this.$el.find(".tdc-row"),c=a.get("childCollection"),this.$el.removeClass("tdc-row-temp").addClass(f.attr("class")),
this.$el.attr("id",f.attr("id")),this.$el.html(f.html()),this.model.set("blockUid",f.attr("id")),window.addRowWrappers(this.$el),k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,1),b.isEmpty(k))tdcRowUI.init(this.$el.parent()),tdcColumnUI.init(this.$el),tdcElementUI.init(this.$el),tdcSidebar.setSettings({$currentRow:this.$el,$currentColumn:tdcOperationUI.inColumn(d),$currentElement:d},e,this.model);else{for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1)}else if(this.$el.hasClass("tdc-row")){f=this.$el.find(".tdc-row");c=this.model.get("childCollection");b.isUndefined(c)||c.reset();this.$el.html(f.html());this.$el.attr("class",f.attr("class"));this.$el.attr("id",f.attr("id"));this.model.set("blockUid",f.attr("id"));window.addRowWrappers(this.$el);m=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(1,m,this.model)&&!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,1),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);
new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:this.$el},e,this.model)}else if(this.$el.hasClass("tdc-column")){f=this.$el.find(".tdc-column");c=this.model.get("childCollection");b.isUndefined(c)||c.reset();f.unwrap();this.$el=f;this.$el.data("model_id",this.model.cid);window.addColumnWrappers(this.$el);
m=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(2,m,this.model)&&!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,2),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcColumnUI.init(this.$el.parent());tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),
$currentColumn:this.$el},e,this.model)}else if(this.$el.hasClass("tdc-inner-row")){f=this.$el.find(".tdc-inner-row");c=this.model.get("childCollection");b.isUndefined(c)||c.reset();this.$el.html(f.html());window.addInnerRowWrappers(this.$el);m=this.model.get("shortcode");if(!0===tdcIFrameData._initNewContentStructureData(3,m,this.model)&&!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,3),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",
!0,!1);return}tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:this.$el},e,this.model)}else if(this.$el.hasClass("tdc-inner-column")){f=this.$el.find(".tdc-inner-column");c=this.model.get("childCollection");b.isUndefined(c)||c.reset();f.unwrap();this.$el=f;this.$el.data("model_id",this.model.cid);window.addInnerColumnWrappers(this.$el);m=this.model.get("shortcode");
if(!0===tdcIFrameData._initNewContentStructureData(4,m,this.model)&&!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,this.$el,4),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcInnerColumnUI.init(this.$el.parent());tdcElementUI.init(this.$el);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),
$currentInnerColumn:this.$el},e,this.model)}else if("tdc-rows"===this.$el.attr("id")){f=this.$el.find(".tdc-row");d=this.model.cid;a=tdcIFrameData.getModel(d);c=a.get("childCollection");f.data("model_id",d);this.model.set("blockUid",f.attr("id"));window.addRowWrappers(this.$el);if(!b.isUndefined(c)&&(k={},tdcIFrameData.bindViewsModelsWrappers(k,c,f,1),!b.isEmpty(k))){for(h in k)tdcDebug.log(k[h]);new tdcNotice.notice("Errors happened during tdcIFrameData.TdcLiveView -> customRender!",!0,!1);return}tdcRowUI.init(this.$el);
tdcColumnUI.init(this.$el);tdcInnerRowUI.init(this.$el);tdcInnerColumnUI.init(this.$el);tdcElementUI.init(this.$el);this.$el=f;tdcSidebar.setSettings({$currentRow:f},e,this.model)}else if(this.$el.hasClass("tdc-element")){f=this.$el.attr("class");h=[];b.isUndefined(f)||(h=this.$el.attr("class").split(/\s+/));this.$el.html(this.model.get("html"));f=this.$el.find(".td_block_wrap");f.unwrap();this.$el=f;this.$el.data("model_id",this.model.cid);this.model.set("blockUid",f.data("td-block-uid"));f=e;this.model.has("rebindToPanel")&&
!0===this.model.get("rebindToPanel")&&(this.model.set("rebindToPanel",!1,{silent:!0}),f=!0);tdcSidebar.setSettings({$currentRow:tdcOperationUI.inRow(this.$el),$currentColumn:tdcOperationUI.inColumn(this.$el),$currentInnerRow:tdcOperationUI.inInnerRow(this.$el),$currentInnerColumn:tdcOperationUI.inInnerColumn(this.$el),$currentElement:this.$el},f,this.model);var t=this;g.each(h,function(a,c){0===c.indexOf("tdc-element")&&t.$el.addClass(c)});tdcElementUI.bindElement(this.$el)}}}))},_getPostOriginalContentJSON:function(){if(b.isUndefined(tdcIFrameData._postOriginalContentJSON)&&
!b.isUndefined(window.tdcPostSettings)){var a=Object.keys(window.tdcAdminSettings.mappedShortcodes);a=a.filter(function(a){return 0>["vc_row","vc_column","vc_row_inner","vc_column_inner"].indexOf(a)});a={0:["vc_row"],1:["vc_column"],2:["vc_row_inner"],3:["vc_column_inner"],4:a};tdcIFrameData._shortcodeParserSettingsClone=a;tdcShortcodeParser.init(a);tdcIFrameData._postOriginalContentJSON=tdcShortcodeParser.parse(0,window.tdcPostSettings.postContent)}return tdcIFrameData._postOriginalContentJSON},
_getContentJSON:function(a,c){var e;b.isUndefined(window.tdcPostSettings)||(e=tdcShortcodeParser.parse(a,c));return e},_initStructuredData:function(){if(!tdcIFrameData._isInitialized){var a=tdcIFrameData._getPostOriginalContentJSON();tdcDebug.log(a);if(a.length){tdcIFrameData.tdcRows=new tdcIFrameData.TdcCollection;var c={};b.each(a,function(a,b,d){tdcIFrameData._getData(e,a,c)});b.isEmpty(c)||(tdcDebug.log(c),new tdcNotice.notice("Errors happened during _initStructureData() -> _getData()!",!0,!1));
a={error:e,shortcode:e};tdcIFrameData.checkCurrentData(a);b.isUndefined(a.error)||(tdcDebug.log(a.error),new tdcNotice.notice(c,!0,!1))}return!0}},_initNewContentStructureData:function(a,c,d){c=tdcIFrameData._getContentJSON(a,c);if(c.length){var f={};b.each(c,function(c,b,e){tdcIFrameData._getData(d,c,f,a)});b.isEmpty(f)||(tdcDebug.log(f),new tdcNotice.notice(f,!0,!1));c={error:e,shortcode:e};tdcIFrameData.checkCurrentData(c);b.isUndefined(c.error)||(tdcDebug.log(c.error),new tdcNotice.notice("Errors happened during _initNewContentStructureData() -> checkCurrentData()!",
!0,!1))}return!0},_getData:function(a,c,d,f){var l;if(b.isUndefined(a))var k=tdcIFrameData.tdcRows;else k=a.get("childCollection"),b.isUndefined(k)&&(k=new tdcIFrameData.TdcCollection,a.set("childCollection",k));for(var h in tdcIFrameData._shortcodeParserSettingsClone)if(!(!b.isUndefined(f)&&parseInt(f,10)>h||b.isUndefined(c.shortcode))&&b.isObject(c.shortcode)&&b.has(c.shortcode,"tag")&&-1!==b.indexOf(tdcIFrameData._shortcodeParserSettingsClone[h],c.shortcode.tag)){0<parseInt(h,10)&&b.isUndefined(a)&&
(l="Not rows as the first elements!");!b.isUndefined(a)&&parseInt(a.get("level"),10)>=parseInt(h,10)&&(l="Elements does not respect the shortcode levels! ParentModel (cid: "+a.cid+" ) level: "+a.get("level")+" - element level : "+h);!b.isUndefined(a)&&1<parseInt(h,10)-parseInt(a.get("level"),10)&&2!==parseInt(a.get("level"),10)&&4!==parseInt(h,10)&&(l="Elements respect the shortcode levels, but the difference higher than 1 is not allowed here!");b.isUndefined(l)||(d[b.keys(d).length]={element:c,info:l,
parentModel:a});4!==parseInt(h,10)||b.isUndefined(c.shortcode.content)||(f=b.clone(c.shortcode.attrs.named),f.content=c.shortcode.content,c.shortcode.attrs.named=f);var m=new tdcIFrameData.TdcModel({content:c.content,attrs:c.shortcode.attrs.named,tag:c.shortcode.tag,type:c.shortcode.type,level:parseInt(h,10),parentModel:a,bindNewContent:!1});b.has(c,"child")&&0<c.child.length&&(m.set("childCollection",new tdcIFrameData.TdcCollection),b.each(c.child,function(a,c,b){tdcIFrameData._getData(m,a,d,e)}));
break}b.isUndefined(m)?d[b.keys(d).length]={element:c,info:"Element not found!",parentModel:a}:b.isUndefined(k)||k.add(m)},getModel:function(a,c){if(tdcIFrameData._isInitialized){var e;b.isUndefined(c)&&(c=tdcIFrameData.tdcRows);b.each(c.models,function(c,d,l){b.isUndefined(e)&&(c.cid===a?e=c:c.has("childCollection")&&(c=c.get("childCollection"),e=tdcIFrameData.getModel(a,c)))});if(!b.isUndefined(e))return e}},getFirstModelByTag:function(a,c){if(tdcIFrameData._isInitialized){var e;b.isUndefined(c)&&
(c=tdcIFrameData.tdcRows);b.each(c.models,function(c,d,l){b.isUndefined(e)&&(c.attributes.tag===a?e=c:c.has("childCollection")&&(c=c.get("childCollection"),e=tdcIFrameData.getFirstModelByTag(a,c)))});if(!b.isUndefined(e))return e}},removeModel:function(a,c,e){(b.isUndefined(c)||!0===c)&&tdcIFrameData.deleteCallback(a);c=a.get("parentModel");b.isUndefined(e)&&(e={});b.isUndefined(c)?tdcIFrameData.tdcRows.remove(a,e):c.get("childCollection").remove(a,e)},deleteCallback:function(a){var c=a.get("blockUid");
a=a.get("childCollection");tdcAdminIFrameUI.getIframeWindow().tdcComposerBlocksApi.deleteItem(c);!b.isUndefined(a)&&a.length&&b.each(a.models,function(a,c,b){tdcIFrameData.deleteCallback(a)})},_checkModelData:function(a,c){if(b.isUndefined(c.error)){var d=a.get("parentModel");if(0!==a.level||b.isUndefined(d))if(!b.isUndefined(d)&&parseInt(d.get("level"),10)>=parseInt(a.level,10))c.error="Elements does not respect the shortcode levels!";else if(!b.isUndefined(d)&&1<parseInt(a.level,10)-parseInt(d.get("level"),
10)&&2!==parseInt(d.get("level"),10)&&4!==parseInt(a.level,10))c.error="Elements respect the shortcode levels, but the difference higher than 1 is not allowed here!";else{!b.isUndefined(c.getShortcode)&&b.isUndefined(c.deepLevel)&&(c.deepLevel=0,c["tempShortcodeDeepLevel"+c.deepLevel]="");if(!b.isUndefined(c.getShortcode)&&a.has("templateContent")&&""!==a.get("templateContent"))c.template=window.atob(a.get("templateContent"));else if(a.has("childCollection")){b.isUndefined(c.getShortcode)||(c.deepLevel++,
c["tempShortcodeDeepLevel"+c.deepLevel]="");var f=a.get("childCollection");b.each(f.models,function(a,b,e){tdcIFrameData._checkModelData(f.get(a.cid),c)});b.isUndefined(c.getShortcode)||c.deepLevel--}if(!b.isUndefined(c.getShortcode)){d=a.get("type");var q=a.get("tag"),k=a.get("attrs"),h="";if("undefined"!==typeof c.images){var m=b.clone(k);b.map(k,function(a,e){b.map(window.tdcAdminSettings.mappedShortcodes[q].params,function(a,d){if(e===a.param_name)if("attach_image"===a.type){var f=k[a.param_name],
l=tdcJobManager._getUniqueID();b.isUndefined(c.images.ids)?(c.images.ids={},c.images.ids[f]=l):b.isUndefined(c.images.ids[f])?c.images.ids[f]=l:l=c.images.ids[f];m[e]=l}else if("tdc_css"===a.param_name&&""!==k.tdc_css){var h=JSON.parse(window.atob(k.tdc_css));b.map(h,function(a,e){b.map(h[e],function(a,d){if(0===a.trim().indexOf("url")){var f=tdcJobManager._getUniqueID();b.isUndefined(c.images.urls)?(c.images.urls={},c.images.urls[a]=f):b.isUndefined(c.images.urls[a])?c.images.urls[a]=f:f=c.images.urls[a];
h[e][d]=f}})});m.tdc_css=window.btoa(JSON.stringify(h))}})});k=m}else"undefined"!==typeof c.newImages&&(m=b.clone(k),b.map(k,function(a,e){b.map(window.tdcAdminSettings.mappedShortcodes[q].params,function(a,d){if(e===a.param_name)if("attach_image"===a.type){var f=k[a.param_name],l=c.newImages.find(function(a){return f===a.uid.substring(8)});"undefined"!==typeof l&&(m[e]=l.attachment_id)}else if("tdc_css"===a.param_name&&""!==k.tdc_css){var h=JSON.parse(window.atob(k.tdc_css));b.map(h,function(a,e){b.map(h[e],
function(a,b){var d=c.newImages.find(function(c){return a===c.uid.substring(8)});"undefined"!==typeof d&&(h[e][b]='url("'+d.url+'")')})});m.tdc_css=window.btoa(JSON.stringify(h))}})}),k=m,a.set("attrs",k));if("td_block_text_with_title"===q||"vc_column_text"===q||"vc_raw_html"===q)b.map(k,function(a,c){"content"!==c&&(h+=" "+c+'="'+a+'"')}),h=b.has(k,"content")?"["+q+h+"]"+b.unescape(k.content)+"[/"+q+"]":"["+q+h+"]";else switch(b.map(k,function(a,c){h+=" "+c+'="'+a+'"'}),d){case "single":h="["+q+
h+"]";break;case "closed":d="";b.isUndefined(c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)])||(d=c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)],c["tempShortcodeDeepLevel"+(parseInt(c.deepLevel)+1)]=e);h="["+q+h+"]"+d+"[/"+q+"]";break;case "template":h=c.template}c["tempShortcodeDeepLevel"+c.deepLevel]+=h;0===c.deepLevel&&(c.getShortcode+=h)}}else c.error="Not rows as the first elements!"}},checkCurrentData:function(a){tdcIFrameData._isInitialized&&b.each(tdcIFrameData.tdcRows.models,
function(c,b,e){tdcIFrameData._checkModelData(tdcIFrameData.tdcRows.get(c.cid),a)})},changeData:function(a){if(tdcIFrameData._isInitialized){tdcMain.setContentModified();var c=tdcOperationUI.getDraggedElement(),d=c.prevAll().length;if(a.wasSidebarElementDragged)if(a.wasElementDragged){var f=tdcIFrameData._getDestinationModel([".tdc-inner-column",".tdc-column"]);b.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);var q=tdcIFrameData._getDestinationCol();
f.has("childCollection")||f.set("childCollection",new tdcIFrameData.TdcCollection);var k=f.get("childCollection");var h={},m=c.data("start-values"),g;"undefined"!==typeof m&&(m=JSON.parse(window.atob(m)),"undefined"!==typeof m&&(b.isArray(m)&&m.length?(h=m[0],1<m.length&&(g=m)):h=m));m=c.data("shortcodeName");m=new tdcIFrameData.TdcModel({content:"",attrs:h,tag:m,type:"single",level:4,parentModel:f});new tdcIFrameData.TdcLiveView({model:m,el:c[0]});b.isUndefined(g)||m.set("presetValues",g);tdcElementUI.bindElement(c);
tdcRecycle.takeSnapshot(m.get("tag")+" : sidebar element added");c.data("model_id",m.cid);k.add(m,{at:d});m.set("parentModel",f);m.getShortcodeRender(q,a.draggedBlockUid,!0)}else a.wasTempInnerRowDragged?(tdcRecycle.takeSnapshot("Sidebar inner-row added"),f=tdcIFrameData._getDestinationModel([".tdc-column"]),b.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1),q=tdcIFrameData._getDestinationCol(),f.has("childCollection")||f.set("childCollection",
new tdcIFrameData.TdcCollection),k=f.get("childCollection"),m=c.data("templateContent"),b.isUndefined(m)?(m=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row_inner",type:"closed",level:2,parentModel:f}),new tdcIFrameData.TdcLiveView({model:m,el:c[0]}),h=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column_inner",type:"closed",level:3,parentModel:m}),c.data("model_id",m.cid),k.add(m,{at:d}),c=new tdcIFrameData.TdcCollection,c.add(h),m.set("childCollection",c),c=new tdcIFrameData.TdcCollection,
h.set("childCollection",c)):(m=new tdcIFrameData.TdcModel({templateContent:m,attrs:{},tag:"vc_row_inner",type:"template",level:2,parentModel:f}),new tdcIFrameData.TdcLiveView({model:m,el:c[0]}),c.data("model_id",m.cid),k.add(m,{at:d})),m.getShortcodeRender(q,a.draggedBlockUid,!0)):a.wasTempRowDragged&&(tdcRecycle.takeSnapshot("Sidebar row added"),m=c.data("templateContent"),b.isUndefined(m)?(k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:0,parentModel:e}),new tdcIFrameData.TdcLiveView({model:k,
el:c[0]}),q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:1,parentModel:k}),c.data("model_id",k.cid),tdcIFrameData.tdcRows.add(k,{at:d}),d=new tdcIFrameData.TdcCollection,d.add(q),k.set("childCollection",d),d=new tdcIFrameData.TdcCollection,q.set("childCollection",d),a.wasElementWithRowDragged&&(h={},f={},m=c.data("start-values"),g=c.data("row-start-values"),"undefined"!==typeof g&&(f=JSON.parse(window.atob(g))),k.set({attrs:f}),"undefined"!==typeof m&&(h=JSON.parse(window.atob(m)),
b.isArray(h)&&(h=h[0])),m=c.data("shortcodeName"),c=new tdcIFrameData.TdcModel({content:"",attrs:h,tag:m,type:"single",level:2,parentModel:q}),d.add(c),d=new tdcIFrameData.TdcCollection,c.set("childCollection",d))):(k=new tdcIFrameData.TdcModel({templateContent:m,attrs:{},tag:"vc_row",type:"template",level:0,parentModel:e}),new tdcIFrameData.TdcLiveView({model:k,el:c[0]}),c.data("model_id",k.cid),tdcIFrameData.tdcRows.add(k,{at:d}),d=new tdcIFrameData.TdcCollection,k.set("childCollection",d)),k.getShortcodeRender(1,
a.draggedBlockUid,!0));else{m=c.data("model_id");if(b.isUndefined(m)){new tdcNotice.notice("changeData Error: Element model id is not in $draggedElement data!",!0,!1);return}m=tdcIFrameData.getModel(m);if(b.isUndefined(m)){new tdcNotice.notice("changeData Error: Element model not in structure data!",!0,!1);return}if(a.wasElementDragged){tdcDebug.log("case 1");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("element recycled");tdcIFrameData.removeModel(m);return}tdcRecycle.takeSnapshot(m.get("tag")+
" : element moved");g=m.get("parentModel");f=tdcIFrameData._getDestinationModel([".tdc-inner-column",".tdc-column"]);b.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",!0,!1);g.cid===f.cid?(k=g.get("childCollection"),k.remove(m,{silent:!0}),k.add(m,{at:d})):(q=tdcIFrameData._getDestinationCol(),f.has("childCollection")||f.set("childCollection",new tdcIFrameData.TdcCollection),k=f.get("childCollection"),tdcIFrameData.removeModel(m,!1,{silent:!0}),k.add(m,
{at:d}),m.set("parentModel",f),a.sourceColParam!==q&&m.getShortcodeRender(q,a.draggedBlockUid,!0))}else if(a.wasInnerRowDragged){tdcDebug.log("case 2");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("inner row recycled");tdcRecycle.takeSnapshot("Inner row recycled");tdcIFrameData.removeModel(m);return}tdcRecycle.takeSnapshot("Inner row moved");g=m.get("parentModel");f=tdcIFrameData._getDestinationModel([".tdc-column"]);b.isUndefined(f)&&new tdcNotice.notice("changeData Error: Destination model not in structure data!",
!0,!1);if(g.cid===f.cid)k=g.get("childCollection"),k.remove(m,{silent:!0}),k.add(m,{at:d});else{f.has("childCollection")||f.set("childCollection",new tdcIFrameData.TdcCollection);k=f.get("childCollection");tdcIFrameData.removeModel(m,!0,{silent:!0});k.add(m,{at:d});m.set("parentModel",f);a=g.get("attrs");d=f.get("attrs");if(b.has(a,"width"))switch(a.width){case "1/3":q="13";break;case "2/3":q="23"}if(b.has(d,"width"))switch(d.width){case "1/3":h="13";break;case "2/3":h="23"}b.isUndefined(q)&&(q="11");
b.isUndefined(h)&&(h="11");if(q!==h&&(a=m.get("childCollection"),!b.isUndefined(a))){a=tdcIFrameData.getChildCollectionWidths(a);b.isUndefined(a)&&(a="11");d="11";k=1;switch(h){case "11":switch(a){case "11":d="11";break;case "23_13":d="23_13";break;case "13_23":d="13_23";break;case "12_12":d="13_13_13";break;case "13_13_13":d="13_13_13"}k=3;break;case "13":switch(a){case "11":d="11";break;case "23_13":d="11";break;case "13_23":d="11";break;case "12_12":d="11";break;case "13_13_13":d="11"}break;case "23":switch(a){case "11":d=
"12_12";break;case "23_13":d="12_12";break;case "13_23":d="12_12";break;case "12_12":d="12_12";break;case "13_13_13":d="12_12"}k=2}if(a!==d||q!==h)tdcIFrameData.changeInnerRowModel(m,a,d),m.getShortcodeRender(k,null,!0)}a=tdcOperationUI.inRow(c);d=tdcOperationUI.inColumn(c);c=tdcOperationUI.inInnerRow(c);b.isUndefined(a)||b.isUndefined(d)||b.isUndefined(c)||tdcSidebar.setSettings({$currentRow:a,$currentColumn:d,$currentInnerRow:c},!0)}}else if(a.wasInnerColumnDragged||a.wasColumnDragged)tdcDebug.log("case 3"),
a.wasColumnDragged?tdcRecycle.takeSnapshot("Column moved"):a.wasInnerColumnDragged&&tdcRecycle.takeSnapshot("Inner-column moved"),g=m.get("parentModel"),k=g.get("childCollection"),k.remove(m,{silent:!0}),k.add(m,{at:d}),a.wasColumnDragged?(a=tdcOperationUI.inRow(c),b.isUndefined(a)||tdcSidebar.setSettings({$currentRow:a})):a.wasInnerColumnDragged&&(a=tdcOperationUI.inRow(c),d=tdcOperationUI.inColumn(c),c=tdcOperationUI.inInnerRow(c),b.isUndefined(a)||b.isUndefined(d)||b.isUndefined(c)||tdcSidebar.setSettings({$currentRow:a,
$currentColumn:d,$currentInnerRow:c}));else if(a.wasRowDragged){tdcDebug.log("case 4");if(tdcOperationUI.getCurrentElementOver()===tdcAdminWrapperUI.$recycle){tdcDebug.log("row recycled");tdcRecycle.takeSnapshot("Row recycled");tdcIFrameData.removeModel(m);tdcDebug.log(tdcIFrameData.tdcRows);tdcIFrameData.tdcRows.length||(k=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_row",type:"closed",level:0,parentModel:e}),new tdcIFrameData.TdcLiveView({model:k,el:tdcIFrameData.iframeContents.find("#tdc-rows")[0]}),
q=new tdcIFrameData.TdcModel({content:"",attrs:{},tag:"vc_column",type:"closed",level:1,parentModel:k}),tdcIFrameData.tdcRows.add(k,{at:0}),d=new tdcIFrameData.TdcCollection,d.add(q),k.set("childCollection",d),d=new tdcIFrameData.TdcCollection,q.set("childCollection",d),k.getShortcodeRender(1,a.draggedBlockUid,!0));return}tdcRecycle.takeSnapshot("Row moved");tdcIFrameData.tdcRows.remove(m,{silent:!0});tdcIFrameData.tdcRows.add(m,{at:d});tdcDebug.log("newPosition: "+d);tdcDebug.log(c)}}tdcDebug.log(tdcIFrameData.tdcRows)}},
_parseModelWidthAttrs:function(a){a=a.get("attrs");var c=3;if(b.has(a,"width"))switch(a.width){case "1/3":c=1;break;case "2/3":c=2;break;case "1/2":c=1}return c},getColumnNumber:function(a){var c=3,e=parseInt(a.get("level"),10),d=a.get("parentModel");b.isUndefined(d)||(4===e?(a=tdcIFrameData._parseModelWidthAttrs(d),c=3===a?tdcIFrameData.getColumnNumber(d):a):(a=tdcIFrameData._parseModelWidthAttrs(a),c=3===a?tdcIFrameData.getColumnNumber(d):a));return c},_getDestinationModel:function(a){for(var c=
tdcOperationUI.getDraggedElement(),e,d=0;d<a.length&&(e=c.closest(a[d]),!e.length);d++);e.length||new tdcNotice.notice("_getDestinationModel Error: Container destination not available!",!0,!1);a=e.data("model_id");b.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model id of the container destination not in data!",!0,!1);a=tdcIFrameData.getModel(a);b.isUndefined(a)&&new tdcNotice.notice("_getDestinationModel Error: Model not in structure data!",!0,!1);return a},_getDestinationCol:function(){var a=
tdcOperationUI.getDraggedElement();var c=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");if(a.length&&(a=a.data("model_id"),b.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model id not in data!",!0,!1),a=tdcIFrameData.getModel(a),b.isUndefined(a)&&new tdcNotice.notice("_getDestinationCol Error: The inner column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(c.length)return c=c.data("model_id"),b.isUndefined(c)&&
new tdcNotice.notice("_getDestinationCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(c),b.isUndefined(c)&&new tdcNotice.notice("_getDestinationCol Error: Tne column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a);new tdcNotice.notice("_getDestinationCol Error: The destination container is not inside of .tdc-column !",!0,!1)},_getSourceCol:function(){var a=tdcOperationUI.getDraggedElement();var c=a.closest(".tdc-column");a=a.closest(".tdc-inner-column");
if(a.length&&(a=a.data("model_id"),b.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model id not in data!",!0,!1),a=tdcIFrameData.getModel(a),b.isUndefined(a)&&new tdcNotice.notice("_getSourceCol Error: The inner column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a),3!==a))return a;if(c.length)return c=c.data("model_id"),b.isUndefined(c)&&new tdcNotice.notice("_getSourceCol Error: The column model id not in data!",!0,!1),a=tdcIFrameData.getModel(c),
b.isUndefined(c)&&new tdcNotice.notice("_getSourceCol Error: Tne column model not in structure data!",!0,!1),a=tdcIFrameData._parseModelWidthAttrs(a)},getShortcodeFromData:function(a){a.getShortcode="";b.each(tdcIFrameData.tdcRows.models,function(c,b,e){tdcIFrameData._checkModelData(tdcIFrameData.tdcRows.get(c.cid),a)})},bindViewsModelsWrappers:function(a,c,e,d){if(b.isEmpty(a)){b.isUndefined(d)&&(d=0);if(b.isUndefined(c)){c=tdcIFrameData.tdcRows;e=tdcIFrameData.iframeContents.find("#tdc-rows .tdc-row");
if(c.models.length!==e.length){a[b.keys(a).length]={collection:c,jqDOMElements:e,info:"Error at rows: "+c.models.length+"(models) : "+e.length+"(dom)"};return}d++;b.each(e,function(b,e,f){e=c.models[e];f=g(b);f.data("model_id",e.cid);e.set("blockUid",f.attr("id"));e.set("html",b.innerHTML);new tdcIFrameData.TdcLiveView({model:e,el:b});e.has("childCollection")&&tdcIFrameData.bindViewsModelsWrappers(a,e.get("childCollection"),f,d)})}else{switch(d){case 1:var f=e.find(".tdc-columns:first").children(".tdc-column");
if(c.models.length!==f.length){a[b.keys(a).length]={collection:c,jqDOMElements:f,info:"Errors at columns: "+c.models.length+"(models) : "+f.length+"(dom)",level:d};return}break;case 2:f=e.find(".tdc-elements:first").children(".tdc-element, .tdc-element-inner-row");if(c.models.length!==f.length){a[b.keys(a).length]={collection:c,jqDOMElements:f,info:"Errors at columns elements: "+c.models.length+"(models) : "+f.length+"(dom)",level:d};return}break;case 3:f=e.find(".tdc-inner-columns:first").children(".tdc-inner-column");
if(c.models.length!==f.length){a[b.keys(a).length]={collection:c,jqDOMElements:f,info:"Errors at inner columns: "+c.models.length+"(models) : "+f.length+"(dom)",level:d};return}break;case 4:if(f=e.find(".tdc-elements:first").children(".tdc-element"),c.models.length!==f.length){a[b.keys(a).length]={collection:c,jqDOMElements:f,info:"Errors at elements: "+c.models.length+"(models) : "+f.length+"(dom)",level:d};return}}d++;b.each(f,function(e,f,l){f=c.models[f];l=g(e);l.data("model_id",f.cid);f.set("html",
e.innerHTML,{silent:!0});var k;if(4===f.get("level")){var h=l.find(".td_block_inner, .tdb-block-inner, .td-post-sharing");h.length&&(k=h.attr("id"))}else 2===f.get("level")&&(h=l.find(".tdc-inner-row"),h.length&&(k=h.attr("id")));f.set("blockUid",k);new tdcIFrameData.TdcLiveView({model:f,el:e});!l.hasClass("tdc-element")&&f.has("childCollection")&&0<b.size(f.get("childCollection"))&&tdcIFrameData.bindViewsModelsWrappers(a,f.get("childCollection"),l,d)})}d--}},changeRowModel:function(a,c,e){var d=
a.get("childCollection");if("11"===c&&("23_13"===e||"13_23"===e||"13_13_13"===e)){e=e.split("_");var l=e[0].charAt(0)+"/"+e[0].charAt(1),k=d.at(0),h=k.get("attrs");b.isUndefined(h)?k.set("attrs",{width:l}):(h=b.clone(h),h.width=l,k.set("attrs",h));d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:e[1].charAt(0)+"/"+e[1].charAt(1)},type:"closed",level:1,parentModel:a}));3===e.length&&d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:e[2].charAt(0)+"/"+
e[2].charAt(1)},type:"closed",level:1,parentModel:a}));tdcIFrameData.changeColumnModel(k,c,e[0])}else if(("23_13"===c||"13_23"===c||"13_13_13"===c)&&"11"===e){c=c.split("_");k=d.at(0);h=k.get("attrs");var m=k.get("childCollection"),g=d.at(1),p=g.get("childCollection");b.isUndefined(h)||(h=b.clone(h),delete h.width,k.set("attrs",h));b.isUndefined(m)&&(m=new tdcIFrameData.TdcCollection,k.set("childCollection",m));!b.isUndefined(p)&&p.length&&b.each(p.models,function(a,c,b){a.set("parentModel",k);m.add(a)});
3===c.length&&(a=d.at(2),d=a.get("childCollection"),!b.isUndefined(d)&&d.length&&b.each(d.models,function(a,c,b){a.set("parentModel",k);m.add(a)}),tdcIFrameData.removeModel(a));tdcIFrameData.removeModel(g);tdcIFrameData.changeColumnModel(k,c[0],e)}else if(!("23_13"!==c&&"13_23"!==c&&"13_13_13"!==c||"23_13"!==e&&"13_23"!==e&&"13_13_13"!==e)){c=c.split("_");e=e.split("_");l=e[0].charAt(0)+"/"+e[0].charAt(1);var t=e[1].charAt(0)+"/"+e[1].charAt(1);k=d.at(0);h=k.get("attrs");g=d.at(1);var v=g.get("attrs");
p=g.get("childCollection");3===e.length?d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column",attrs:{width:e[2].charAt(0)+"/"+e[2].charAt(1)},type:"closed",level:1,parentModel:a})):3===c.length&&(a=d.at(2),d=a.get("childCollection"),!b.isUndefined(d)&&d.length&&(b.isUndefined(p)&&(p=new tdcIFrameData.TdcCollection,g.set("childCollection",p)),b.each(d.models,function(a,c,b){a.set("parentModel",g);p.add(a)})),tdcIFrameData.removeModel(a));h=b.clone(h);h.width=l;k.set("attrs",h);c[0]!==e[0]&&
tdcIFrameData.changeColumnModel(k,c[0],e[0]);l=b.clone(v);l.width=t;g.set("attrs",l);c[1]!==e[1]&&tdcIFrameData.changeColumnModel(g,c[1],e[1])}tdcDebug.log(tdcIFrameData.tdcRows.models)},changeFluidStructureModel:function(a,c,e){var d=a.get("childCollection"),l=a.get("tag"),k="vc_column";c=c.split("_");var h=e.split("_");if("vc_row"===l||"vc_row_inner"===l){"vc_row_inner"===l&&(k="vc_column_inner");if(h.length>c.length)for(l=0;l<h.length;l++){e="";for(var m=0;m<h[l].length;m++)e+=h[l].charAt(m)+"/";
""!==e&&(e=e.substring(0,e.length-1));if(l<c.length){var g=d.at(l);m=g.get("attrs");var p=b.clone(m);p.width=e;g.set("attrs",p)}else d.add(new tdcIFrameData.TdcModel({content:"",tag:k,attrs:{width:e},type:"closed",level:1,parentModel:a}))}else for(l=0;l<c.length;l++)if(l<h.length){g=d.at(l);m=g.get("attrs");p=b.clone(m);e="";for(m=0;m<h[l].length;m++)e+=h[l].charAt(m)+"/";""!==e&&(e=e.substring(0,e.length-1));p.width=e;g.set("attrs",p);var t=g}else{g=d.at(h.length);a=g.get("childCollection");var v=
t.get("childCollection");b.isUndefined(v)&&(v=new tdcIFrameData.TdcCollection,t.set("childCollection",v));b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",t);v.add(a)});tdcIFrameData.removeModel(g)}tdcDebug.log(tdcIFrameData.tdcRows.models)}},changeColumnModel:function(a,c,e){if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(e))){var d=a.get("childCollection");if(!b.isUndefined(d)&&d.length){var l=a.get("attrs");!b.isUndefined(l)&&b.has(l,"width");b.each(d.models,function(d,
f,l){if("vc_row_inner"===d.get("tag")&&(d=d.get("childCollection"),!b.isUndefined(d)&&d.length)){var k="";b.each(d.models,function(a,c,e){a=a.get("attrs");!b.isUndefined(a)&&b.isObject(a)&&b.has(a,"width")&&(k=c===e.length-1?k+a.width:k+(a.width+"_"))});k=k.replace(/\//g,"");"12_12"!==k&&"23_13"!==k&&"13_23"!==k&&"13_13_13"!==k&&(k="");if("11"===c)if("23"===e)if("23_13"===k){var h=d.at(0),q=d.at(1);l=h.get("attrs");f=q.get("attrs");l=b.clone(l);f=b.clone(f);l.width="1/2";f.width="1/2";h.set("attrs",
l);q.set("attrs",f)}else if("13_23"===k)h=d.at(0),q=d.at(1),l=h.get("attrs"),f=q.get("attrs"),l=b.clone(l),f=b.clone(f),l.width="1/2",f.width="1/2",h.set("attrs",l),q.set("attrs",f);else if("13_13_13"===k){h=d.at(0);q=d.at(1);d=d.at(2);l=h.get("attrs");f=q.get("attrs");var m=d.get("attrs");l=b.clone(l);f=b.clone(f);b.clone(m);l.width="1/2";f.width="1/2";h.set("attrs",l);q.set("attrs",f);f=d.get("childCollection");if(!b.isUndefined(f)&&f.length){var g=q.get("childCollection");b.isUndefined(g)&&(g=
new tdcIFrameData.TdcCollection,q.set("childCollection",g));b.each(f.models,function(a,c,b){g.add(a);a.set("parentModel",q)})}tdcIFrameData.removeModel(d)}else{if(d.models.length){h=d.at(0);l=h.get("attrs");l=b.clone(l);var r=h.get("childCollection");delete l.width;h.set("attrs",l);b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,h.set("childCollection",r));var w=0;for(b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",
h);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}}else{if("13"===e&&d.models.length)for(h=d.at(0),l=h.get("attrs"),l=b.clone(l),r=h.get("childCollection"),delete l.width,h.set("attrs",l),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,h.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",h);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else if("23"===
c)if("11"===e)if("12_12"===k)h=d.at(0),q=d.at(1),l=h.get("attrs"),f=q.get("attrs"),l=b.clone(l),f=b.clone(f),l.width="1/3",f.width="1/3",h.set("attrs",l),q.set("attrs",f),f=new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:3,parentModel:a}),d.add(f);else{if(d.models.length)for(h=d.at(0),l=h.get("attrs"),l=b.clone(l),r=h.get("childCollection"),delete l.width,h.set("attrs",l),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,h.set("childCollection",
r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a){a.set("parentModel",h);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else{if("13"===e&&d.models.length)for(h=d.at(0),l=h.get("attrs"),l=b.clone(l),r=h.get("childCollection"),delete l.width,h.set("attrs",l),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,h.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||
b.each(a.models,function(a,c,b){a.set("parentModel",h);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else if("13"===c)if("11"===e)if(""===k||"12_12"!==k&&"23_13"!==k&&"13_23"!==k&&"13_13_13"!==k){if(d.models.length)for(h=d.at(0),l=h.get("attrs"),l=b.clone(l),r=h.get("childCollection"),delete l.width,h.set("attrs",l),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,h.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||
b.each(a.models,function(a,c,b){a.set("parentModel",h);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}else"12_12"===k&&d.models.length&&(h=d.at(0),q=d.at(1),l=h.get("attrs"),f=q.get("attrs"),l.width="1/3",f.width="1/3",h.set("attrs",l),q.set("attrs",f),d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:"1/3"},type:"closed",level:1,parentModel:a})));else if("23"===e&&(""===k||"12_12"!==k)&&d.models.length)for(h=d.at(0),l=h.get("attrs"),l=b.clone(l),r=h.get("childCollection"),
delete l.width,h.set("attrs",l),b.isUndefined(r)&&(r=new tdcIFrameData.TdcCollection,h.set("childCollection",r)),w=0,b.each(d.models,function(a,c,e){0!==c&&(w=c,a=a.get("childCollection"),b.isUndefined(a)||b.each(a.models,function(a,c,b){a.set("parentModel",h);r.add(a)}))});0<w;)tdcIFrameData.removeModel(d.at(w)),w--}})}}},changeInnerRowModel:function(a,c,e){if(!(b.isUndefined(a)||b.isUndefined(c)||b.isUndefined(e))){var d=a.get("childCollection");if("11"!==c||"12_12"!==e&&"23_13"!==e&&"13_23"!==
e&&"13_13_13"!==e)if("12_12"!==c&&"23_13"!==c&&"13_23"!==c||"11"!==e&&"12_12"!==e&&"23_13"!==e&&"13_23"!==e&&"13_13_13"!==e)"13_13_13"!==c||"11"!==e&&"12_12"!==e&&"23_13"!==e&&"13_23"!==e?tdcIFrameData.changeFluidStructureModel(a,c,e):("11"===e?(p=d.at(0),t=p.get("attrs"),l=p.get("childCollection"),h=d.at(1),k=h.get("childCollection"),a=d.at(2),d=a.get("childCollection"),b.isUndefined(t)||(t=b.clone(t),delete t.width,p.set("attrs",t)),b.isUndefined(l)&&(l=new tdcIFrameData.TdcCollection,p.set("childCollection",
l)),!b.isUndefined(k)&&k.length&&b.each(k.models,function(a,c,b){a.set("parentModel",p);l.add(a)}),!b.isUndefined(d)&&d.length&&b.each(d.models,function(a,c,b){a.set("parentModel",p);l.add(a)}),tdcIFrameData.removeModel(h)):(g=e.split("_"),n=g[0].charAt(0)+"/"+g[0].charAt(1),c=g[1].charAt(0)+"/"+g[1].charAt(1),p=d.at(0),t=p.get("attrs"),h=d.at(1),e=h.get("attrs"),k=h.get("childCollection"),a=d.at(2),d=a.get("childCollection"),t=b.clone(t),t.width=n,p.set("attrs",t),e=b.clone(e),e.width=c,h.set("attrs",
e),b.isUndefined(k)&&(k=new tdcIFrameData.TdcCollection,h.set("childCollection",k)),!b.isUndefined(d)&&d.length&&b.each(d.models,function(a,c,b){a.set("parentModel",h);k.add(a)})),tdcIFrameData.removeModel(a));else if("11"===e){p=d.at(0);t=p.get("attrs");var l=p.get("childCollection");h=d.at(1);var k=h.get("childCollection");b.isUndefined(t)||(t=b.clone(t),delete t.width,p.set("attrs",t));b.isUndefined(l)&&(l=new tdcIFrameData.TdcCollection,p.set("childCollection",l));!b.isUndefined(k)&&k.length&&
b.each(k.models,function(a,c,b){a.set("parentModel",p);l.add(a)});tdcIFrameData.removeModel(h)}else g=e.split("_"),n=g[0].charAt(0)+"/"+g[0].charAt(1),c=g[1].charAt(0)+"/"+g[1].charAt(1),p=d.at(0),t=p.get("attrs"),h=d.at(1),e=h.get("attrs"),t=b.clone(t),t.width=n,p.set("attrs",t),e=b.clone(e),e.width=c,h.set("attrs",e),3===g.length&&d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:g[2].charAt(0)+"/"+g[2].charAt(1)},type:"closed",level:3,parentModel:a}));else{var h=new tdcIFrameData.TdcModel({content:"",
tag:"vc_column_inner",type:"closed",level:3,parentModel:a}),g=e.split("_"),n=g[0].charAt(0)+"/"+g[0].charAt(1);c=g[1].charAt(0)+"/"+g[1].charAt(1);var p=d.at(0),t=p.get("attrs");b.isUndefined(t)?p.set("attrs",{width:n}):(t=b.clone(t),t.width=n,p.set("attrs",t));h.set("attrs",{width:c});d.add(h);3===g.length&&d.add(new tdcIFrameData.TdcModel({content:"",tag:"vc_column_inner",attrs:{width:g[2].charAt(0)+"/"+g[2].charAt(1)},type:"closed",level:3,parentModel:a}))}}},getChildCollectionWidths:function(a){if(!b.isUndefined(a)){var c;
b.map(a.models,function(a,e){var d=a.get("attrs");b.has(d,"width")&&(c=b.isUndefined(c)?d.width.replace("/",""):c+("_"+d.width.replace("/","")))});return c}}}})(jQuery,Backbone,_);var tdcAdminIFrameUI;
(function(g,d,b,e){tdcAdminIFrameUI={_liveIframeWindowObject:e,_$liveIframe:e,getIframeWindow:function(){b.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(a){tdcAdminIFrameUI.getIframeWindow().eval(a)},
initContent:function(a){a.find(".td-main-content-wrap .tdc-row").length||(a.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent+="[vc_row][vc_column][/vc_column][/vc_row]")},init:function(){window.addWrappers=function(a){a=a.find(".td-main-content-wrap");a.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(a,
c){g(c).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});a.find(".tdc-column").each(function(a,c){var b=g(c);b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');b=b.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=g(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(b=g(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){var b=g(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){var b=g(c).find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=g(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});
a.find(".tdc-elements:empty").each(function(a,c){var b="",e=g(c);e.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":e.closest(".tdc-column").length&&(b=" tdc-element-column");b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);e.append(b)})};window.addRowWrappers=function(a){a.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');a.find(".tdc-column").each(function(a,
c){var b=g(c);b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');b=b.find(".td_block_wrap");window.checkTdBlockWrap(b);b.addClass("tdc-element")});a.find(".tdc-inner-row").each(function(a,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=g(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=g(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});
a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){var b=g(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){var b=g(c).find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=g(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,c){var b="",e=g(c);e.closest(".tdc-inner-column").length?
b=" tdc-element-inner-column":e.closest(".tdc-column").length&&(b=" tdc-element-column");b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);e.append(b)})};window.addColumnWrappers=function(a){a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");a.find(".tdc-inner-row").each(function(a,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,
c){var b=g(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=g(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){var b=g(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});c=a.find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,c){var b="",e=g(c);e.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":e.closest(".tdc-column").length&&(b=" tdc-element-column");b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);e.append(b)})};window.addInnerRowWrappers=function(a){var c=a.find(".td_block_wrap");
window.checkTdBlockWrap(c);c.addClass("tdc-element");a.find(".tdc-inner-row").each(function(a,c){g(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=g(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=g(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-elements:empty").each(function(a,c){var b="",e=g(c);e.closest(".tdc-inner-column").length?
b=" tdc-element-inner-column":e.closest(".tdc-column").length&&(b=" tdc-element-column");b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);e.append(b)})};window.addInnerColumnWrappers=function(a){var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.addClass("tdc-element");c=a.find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,c){var b="",e=g(c);e.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":e.closest(".tdc-column").length&&(b=" tdc-element-column");b=g('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be removed by composer"></div>');tdcElementUI.bindEmptyElement(b);e.append(b)})};window.addLoopWrappers=function(a){a.find(".td-main-content").wrap('<div class="tdc-loop-content"></div>')};
window.addSidebarWrappers=function(a){a.find(".td-main-sidebar").wrap('<div class="tdc-sidebar-content"></div>')};window.checkTdBlockWrap=function(a){a.each(function(a,c){var b=g(c);0===parseInt(b.height())&&b.addClass("tdc-block-empty")})};var a=window.tdcPostSettings.postMetaVcJsStatus,c=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==a||""===c||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},
loadIframe:function(){(tdDetect.isIe8||tdDetect.isIe9||tdDetect.isIe10)&&tdConfirm.showModalOk("Browser Information","TagDiv Composer does not work with Internet Explorer 8, 9, 10",function(){tb_remove()});var a=g(this).contents();tdcAdminIFrameUI.initContent(a);tdcAdminIFrameUI._liveIframeWindowObject=g(this).get(0).contentWindow;var c=g('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');a.find("body").prepend(c);tdcAdminWrapperUI.$recycle=c;tdcIFrameData._postOriginalContentJSON=
e;window.addWrappers(a);tdcIFrameData.init(a,!0);tdcOperationUI.init(a,!0);a.on("click","a",function(a){a.preventDefault();"undefined"!==this.href&&window.open(this.href,"_blank")});a[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);a[0].addEventListener("mousemove",function(c){a.lastMouseEvent=c},!0)},checkIframe:function(a){if(b.isUndefined(a)){a=window.tdcPostSettings.postUrl;var c="";!1!==window.tdcPostSettings.tdbLoadDataFromId&&!1!==window.tdcPostSettings.tdbTemplateType?
c="&tdbLoadDataFromId="+window.tdcPostSettings.tdbLoadDataFromId+"&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType:!1!==window.tdcPostSettings.tdbTemplateType&&(c="&tdbTemplateType="+window.tdcPostSettings.tdbTemplateType);a=0>a.indexOf("?")?a+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c):a+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId+c);a=g('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+a+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe);
g("#tdc-live-iframe-wrapper").append(a)}else{var d=a;c=d.contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=d.get(0).contentWindow;d=g('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');c.find("body").prepend(d);tdcAdminWrapperUI.$recycle=d;tdcIFrameData._postOriginalContentJSON=e;window.addWrappers(c);tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.find("a").each(function(a,c){c.setAttribute("target","_blank")});a.removeClass("tdc-live-iframe");
a.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=a}}})(jQuery,Backbone,_);var tdcMain={};
(function(){tdcMain={_contentModified:!1,_sidebarInline:!1,_sidebarHidden:!1,_recycleShown:!1,init:function(){tdcAdminIFrameUI.init()},getContentModified:function(){return tdcMain._contentModified},setContentModified:function(){tdcMain._contentModified=!0},resetContentModified:function(){tdcMain._contentModified=!1},setSidebarInline:function(){tdcMain._sidebarInline=!0},getSidebarInline:function(){return tdcMain._sidebarInline},resetSidebarInline:function(){tdcMain._sidebarInline=!1},setSidebarHidden:function(){tdcMain._sidebarHidden=
!0},getSidebarHidden:function(){return tdcMain._sidebarHidden},resetSidebarHidden:function(){tdcMain._sidebarHidden=!1},setRecycleShown:function(){tdcMain._recycleShown=(tdcOperationUI.isRowDragged()||tdcOperationUI.isInnerRowDragged()||tdcOperationUI.isElementDragged())&&!tdcOperationUI.isSidebarElementDragged()},getRecycleShown:function(){return tdcMain._recycleShown},resetRecycleShown:function(){tdcMain._recycleShown=!1}};tdcMain.init()})();var tdcSidebarPanel={};
(function(g){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:g,_hook:{_hooks:[],addAction:function(d,b){_.isUndefined(tdcSidebarPanel._hook._hooks[d])&&(tdcSidebarPanel._hook._hooks[d]=[]);tdcSidebarPanel._hook._hooks[d].push(b)},doAction:function(d,b){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[d]))for(var e=0;e<tdcSidebarPanel._hook._hooks[d].length;e++)tdcSidebarPanel._hook._hooks[d][e](b)},removeAction:function(d){_.isUndefined(tdcSidebarPanel._hook._hooks[d])||delete tdcSidebarPanel._hook._hooks[d]},
hasCallback:function(d,b){return _.isUndefined(tdcSidebarPanel._hook._hooks[d])?!1:0<=tdcSidebarPanel._hook._hooks[d].indexOf(b)}},init:function(){var d=jQuery("body");d.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{var e=jQuery(this);b=e.val();var a=tdcIFrameData.getModel(e.data("model_id"));e=e.data("param_name");tdcSidebarController.onUpdate(a,
e,this.oldValue,b);this.oldValue=b;"block_template_id"!==e&&0!==e.indexOf("tds_")||setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});d.on("change focus",".tdc-tab-no-design .tdc-property-dropdown-responsive select",function(b){if("focusin"===b.type||"focus"===
b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),c=b.data("param_name"),d=b.attr("name"),f=b.closest(".tdc-property-responsive");e="all"===tdcSidebar.currentViewportSettings.name&&e===b.find("option:first").val()?tdcSidebarPanel.deleteResponsiveValue(d,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateDropdownResponsiveValues(d,e,tdcSidebar.currentViewportSettings.name);f.removeClass("tdc-css-inherited");f.find(".tdc-inherit-select").hide();
"all"!==tdcSidebar.currentViewportSettings.name&&(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),f=b.closest(".tdc-property-responsive"),"undefined"===typeof d?(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof d&&(b.val(""),f.addClass("tdc-css-inherited"),f.find(".tdc-inherit-select").show())):(b.val(d),f.removeClass("tdc-css-inherited"),f.find(".tdc-inherit-select").show()),f.find(".tdc-inherit-select").show());
tdcSidebarController.onUpdate(a,c,this.oldValue,e)}});d.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{var e=jQuery(this).val(),a=tdcIFrameData.getModel(jQuery(this).data("model_id"));"cut"===b.type&&(e="");tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,_.escape(e));this.oldValue=e}});d.on("keyup focus paste cut",".tdc-tab-no-design .tdc-property-textfield-responsive input",
function(b){if("focusin"===b.type)this.oldValue=this.value;else{var e=jQuery(this),a=e.val(),c=tdcIFrameData.getModel(e.data("model_id"));"cut"===b.type&&(a="");if(this.oldValue!==a){var d=e.attr("name");b=e.closest(".tdc-property-responsive");d=tdcSidebarPanel.updateTextfieldResponsiveValues(d,a,tdcSidebar.currentViewportSettings.name);var f="";_.isUndefined(e.data("placeholder"))||(f=e.data("placeholder"));e.attr("placeholder",f);b.removeClass("tdc-css-inherited");""===a&&"all"!==tdcSidebar.currentViewportSettings.name&&
(a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),tdcSidebar.currentViewportSettings.name),"undefined"===typeof a?(a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all"),"undefined"!==typeof a&&(e.val(""),e.attr("placeholder",a),b.addClass("tdc-css-inherited"),b.find(".tdc-inherit-select").show())):(e.val(a),b.removeClass("tdc-css-inherited"),b.find(".tdc-inherit-select").show()),b.find(".tdc-inherit-select").show());a=d;tdcSidebarController.onUpdate(c,jQuery(this).data("param_name"),
this.oldValue,_.escape(a));"all"===tdcSidebar.currentViewportSettings.name&&(this.oldValue=e.val())}}});d.on("keyup focus change input",".tdc-tab-no-design .tdc-property-range input",function(b){var e=jQuery(this),a=this;if("range"===e.attr("type"))e.next('input[type="text"]').val(e.val());else if("text"===e.attr("type")){a=e.val().trim();var c=e.data("default_value");""!==a||_.isUndefined(c)||""===c||(a=c,e.val(a));e.prev('input[type="range"]').val(a);e=e.prev('input[type="range"]');a=e.get(0)}e=
a;"focusin"===b.type?e.oldValue=e.value:(a=jQuery(e).val(),c=tdcIFrameData.getModel(jQuery(e).data("model_id")),"cut"===b.type&&(a=""),tdcSidebarController.onUpdate(c,jQuery(e).data("param_name"),e.oldValue,_.escape(a)),e.oldValue=a)});d.on("keyup change input",".tdc-tab-no-design .tdc-property-range-responsive input",function(b){b=jQuery(this);var e=this,a=b.closest(".tdc-property-responsive");a.removeClass("tdc-css-inherited");if("range"===b.attr("type")){var c=b.val();b.next('input[type="text"]').val(c);
b.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(b.attr("name"),c,tdcSidebar.currentViewportSettings.name))}else if("text"===b.attr("type")){c=b.val().trim();e=b.prev('input[type="range"]');var d=b.data("default_value");if("all"===tdcSidebar.currentViewportSettings.name)""!==c||_.isUndefined(d)||""===d||(c=d,b.val(c));else if(""===c){var f=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all");"undefined"===typeof f?_.isUndefined(d)||""===d||(c=d,b.val(c)):(b.val(""),
b.attr("placeholder",f))}e.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(e.attr("name"),c,tdcSidebar.currentViewportSettings.name));"undefined"===typeof f?e.val(c):(e.val(f),a.addClass("tdc-css-inherited"));e=b.prev('input[type="range"]').get(0)}f=e;a=jQuery(f);b=a.data("data-to-save");a=tdcIFrameData.getModel(a.data("model_id"));f.oldValue!==b&&(tdcSidebarController.onUpdate(a,jQuery(f).data("param_name"),f.oldValue,_.escape(b)),f.oldValue=b)});d.on("keyup focus change input",
".tdc-tab-no-design .tdc-property-range_multiple input",function(b){var e=jQuery(this),a=this;if("range"===e.attr("type")){var c=e.closest(".tdc-property").find('input[type="radio"]:checked');e.closest(".tdc-property").find('input[type="text"]').val(e.val());c.data("last_value",e.val())}else if("text"===e.attr("type")){a=e.closest(".tdc-property").find('input[type="range"]');c=e.closest(".tdc-property").find('input[type="radio"]:checked');var d=c.data("default_value"),f=e.val().trim();""!==f||_.isUndefined(d)||
""===d||(f=d,e.val(f));a.val(f);c.data("last_value",f);a=a.get(0)}else if("radio"===e.attr("type")){a=e.closest(".tdc-property").find('input[type="range"]');c=e.closest(".tdc-property").find('input[type="text"]');e.closest(".tdc-property").find('input[type="radio"]:checked');f=e.data("last_value");d=e.data("default_value");var q=e.data("unit");e=a.data("min_"+q);var k=a.data("max_"+q);q=a.data("step_"+q);a.get(0).min=e;a.get(0).max=k;a.get(0).step=q;""===f?(c.val(d),a.val(d)):(c.val(f),a.val(f));
a=a.get(0)}d="";c=jQuery(a).parent().find('input[type="radio"]:checked');c.length&&(d=jQuery(c[0]).data("unit_value"));"focusin"===b.type?a.oldValue=a.value+d:(b=a.value+d,d=tdcIFrameData.getModel(jQuery(a).data("model_id")),tdcSidebarController.onUpdate(d,jQuery(a).data("param_name"),a.oldValue,_.escape(b)),a.oldValue=b)});d.on("keyup change input",".tdc-tab-no-design .tdc-property-range_multiple-responsive input",function(b){var e=jQuery(this),a=e.closest(".tdc-property-responsive"),c=a.find('input[type="range"]'),
d=a.find('input[type="radio"]:checked'),f=a.find('input[type="text"]'),q=c.get(0),k="",h=d.data("default_value"),g=tdcIFrameData.getModel(c.data("model_id")),n=c.data("param_name"),p=window.tdcAdminSettings.mappedShortcodes[g.attributes.tag],t=g="";var v=[];for(var u=0;u<p.params.length;u++)if(n===p.params[u].param_name){u=p.params[u].tdc_values;for(var r in u)u.hasOwnProperty(r)&&(v.push(u[r].unit),""===g||""===t)&&(g=u[r].value,t=u[r].unit);break}d.length&&(k=d.data("unit_value"));if("range"===
e.attr("type"))v=c.val(),f.val(v),d.data("last_value",v),f.val(v),c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+k,tdcSidebar.currentViewportSettings.name)),a.removeClass("tdc-css-inherited");else if("text"===e.attr("type")){if("input"===b.type||"change"===b.type)return;a.removeClass("tdc-css-inherited");v=f.val().trim();if("all"===tdcSidebar.currentViewportSettings.name)""!==v||_.isUndefined(h)||""===h?(c.val(v),d.data("last_value",v),c.data("data-to-save",
tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+k,tdcSidebar.currentViewportSettings.name))):(c.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+n,tdcSidebar.currentViewportSettings.name)),c.data("range_value",g),c.data("range_unit",t),c.val(g),k=a.find('input[type="radio"][data-unit_value="'+t+'"]'),p=k.data("unit"),r=c.data("min_"+p),d=c.data("max_"+p),p=c.data("step_"+p),k.prop("checked",!0),q.min=r,q.max=d,q.step=p,q.value=g,k.data("last_value",g),f.val(g));
else if(""===v)if(k=tdcSidebarPanel.getCurrentResponsiveValue(c.attr("name"),"all"),"undefined"===typeof k)c.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+n,tdcSidebar.currentViewportSettings.name)),c.data("range_value",g),c.data("range_unit",t),c.val(g),k=a.find('input[type="radio"][data-unit_value="'+t+'"]'),p=k.data("unit"),r=c.data("min_"+p),d=c.data("max_"+p),p=c.data("step_"+p),k.prop("checked",!0),q.min=r,q.max=d,q.step=p,q.value=g,k.data("last_value",g),f.val(g),a.addClass("tdc-css-inherited");
else for(u=0;u<p.params.length;u++){if(n===p.params[u].param_name){v=[];f=[];u=p.params[u].tdc_values;for(r in u)u.hasOwnProperty(r)&&v.push(u[r].unit);for(u=0;u<v.length&&!(f=k.split(v[u]),1<f.length);u++);f.length&&(g=f[0],t=v[u],c.data("range_value",g),c.data("range_unit",t),k=a.find('input[type="radio"][data-unit_value="'+t+'"]'),p=k.data("unit"),r=c.data("min_"+p),d=c.data("max_"+p),p=c.data("step_"+p),k.prop("checked",!0),q.min=r,q.max=d,q.step=p,q.value=g,k.data("last_value",g),a.find('input[type="text"]').val(g));
c.data("data-to-save",tdcSidebarPanel.deleteResponsiveValue("tdc-param-"+n,tdcSidebar.currentViewportSettings.name));a.addClass("tdc-css-inherited");break}}else c.val(v),d.data("last_value",v),c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+k,tdcSidebar.currentViewportSettings.name))}else if("radio"===e.attr("type")){if("input"===b.type)return;n=d.data("last_value");p=d.data("unit");r=c.data("min_"+p);d=c.data("max_"+p);p=c.data("step_"+p);q.min=r;q.max=d;q.step=
p;""===n?(f.val(h),c.val(h),v=h):(f.val(n),c.val(n),v=n);c.data("data-to-save",tdcSidebarPanel.updateTextfieldResponsiveValues(c.attr("name"),v+k,tdcSidebar.currentViewportSettings.name));a.removeClass("tdc-css-inherited")}k="";a=jQuery(q).parent().find('input[type="radio"]:checked');a.length&&(k=jQuery(a[0]).data("unit_value"));"focusin"===b.type?q.oldValue=q.value+k:(a=jQuery(q),b=a.data("data-to-save"),g=tdcIFrameData.getModel(a.data("model_id")),q.oldValue!==b&&(tdcSidebarController.onUpdate(g,
jQuery(q).data("param_name"),q.oldValue,_.escape(b)),q.oldValue=b))});d.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val();b.is(":checked")||(e="");var a=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(a,b.data("param_name"),this.oldValue,e);this.oldValue=e}});d.on("focus change",".tdc-tab-no-design .tdc-property-checkbox-responsive input",function(b){if("focusin"===
b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id")),c=b.data("param_name");b.is(":checked")||(e="");var d=b.attr("name"),f=b.closest(".tdc-property-responsive");e="all"===tdcSidebar.currentViewportSettings.name&&""===e?tdcSidebarPanel.deleteResponsiveValue(d,tdcSidebar.currentViewportSettings.name):tdcSidebarPanel.updateCheckboxResponsiveValues(d,e,tdcSidebar.currentViewportSettings.name);f.removeClass("tdc-css-inherited");f.find(".tdc-inherit-checkbox").hide();
"all"!==tdcSidebar.currentViewportSettings.name&&(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),tdcSidebar.currentViewportSettings.name),f=b.closest(".tdc-property-responsive"),"undefined"===typeof d?(d=tdcSidebarPanel.getCurrentResponsiveValue(b.attr("name"),"all"),"undefined"!==typeof d&&(f.addClass("tdc-css-inherited"),f.find(".tdc-inherit-checkbox").show())):(f.removeClass("tdc-css-inherited"),f.find(".tdc-inherit-checkbox").show()),f.find(".tdc-inherit-checkbox").show());tdcSidebarController.onUpdate(a,
c,this.oldValue,e);this.oldValue=e}});d.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);d.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);d.on("click",".tdc-tab-no-design .tdc-icon-wrap",tdcSidebarPanel.tdcIconWrapHandler);d.on("click",".tdc-tab-no-design .tdc-icon-remove",tdcSidebarPanel.tdcIconRemoveHandler);d.on("click",".tdc-tab-no-design .tdc-inherit-select",tdcSidebarPanel.tdcInheritSelectHandler);d.on("click",".tdc-tab-no-design .tdc-inherit-checkbox",
tdcSidebarPanel.tdcInheritCheckboxHandler);d.on("click",".tdc-icon-selector-content > span",function(b){b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());b.find(".selected").removeClass("selected");var e=jQuery(this),a=e.data("font_class"),c=tdcIFrameData.getModel(b.data("model_id"));e.addClass("selected");var d=b.prev(".tdc-property-wrap");d.find(".tdc-icon-wrap").html(e.html());d.find(".tdc-icon-remove").removeClass("tdc-hidden-button");tdcSidebarController.onUpdate(c,
b.data("param_name"),"",a)});d.on("change","#tdc-icon-selector .tdc-icon-selector-lib",function(){var b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var e=jQuery(this).val(),a=b.find(".tdc-icon-selector-filter");b.find(".tdc-icon-selector-content").children(".tdc-font-separator").each(function(){var c=jQuery(this),b=c.data("font_id");""===e||e===b?(c.show(),c.nextAll("span").each(function(){var c=jQuery(this),b=c.data("font_class"),e=a.val().trim();""!==e&&-1===b.indexOf(e)?
c.hide():c.show()})):(c.hide(),c.nextAll("span").hide())})});d.on("click",".tdc-tab-no-design .tdc-gradient-wrap",function(b){b=jQuery("#tdc-gradient");b.length||(b=tdcSidebar.buildGradient());var e=jQuery(this),a=e.closest(".tdc-property-wrap");e=e.next("input").val();b.toggle();a.after(b);a.next().find(".wp-picker-container").find("input.wp-color-picker").tdGradientColorPicker("open_gradient",e)});d.on("click",".tdc-colorpicker-wrap",function(b){b=jQuery("#tdc-palette");b.length||(b=tdcSidebar.buildPalette());
var e=jQuery(this),a=e.closest(".tdc-property-wrap");e=e.next("input").val();b.toggle();a.after(b);a.next().find(".wp-picker-container").find("input.wp-color-picker").tdPaletteColorPicker("open_palette",e)});d.on("mousedown",function(b){var e=jQuery("#tdc-sidebar"),a=jQuery("#tdc-icon-selector"),c=jQuery("#tdc-gradient"),d=jQuery("#tdc-palette"),f=jQuery("#tdc-font-list"),g=jQuery(".tdc-preset-values-list");a.length?a.get(0).contains(b.target)||(a.hide(),e.after(a)):tdcSidebar.buildIconSelector();
c.length?c.get(0).contains(b.target)||(c.hide(),e.after(c)):tdcSidebar.buildGradient();d.length?d.get(0).contains(b.target)||(d.hide(),e.after(d)):tdcSidebar.buildPalette();f.length&&!f.get(0).contains(b.target)&&(f.hide(),e.after(f));g.length&&!g.get(0).contains(b.target)&&g.hide()});d.on("keyup focus paste cut change","input.tdc-icon-selector-filter",function(b){b=jQuery("#tdc-icon-selector");b.length||(b=tdcSidebar.buildIconSelector());var e=this.value.trim();b.find(".tdc-icon-selector-content").find(".tdc-font-separator:visible").each(function(){jQuery(this).nextAll("span").each(function(){var a=
jQuery(this);-1===a.data("font_class").indexOf(e)?a.hide():a.show()})})});d.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var e=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(e,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});d.on("change",".tdc-tab-no-design .tdc-property-gradient input",function(b){b=jQuery(this).val();var e=
tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(e,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b});d.on("change",".tdc-tab-no-design .tdc-row-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingColumns&&clearTimeout(tdcSidebarPanel.timerChangingColumns);var e=jQuery(this);tdcSidebarPanel.timerChangingColumns=setTimeout(function(){var a=e.val(),c=tdcSidebar.getCurrentRow().data("model_id");
c=tdcIFrameData.getModel(c);var b=c.get("childCollection");this.oldValue="11";_.isUndefined(b)||(b=tdcIFrameData.getChildCollectionWidths(b),_.isUndefined(b)||(this.oldValue=b));"11"===this.oldValue&&("23_13"===a||"13_23"===a||"13_13_13"===a)||"23_13"===this.oldValue&&("11"===a||"13_23"===a||"13_13_13"===a)||"13_23"===this.oldValue&&("11"===a||"23_13"===a||"13_13_13"===a)||"13_13_13"===this.oldValue&&("11"===a||"23_13"===a||"13_23"===a)?(tdcIFrameData.changeRowModel(c,this.oldValue,a),c.getShortcodeRender(1,
null,!0)):this.oldValue!==a&&(tdcIFrameData.changeFluidStructureModel(c,this.oldValue,a),c.getShortcodeRender(1,null,!0));this.oldValue=a},300)});d.on("change",".tdc-tab-no-design .tdc-property-dropdown.tdc-add-class input.tdc-property-input-radio",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this);var e=b.val(),a=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(a,b.data("param_name"),this.oldValue,e);this.oldValue=e}});d.on("change focus",
".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var e=tdcSidebar._$currentInnerRow.data("model_id");e=tdcIFrameData.getModel(e);tdcIFrameData.changeInnerRowModel(e,this.oldValue,b);e.getShortcodeRender(tdcIFrameData.getColumnNumber(e),null,!0);this.oldValue=b}});d.on("change",".tdc-tab-no-design .tdc-innerRow-col-dropdown input.tdc-property-input-radio",function(b){"undefined"!==typeof tdcSidebarPanel.timerChangingInnerColumns&&
clearTimeout(tdcSidebarPanel.timerChangingInnerColumns);var e=jQuery(this);tdcSidebarPanel.timerChangingInnerColumns=setTimeout(function(){var a=e.val(),c=tdcSidebar._$currentInnerRow.data("model_id");c=tdcIFrameData.getModel(c);var b=c.get("childCollection");this.oldValue="11";_.isUndefined(b)||(b=tdcIFrameData.getChildCollectionWidths(b),_.isUndefined(b)||(this.oldValue=b));tdcIFrameData.changeInnerRowModel(c,this.oldValue,a);c.getShortcodeRender(tdcIFrameData.getColumnNumber(c),null,!0);this.oldValue=
a},300)});d.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var e=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(e,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});d.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(b){b.preventDefault();var e=jQuery(this);b=jQuery("#tdc-wpeditor");var a=b.children(".content"),
c=e.data("mapped_parameter_name");e=e.data("model_id");var d=tdcIFrameData.getModel(e).get("parentModel").get("attrs"),f="tdc-three-column";if(_.has(d,"width"))switch(d.width){case "1/3":f="tdc-one-column";break;case "2/3":f="tdc-two-column"}a.addClass("tdc-dropped-wpeditor");a.html('<iframe id="tdc-iframe-wpeditor" class="'+f+'" src="'+window.tdcAdminSettings.pluginUrl+"/includes/wpeditor.php?wp_path="+window.tdcAdminSettings.ABSPATH+'" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+
e+'" data-mapped_parameter_name="'+c+'"></iframe>');b.show();tdcWindowFrame.setWindowFrame(b)});d.on("click","#tdc-wpeditor .tdc-iframe-close-button",function(b){b.preventDefault();jQuery("#tdc-wpeditor").hide()});d.on("click",".tdc-sidebar-delete-row",tdcRowHandlerUI.deleteHandler);d.on("click",".tdc-sidebar-delete-inner-row",tdcInnerRowHandlerUI.deleteHandler);d.on("click",".tdc-sidebar-clone-row",tdcRowHandlerUI.cloneHandler);d.on("click",".tdc-sidebar-clone-inner-row",tdcInnerRowHandlerUI.cloneHandler);
d.on("click",".tdc-sidebar-shortcode-row",function(b){b=jQuery(b.currentTarget).data("model_id");b=tdcIFrameData.getModel(b);var e={error:g,getShortcode:""};_.isUndefined(b)||tdcIFrameData._checkModelData(b,e);_.isUndefined(e.getShortcode)||console.log(e.getShortcode)});d.on("click",".tdc-sidebar-save-shortcode",function(b){b=jQuery(b.currentTarget).data("model_id");b=tdcIFrameData.getModel(b);var e=b.get("tag"),a={error:g,getShortcode:""};_.isUndefined(b)||tdcIFrameData._checkModelData(b,a);_.isUndefined(a.getShortcode)||
tdConfirm.modal({caption:"Saving Shortcode",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},100);return'<label>Shortcode Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var c=jQuery("#TB_ajaxContent"),b=c.find(".info");c=c.find("input").val().trim();if(""===c)b.html("Please enter a shortcode name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings=
{};"undefined"===typeof window.tdcAdminSettings.tdcSavings[e]&&(window.tdcAdminSettings.tdcSavings[e]=[]);for(var d=!1,g=0;g<window.tdcAdminSettings.tdcSavings[e].length;g++)if(window.tdcAdminSettings.tdcSavings[e][g].name===c){d=!0;break}d?b.html('Shortcode name already exists for "'+e+'" ! Choose another one'):(b.html("Saving..."),window.tdcAdminSettings.tdcSavings[e].push({name:c,shortcode:window.btoa(a.getShortcode)}),tdcUtil.updateTdcSavings(window,function(){jQuery("#TB_ajaxContent").find(".info").html("Shortcode has been saved!");
setTimeout(function(){tb_remove()},500)}))}}})});d.on("click",".tdc-sidebar-current-styles-settings",function(b){b=jQuery(b.currentTarget).data("model_id");b=tdcIFrameData.getModel(b);var e={error:g,getShortcode:""};_.isUndefined(b)||tdcIFrameData._checkModelData(b,e);var a=b.get("tag");b=b.get("attrs");b=_.clone(b);if(!_.isUndefined(b)){e="";var c={},d={};for(f in b)0===f.indexOf("tds_")&&(c[f]=b[f]);var f=window.tdcAdminSettings.mappedShortcodes[a].params;for(a=0;a<f.length;a++){var q=!1,k=f[a];
if(0===k.param_name.indexOf("tds_")){for(var h in c)if(k.param_name===h){d[h]=c[h];q=!0;break}q||(d[k.param_name]="")}}for(h in c)switch(c=h.split("-"),c.length){case 2:if(!_.has(d,h)){f=c[0];c=!1;for(var m in d)if(f===d[m]&&1===m.split("-").length){c=!0;break}if(!c){var n;for(n in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[n],f)){var p=n;break}_.has(d,p)&&""===d[p]&&window.tdcAdminSettings.globalStyle[p]===f&&(c=!0)}c||delete b[h]}break;case 3:f=c[0];a=c[2];
for(n in window.tdcAdminSettings.settingsStyle)if(_.has(window.tdcAdminSettings.settingsStyle[n],f)){p=n;break}c=!1;for(m in d)if(f===d[m]&&m===p+"-"+a){c=!0;break}c||_.has(d,p+"-"+a)&&""===d[p+"-"+a]&&window.tdcAdminSettings.globalStyle[p]===f&&(c=!0);c||delete b[h]}for(n in b)e+='"'+n+'" => "'+b[n]+'",\n';console.log(e)}});d.on("click",".tdc-sidebar-font-reset",function(b){tdConfirm.modal({caption:"Clear Font Settings",htmlInfoContent:"This will clear all values for this font group settings.",textYes:"Yes",
objectContext:this,callbackYes:function(){tb_remove();var b=jQuery(this),a=b.data("model_id"),c=tdcIFrameData.getModel(a),d=c.get("attrs");d=_.clone(d);for(var f="font-family font-size font-line-height font-style font-weight font-transform font-spacing".split(" "),g="",k=0;k<f.length;k++){var h=b.closest(".tdc-font-manager-wrap").nextAll(".tdc-"+f[k]+":first");if(h.length){var m=h.find('[data-model_id="'+a+'"]');m.length&&(m.val(""),m.data("responsive",""),h.removeClass("tdc-css-inherited"),g=h.find(".tdc-inherit"),
g.length&&g.hide(),g=m.data("placeholder"),"undefined"!==typeof g&&m.attr("placeholder",g),g=m.data("param_name"),delete d[g],m=m.attr("name"),tdcSidebarPanel.deleteResponsiveValues(m))}}c.set("attrs",d);tdcSidebarController.onUpdate(c,g,"","")}})});d.on("click",".tdc-sidebar-font-save",function(b){b=jQuery(this);var e=b.data("model_id");e=tdcIFrameData.getModel(e).get("attrs");var a=b.data("param_name").replace("font_settings",""),c="font_family font_size font_line_height font_style font_weight font_transform".split(" "),
d={};_.each(e,function(b,e,l){if(0===e.indexOf(a))for(l=0;l<c.length;l++)if(0<e.indexOf(c[l])){d[c[l]]=b;break}});_.isEmpty(d)||tdConfirm.modal({caption:"Saving Font Settings",htmlInfoContent:function(){setTimeout(function(){jQuery("#TB_ajaxContent").find("input").focus()},100);return'<label>Font Name: </label><input type="text" autofocus><div class="info"></div>'},textYes:"Save",textNo:"Cancel",callbackYes:function(){var a=jQuery("#TB_ajaxContent"),c=a.find(".info");a=a.find("input").val().trim();
if(""===a)c.html("Please enter a font name");else{if("undefined"===typeof window.tdcAdminSettings.tdcSavings||""===window.tdcAdminSettings.tdcSavings)window.tdcAdminSettings.tdcSavings={};"undefined"===typeof window.tdcAdminSettings.tdcSavings.fonts&&(window.tdcAdminSettings.tdcSavings.fonts=[]);-1===_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,{name:a})?(c.html("Saving..."),window.tdcAdminSettings.tdcSavings.fonts.push({name:a,value:window.btoa(JSON.stringify(d))}),tdcUtil.updateTdcSavings(window,
function(){jQuery("#TB_ajaxContent").find(".info").html("Font has been saved!");setTimeout(function(){tb_remove()},500)})):c.html("Font name already exists! Choose another one")}}})});d.on("click",".tdc-sidebar-font-load",function(){var b=jQuery(this),e=b.closest(".tdc-property-wrap"),a=b.data("model_id"),c=b.data("param_name");if(""!==window.tdcAdminSettings.tdcSavings&&"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts){var d=jQuery("#tdc-font-list");d.length||(d=tdcSidebar.buildFontList(a,
c));d.html("");""!==window.tdcAdminSettings.tdcSavings&&"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&_.map(window.tdcAdminSettings.tdcSavings.fonts,function(b){jQuery('<div class="tdc-font-settings" data-value="'+b.value+'" data-model_id="'+a+'" data-param_name="'+c+'">'+b.name+'<span class="tdc-font-delete"></span></div>').appendTo(d)});e.after(d);d.toggle()}});d.on("click",".tdc-font-delete",function(b){b.stopImmediatePropagation();var e=jQuery(this).closest(".tdc-font-settings");
b=e.data("name");b=_.findIndex(window.tdcAdminSettings.tdcSavings.fonts,{name:b});window.tdcAdminSettings.tdcSavings.fonts.splice(b,1);tdcUtil.updateTdcSavings(this,function(){e.remove()})});d.on("click",".tdc-font-settings",function(){var b=jQuery(this),e=b.data("value");e=JSON.parse(window.atob(e));var a=b.data("model_id");a=tdcIFrameData.getModel(a);var c=a.get("attrs"),d=b.data("param_name").replace("font_settings",""),f="font_family font_size font_line_height font_style font_weight font_transform".split(" ");
_.each(e,function(a,b,e){-1!==_.indexOf(f,b)&&(c[d+b]=a)});a.set({attrs:c,rebindToPanel:!0});tdcSidebarController.onUpdate(a)})},tdcIconWrapHandler:function(d){var b=jQuery(this),e=jQuery("#tdc-icon-selector");e.length||(e=tdcSidebar.buildIconSelector());var a=b.closest(".tdc-property-wrap");d=e.find(".tdc-icon-selector-filter");var c=e.find(".tdc-icon-selector-lib"),l=e.find(".tdc-icon-selector-content");c.val("");d.val("");l.children().each(function(){jQuery(this).show()});e.data("model_id",b.data("model_id"));
e.data("param_name",b.data("param_name"));e.show();a.after(e);b=e.data("param_name");e=tdcIFrameData.getModel(e.data("model_id")).get("attrs");var f="";_.has(e,b)&&(f=e[b].trim());d.focus();l.find("span").each(function(){var a=jQuery(this),b=a.data("font_class");if(f===b){for(a.addClass("selected");!a.prev(".tdc-font-separator").length;)a=a.prev();a=a.prev(".tdc-font-separator").data("font_id");c.val(a);c.trigger("change")}else a.removeClass("selected")})},tdcIconRemoveHandler:function(d){var b=jQuery(d.currentTarget);
d=b.closest(".tdc-property-wrap").find(".tdc-icon-wrap");b.addClass("tdc-hidden-button");d.addClass("tdc-no-icon-selected");d.html("");b=d.data("model_id");b=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(b,d.data("param_name"),"","")},tdcImageWrapHandler:function(d){var b=jQuery(d.currentTarget);b.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(b);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");
jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(e){var a=jQuery("img",e).attr("src"),c="",d="",f="";"undefined"===typeof a?(a=jQuery(e).attr("src"),c=jQuery(e).attr("class"),d=jQuery(e).attr("height"),f=jQuery(e).attr("width")):(c=jQuery("img",e).attr("class"),d=jQuery("img",e).attr("height"),f=jQuery("img",e).attr("width"));jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),
beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:c,action:"tdc_ajax_get_image_id"}}).done(function(c,e,l){"success"===e&&(_.isObject(c)&&_.has(c,"errors")?new tdcNotice.notice(c.errors,!0,!1):(b.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),b.attr("style","background-image: url( '"+a+"') "),b.data("image_link",a),b.data("image_id",c.image_id),b.data("image_height",d),b.data("image_width",
f),b.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,window.tb_remove(),e="",l=b.data("model_id"),l=tdcIFrameData.getModel(l),b.hasClass("tdc-no-image-selected")||(e=c.image_id.toString()),c=l.get("attrs"),c.image_height=d,c.image_width=f,l.set("attrs",c),tdcSidebarController.onUpdate(l,b.data("param_name"),"",e)))}).fail(function(a,c,b){})};return!1},tdcImageRemoveHandler:function(d){var b=jQuery(d.currentTarget);d=b.closest(".tdc-property-wrap").find(".tdc-image-wrap");
b.addClass("tdc-hidden-button");d.addClass("tdc-no-image-selected");jQuery.removeData(d,"image_link");d.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");b=d.data("model_id");b=tdcIFrameData.getModel(b);tdcSidebarController.onUpdate(b,d.data("param_name"),"","")},tdcInheritSelectHandler:function(d){d=jQuery(d.currentTarget);var b=d.closest(".tdc-property-wrap"),e=b.find("[data-responsive]"),a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),
"all");b.hasClass("tdc-property-dropdown-responsive")&&("undefined"===typeof a?(b.removeClass("tdc-css-inherited"),e.find("option:selected").removeAttr("selected").find("option:first").attr("selected","selected")):(e.val(a),b.addClass("tdc-css-inherited")),b=tdcSidebarPanel.deleteResponsiveValue(e.attr("name"),tdcSidebar.currentViewportSettings.name),a=tdcIFrameData.getModel(e.data("model_id")),e=e.data("param_name"),tdcSidebarController.onUpdate(a,e,"",b));d.hide()},tdcInheritCheckboxHandler:function(d){d=
jQuery(d.currentTarget);var b=d.closest(".tdc-property-wrap"),e=b.find("[data-responsive]"),a=tdcSidebarPanel.getCurrentResponsiveValue(e.attr("name"),"all");b.hasClass("tdc-property-checkbox-responsive")&&("undefined"===typeof a?(b.removeClass("tdc-css-inherited"),e.removeAttr("checked")):(""===a?e.removeAttr("checked"):e.attr("checked","checked"),b.addClass("tdc-css-inherited")),b=tdcSidebarPanel.deleteResponsiveValue(e.attr("name"),tdcSidebar.currentViewportSettings.name),a=tdcIFrameData.getModel(e.data("model_id")),
e=e.data("param_name"),tdcSidebarController.onUpdate(a,e,"",b));d.hide()},bindPanelToModel:function(d,b){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==d.cid||!_.isUndefined(b)&&(_.isUndefined(b)||!0===b)){var e=window.tdcAdminSettings.mappedShortcodes[d.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=d;for(var a=[],c=0;c<e.params.length;c++){var l=tdcSidebarPanel._defaultGroupName;
_.isEmpty(e.params[c].group)||(l=e.params[c].group);a.push(l)}a=_.uniq(a);var f=l="",g=tdcSidebar.getCurrentTabId(),k,h;l+='<div class="tdc-tabs">';var m=h=k="";for(c=0;c<a.length;c++){f=tdcSidebarPanel._fixGroupName(a[c]);var n=tdcUtil.makeSafeForCSS(f);0===c?(k='<a href="#" data-tab-id="td-tab-'+n+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>",h='<a href="#" data-tab-id="td-tab-'+n+'" title="'+f+' settings">'+f+"</a>"):_.isUndefined(g)||g!=="td-tab-"+n?m+='<a href="#" data-tab-id="td-tab-'+
n+'" title="'+f+' settings">'+f+"</a>":(k=h,m+='<a href="#" data-tab-id="td-tab-'+n+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>")}f=n=h=c="";switch(tdcSidebar.currentViewportSettings.name){case "all":c="selected";break;case "landscape":h="selected";break;case "portrait":n="selected";break;case "phone":f="selected"}l=l+(k+m)+'</div><div class="tdc-tab-responsive">';l+='<div class="tdc-responsive-buttons">';l+='<div class="tdc-responsive-all '+c+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>';
"Newspaper"===window.tdcAdminSettings.themeName&&(l+='<div class="tdc-responsive-tablet-landscape '+h+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>');l+='<div class="tdc-responsive-tablet-portrait '+n+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>';l+='<div class="tdc-responsive-phone '+f+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';l+="</div>";l+="</div>";l+='<div class="tdc-tab-content-wrap">';m=h=
k="";for(c=0;c<a.length;c++)f=tdcSidebarPanel._fixGroupName(a[c]),n=tdcUtil.makeSafeForCSS(f),f="tdc-tab-no-design","css"===n&&(f="tdc-tab-design"),0===c?(k='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+n+'">',h='<div class="tdc-tab-content '+f+'" id="td-tab-'+n+'">',n=d.get("tag"),n=window.tdcAdminSettings.mappedShortcodes[n].tdc_start_values,_.isUndefined(n)||d.has("presetValues")||(n=JSON.parse(window.atob(n)),_.isArray(n)&&1<n.length&&d.set("presetValues",n)),d.has("presetValues")&&
(n=d.get("presetValues"),m+=tdcSidebarPanel._addPresetValuesSelector(n,d))):_.isUndefined(g)||g!=="td-tab-"+n?m+='<div class="tdc-tab-content '+f+'" id="td-tab-'+n+'">':(k=h,m+='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+n+'">'),m+=tdcSidebarPanel._bindGroupAndGetHtml(a[c],e,d),n=' data-model_id="'+d.cid+'" ',"vc_row"===d.attributes.tag?(m+='<div class="tdc-sidebar-row-buttons">',m+='<div class="tdc-sidebar-button tdc-sidebar-delete-row" '+n+' title="Delete the current selected Row">Delete Row</div>',
m+='<div class="tdc-sidebar-button tdc-sidebar-clone-row" '+n+' title="Make a copy of the current selected Row. The copy will appear below the current Row">Clone Row</div>',"dev"===window.tdcAdminSettings.deployMode&&(m+='<div class="tdc-sidebar-button tdc-sidebar-shortcode-row" '+n+' title="Get the shortcode of the current row">CONSOLE: shortcode</div>'),m+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+n+' title="Save current row">SAVE ROW</div>',m+="</div>"):"vc_row_inner"===d.attributes.tag?
(m+='<div class="tdc-sidebar-row-buttons">',m+='<div class="tdc-sidebar-button tdc-sidebar-delete-inner-row" '+n+' title="Delete the current selected Inner Row">Delete Inner Row</div>',m+='<div class="tdc-sidebar-button tdc-sidebar-clone-inner-row" '+n+' title="Make a copy of the current selected Inner Row. The copy will appear below the current Inner Row">Clone Inner Row</div>',m+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+n+' title="Save current row">SAVE INNER ROW</div>',m+=
"</div>"):"vc_column"!==d.attributes.tag&&"vc_column_inner"!==d.attributes.tag&&(m+='<div class="tdc-sidebar-row-buttons">',"dev"===window.tdcAdminSettings.deployMode&&(m+='<div class="tdc-sidebar-button tdc-sidebar-current-styles-settings" '+n+' title="Get the current styles\' settings">CONSOLE: style presets</div>'),m+='<div class="tdc-sidebar-button tdc-sidebar-save-shortcode" '+n+' title="Save current row">SAVE SHORTCODE</div>',m+="</div>"),m+="</div>";l=l+(k+m)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(l);
jQuery(".tdc-inspector-wrap").addClass("tdc-inspector-active");tdcSidebarPanel._hook.addAction("panel_rendered",function(){"undefined"===typeof window.tdcResponsiveValues&&(window.tdcResponsiveValues={},"all"===tdcSidebar.currentViewportSettings.name?jQuery(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):jQuery(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive"),jQuery(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=jQuery(this),c=a.find("[data-responsive]"),
b=c.attr("name"),e=c.data("responsive");try{var d=window.atob(e);window.tdcResponsiveValues[b]=JSON.parse(d)}catch(w){e={},a.hasClass("tdc-property-textfield-responsive")?""!==c.val()&&(e.all=c.val()):a.hasClass("tdc-property-dropdown-responsive")?c.find("option:first").val()!==c.val()&&(e.all=c.val()):a.hasClass("tdc-property-checkbox-responsive")?c.is(":checked")&&(e.all=c.val()):a.hasClass("tdc-property-range-responsive")?e.all=c.data("value"):a.hasClass("tdc-property-range_multiple-responsive")&&
(e.all=c.data("range_value")+c.data("range_unit")),window.tdcResponsiveValues[b]=e}tdcSidebarPanel.setViewportCurrentResponsiveValue(c)}))});jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");(function(){if("vc_row"===d.get("tag")){var a=jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),b=d.get("childCollection");if(!_.isUndefined(b)){b=tdcIFrameData.getChildCollectionWidths(b);
_.isUndefined(b)&&(b="11");a.length?a.val(b):(a=jQuery("body .tdc-row-col-dropdown input[value='"+b+"']"),a.length&&a.attr("checked","checked"));a=d.get("attrs");if(_.has(a,"full_width"))var e=a.full_width;_.isUndefined(e)&&(e="");c.val(e)}}})();(function(){if("vc_row_inner"===d.get("tag")){var a=jQuery("body .tdc-innerRow-col-dropdown select"),c=d.get("childCollection");if(!_.isUndefined(c)){c=tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");var b=d.get("parentModel").get("attrs"),
e="";_.has(b,"width")&&(e=b.width.replace("/",""));if(a.length)switch(a.val(c),e){case "":case "11":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").removeClass("tdc-block-col");a.find("option[value=13_23]").removeClass("tdc-block-col");a.find("option[value=13_13_13]").removeClass("tdc-block-col");break;case "13":a.find("option[value=12_12]").addClass("tdc-block-col");a.find("option[value=23_13]").addClass("tdc-block-col");a.find("option[value=13_23]").addClass("tdc-block-col");
a.find("option[value=13_13_13]").addClass("tdc-block-col");break;case "23":a.find("option[value=12_12]").removeClass("tdc-block-col"),a.find("option[value=23_13]").addClass("tdc-block-col"),a.find("option[value=13_23]").addClass("tdc-block-col"),a.find("option[value=13_13_13]").addClass("tdc-block-col")}else if(a=jQuery('body .tdc-innerRow-col-dropdown input[value="'+c+'"]'),a.length)switch(a.attr("checked","checked"),a.next("label").show(),e){case "":case "11":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");
a.parent().find("input[value=23_13] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_23] + label").removeClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").removeClass("tdc-block-col");break;case "13":a.parent().find("input[value=12_12] + label").addClass("tdc-block-col");a.parent().find("input[value=23_13] + label").addClass("tdc-block-col");a.parent().find("input[value=13_23] + label").addClass("tdc-block-col");a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col");
break;case "23":a.parent().find("input[value=12_12] + label").removeClass("tdc-block-col"),a.parent().find("input[value=23_13] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_23] + label").addClass("tdc-block-col"),a.parent().find("input[value=13_13_13] + label").addClass("tdc-block-col")}}}})()}},_bindGroupAndGetHtml:function(d,b,e){for(var a="",c=e.get("attrs"),l=0;l<b.params.length;l++){var f=b.params[l].param_name,g=b.params[l].group;if(d===tdcSidebarPanel._defaultGroupName&&
_.isEmpty(b.params[l].group)||b.params[l].group===d)a+=tdcSidebarPanel._bindParamAndGetHtml(b.params[l],e);if("block_template_id"===f){g=c.block_template_id;_.isEmpty(g)&&(g=window.tdcAdminSettings.globalBlockTemplate);f=window.tdcAdminSettings.mappedBlockTemplates;for(var k=0;k<f[g].params.length;k++)if(d===tdcSidebarPanel._defaultGroupName&&_.isEmpty(f[g].params[k].group)||f[g].params[k].group===d)a+=tdcSidebarPanel._bindParamAndGetHtml(f[g].params[k],e)}else if(0===f.indexOf("tds_")){var h=f.split("-");
k=h[0];var m;2===h.length?m=h[1]:2<h.length&&new tdcNotice.notice('Param "'+f+'" must have up to at most one "-" separator ',!0,!1);f=c[f];_.isEmpty(f)&&(f=window.tdcAdminSettings.globalStyle[k]);h=window.tdcAdminSettings.settingsStyle[k];for(k=0;k<h[f].params.length;k++)if(g==d||_.isUndefined(g)&&d===tdcSidebarPanel._defaultGroupName){var n=JSON.parse(JSON.stringify(h[f].params[k]));n.param_name=f+"-"+n.param_name;_.isUndefined(m)||(n.param_name+="-"+m);a+=tdcSidebarPanel._bindParamAndGetHtml(n,
e)}}}return a},_bindParamAndGetHtml:function(d,b){switch(d.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(d,b);case "gradient":return tdcSidebarPanel.addGradient(d,b);case "dropdown":return tdcSidebarPanel.addDropDown(d,b);case "dropdown-responsive":return tdcSidebarPanel.addDropDownResponsive(d,b);case "checkbox":return tdcSidebarPanel.addCheckBox(d,b);case "checkbox-responsive":return tdcSidebarPanel.addCheckBoxResponsive(d,b);case "range":return tdcSidebarPanel.addRange(d,b);case "range-responsive":return tdcSidebarPanel.addRangeResponsive(d,
b);case "range_multiple":return tdcSidebarPanel.addRangeMultiple(d,b);case "range_multiple-responsive":return tdcSidebarPanel.addRangeMultipleResponsive(d,b);case "icon":return tdcSidebarPanel.addIconSelector(d,b);case "attach_image":return tdcSidebarPanel.addUploadImage(d,b);case "textfield":return tdcSidebarPanel.addTextField(d,b);case "textfield-responsive":return tdcSidebarPanel.addTextFieldResponsive(d,b);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(d,b);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(d,
b);case "css_editor":return"";case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(d,b);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(d,b);case "text_separator":return tdcSidebarPanel.addTextSeparatorHorizontal(d,b);case "font_header":return tdcSidebarPanel.addFontHeader(d,b);case "font_title":return tdcSidebarPanel.addFontTitle(d,b);case "font_reset":return tdcSidebarPanel.addFontReset(d,b);case "font_save":return tdcSidebarPanel.addFontSave(d,
b);case "font_load":return tdcSidebarPanel.addFontLoad(d,b);case "font_settings":return tdcSidebarPanel.addFontSettings(d,b);case "clearfix":return tdcSidebarPanel.addClearfix(d,b);case "tdc_hidden_field":return"";default:return d.param_name+" - "+d.type+"<br>"}},_deletePanel:function(){tdcDebug.log("clear _deletePanel ");tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=g;jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();
jQuery(".tdc-inspector-wrap").removeClass("tdc-inspector-active");jQuery(".tdc-empty-sidebar").show();tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible");tdcSidebar.$_currentElementHead.removeClass("tdc-current-element-siblings-button-on");delete window.tdcResponsiveValues;tdcSidebar.hideWpeditor()},_getParameterClasses:function(d){var b="tdc-property-wrap tdc-property-"+d.type;b+=" tdc-property-"+d.param_name;_.isUndefined(d["class"])||(b+=" "+d["class"]);return b},
_getParameterCurrentValue:function(d,b){var e=b.get("attrs");return _.isUndefined(e[d.param_name])?"dropdown"===d.type||_.isUndefined(d.value)?"":d.value:e[d.param_name]},_getParameterDomName:function(d){return"tdc-param-"+d.param_name},_getParamterDataAtts:function(d,b){var e="";if("undefined"===typeof b)return e;e+=' data-model_id="'+b.cid+'"';"undefined"!==typeof d&&(e+=' data-param_name="'+d.param_name+'"');return e},_fixGroupName:function(d){switch(d){case "Design options":return"Css";case "Pagination":return"Extra";
case "Ajax filter":return"Ajax"}return d},clearPanel:function(){tdcSidebarPanel._deletePanel()},_addPresetValuesSelector:function(d,b){var e='<div class="tdc-preset-values tdc-sidebar-horizontal-separator"><i class="tdc-font-fa tdc-font-fa-cube"></i>Pre-made style presets<i class="tdc-font-fa tdc-font-fa-angle-right"></i></div>'+('<ul class="tdc-preset-values-list" data-model_id="'+b.cid+'">');for(var a=1;a<d.length;a++){var c="";_.isUndefined(d[a].tdc_preset_individual)||(c='data-individual="1"');
var l="";_.isUndefined(d[a].tdc_preset_class)||(l=' classes="'+d[a].tdc_preset_class+'"');e+="<li "+c+" "+l+' data-values="'+window.btoa(JSON.stringify(d[a]))+'">'+d[a].tdc_preset_name+"</li>"}e+="</ul>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackPresets)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackPresets);return e},callbackPresets:function(){jQuery(".tdc-preset-values").click(function(){jQuery(this).next(".tdc-preset-values-list").toggle()});
jQuery(".tdc-preset-values-list > li").click(function(){var d=jQuery(this),b=d.data("individual"),e=d.parent(".tdc-preset-values-list");d=JSON.parse(window.atob(d.data("values")));var a=tdcIFrameData.getModel(e.data("model_id")),c={};_.isUndefined(b)||(c=_.clone(a.get("attrs")));_.isObject(d)&&(_.map(d,function(b,e){var d=!1;_.map(window.tdcAdminSettings.mappedShortcodes[a.get("tag")].params,function(a,f){a.param_name===e&&(d=!0,c[e]=b)});d||0!==e.indexOf("tds_")||(c[e]=b)}),a.set("attrs",c));tdcSidebarController.onUpdate(a);
setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0,g,function(){jQuery(".tdc-preset-values").trigger("click")})},500)})},addColorpicker:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+
'">';a+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(d,b)+'"/>');a+="</div></div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackColorPicker)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackColorPicker);
return a},callbackColorPicker:function(){jQuery("#tdc-palette-color-picker").tdPalette();jQuery(".tdc-tab-no-design .tdc-property-colorpicker").each(function(){var d=jQuery(this),b=d.find("input");d=d.find(".tdc-colorpicker-wrap");_.isUndefined(b.val())||""===b.val()||d.attr("style","background: "+b.val())})},addGradient:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span'+
e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property"><div class="tdc-gradient-wrap tdc-no-gradient-selected"></div>'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="hidden" value="'+tdcSidebarPanel._getParameterCurrentValue(d,b)+'"/>');a+="</div></div>";tdcSidebarPanel._hook.hasCallback("panel_rendered",tdcSidebarPanel.callbackGradient)||tdcSidebarPanel._hook.addAction("panel_rendered",tdcSidebarPanel.callbackGradient);return a},
callbackGradient:function(){jQuery("#tdc-gradient-color-picker").tdGradient();jQuery(".tdc-property-gradient").each(function(){var d=jQuery(this),b=d.find("input");d=d.find(".tdc-gradient-wrap");if(!_.isUndefined(b.val())&&""!==b.val())try{var e=JSON.parse(window.atob(b.val()));_.isUndefined(e.css)||d.attr("style",e.css)}catch(a){e=b.val(),_.isUndefined(e)||d.attr("style","background: "+e)}})},addDropDown:function(d,b){var e=!1,a=!1;_.has(d,"tdc_dropdown_images")&&""!==d.tdc_dropdown_images&&(e=!0);
_.has(d,"tdc_dropdown_texts")&&""!==d.tdc_dropdown_texts&&(a=!0);var c="",l="",f=Object.keys(d.value);if(_.has(d,"tdc_min_options")&&f.length<=parseInt(d.tdc_min_options))return c;for(var g=0;g<f.length;g++){var k=!1,h="",m=f[g],n=String(tdcSidebarPanel._getParameterCurrentValue(d,b)),p=String(d.value[f[g]]);_.isObject(d.value[f[g]])&&(k=!0,p=_.values(d.value[f[g]])[0],m=_.keys(d.value[f[g]])[0]);if(e||a){0===g&&""===n&&(n=p);n===p&&(h=" checked ");n=_.uniqueId();var t=p;if("vc_row"===b.attributes.tag||
"vc_row_inner"===b.attributes.tag)t="col_"+t;l+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' id="'+n+'" name="'+tdcSidebarPanel._getParameterDomName(d)+'" '+h+' value="'+p+'">';e?(h="",k&&(h="tdc-standard-value"),l+='<label class="tdc-property-input-radio-label '+h+'" for="'+n+'" title="'+m+'"><div class="'+t+'"></div></label>'):l+='<label class="tdc-property-input-radio-label" for="'+n+'" title="'+m+'">'+p+"</label>"}else n===p&&(h=' selected="selected" '),
l+="<option "+h+' value="'+p+'">'+m+"</option>"}f="";_.has(d,"description")&&""!==d.description&&(f=' title="'+d.description+'" ');c+='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span'+f+">"+d.heading+"</span></div>";c+='<div class="tdc-property">';e||a?c+=l:(c+="<select "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'">',c=c+l+"</select>");return c+"</div></div>"},addDropDownResponsive:function(d,b){var e=
!1,a=!1;_.has(d,"tdc_dropdown_images")&&""!==d.tdc_dropdown_images&&(e=!0);_.has(d,"tdc_dropdown_texts")&&""!==d.tdc_dropdown_texts&&(a=!0);var c="",l="",f=Object.keys(d.value);if(_.has(d,"tdc_min_options")&&f.length<=parseInt(d.tdc_min_options))return c;var g=' data-responsive="" ',k=String(tdcSidebarPanel._getParameterCurrentValue(d,b));try{var h=JSON.parse(window.atob(k));g=' data-responsive="'+k+'" ';"undefined"!==typeof h[tdcSidebar.currentViewportSettings.name]&&(k=h[tdcSidebar.currentViewportSettings.name])}catch(r){}for(h=
0;h<f.length;h++){var m=!1,n="",p=f[h],t=String(d.value[f[h]]);_.isObject(d.value[f[h]])&&(m=!0,t=_.values(d.value[f[h]])[0],p=_.keys(d.value[f[h]])[0]);if(e||a){0===h&&""===k&&(k=t);k===t&&(n=" checked ");var v=_.uniqueId(),u=t;if("vc_row"===b.attributes.tag||"vc_row_inner"===b.attributes.tag)u="col_"+u;l+='<input class="tdc-property-input-radio" type="radio" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' id="'+v+'" name="'+tdcSidebarPanel._getParameterDomName(d)+'" '+n+' value="'+t+'">';e?(n="",
m&&(n="tdc-standard-value"),l+='<label class="tdc-property-input-radio-label '+n+'" for="'+v+'" title="'+p+'"><div class="'+u+'"></div></label>'):l+='<label class="tdc-property-input-radio-label" for="'+v+'" title="'+p+'">'+t+"</label>"}else k===t&&(n=' selected="selected" '),l+="<option "+n+' value="'+t+'">'+p+"</option>"}f="";_.has(d,"description")&&""!==d.description&&(f=' title="'+d.description+'" ');c+='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span'+
f+">"+d.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select" style="display: block;"></div></span></div>';c+='<div class="tdc-property">';e||a?c+=l:(c+="<select "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" '+g+f+">",c=c+l+"</select>");return c+"</div></div>"},addCheckBox:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a="";""!==tdcSidebarPanel._getParameterCurrentValue(d,
b)&&(a=" checked ");var c='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";c=c+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="checkbox" value="yes" '+a+"/>");return c+"</div></div>"},addCheckBoxResponsive:function(d,b){var e="",a=' data-responsive="" ',c=String(tdcSidebarPanel._getParameterCurrentValue(d,b));try{var l=JSON.parse(window.atob(c));
a=' data-responsive="'+c+'" ';"undefined"!==typeof l[tdcSidebar.currentViewportSettings.name]&&(c=l[tdcSidebar.currentViewportSettings.name])}catch(f){}""!==c&&(e=" checked ");l="";_.has(d,"description")&&""!==d.description&&(l=' title="'+d.description+'" ');c='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span'+l+">"+d.heading+'<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-checkbox" style="display: block;"></div></span></div>';
c=c+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="checkbox" value="yes" '+e+a+"/>");return c+"</div></div>"},addRange:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a="";_.has(d,"range_max")&&""!==d.range_max&&(a=d.range_max);var c="";_.has(d,"range_min")&&""!==d.range_min&&(c=d.range_min);var l="";_.has(d,"range_step")&&""!==d.range_step&&(l=d.range_step);
var f="";_.has(d,"value")&&""!==d.value&&(f=d.value);var g="";""!==tdcSidebarPanel._getParameterCurrentValue(d,b)&&(g=tdcSidebarPanel._getParameterCurrentValue(d,b));var k='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';k+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";k=k+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="range" data-value="'+g+'" data-min="'+c+'" data-max="'+
a+'" data-step="'+l+'" min="'+c+'" max="'+a+'" step="'+l+'" value="'+g+'" />');return k=k+('<input type="text" class="tdc_range_value" data-default_value="'+f+'" value="'+g+'"/>')+"</div></div>"},addRangeResponsive:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a="";_.has(d,"range_max")&&""!==d.range_max&&(a=d.range_max);var c="";_.has(d,"range_min")&&""!==d.range_min&&(c=d.range_min);var l="";_.has(d,"range_step")&&""!==d.range_step&&(l=d.range_step);
var f="";_.has(d,"value")&&""!==d.value&&(f=d.value);""!==tdcSidebarPanel._getParameterCurrentValue(d,b)&&tdcSidebarPanel._getParameterCurrentValue(d,b);var g="";_.has(d,"placeholder")&&""!==d.placeholder&&(g=' data-placeholder="'+d.placeholder+'" placeholder="'+d.placeholder+'" ');var k=' data-responsive="" ',h=tdcSidebarPanel._getParameterCurrentValue(d,b);try{var m=JSON.parse(window.atob(h));k=' data-responsive="'+h+'" ';h="undefined"===typeof m[tdcSidebar.currentViewportSettings.name]?"":m[tdcSidebar.currentViewportSettings.name]}catch(n){}m=
'<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';m+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";m=m+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="range" data-value="'+h+'" data-min="'+c+'" data-max="'+a+'" data-step="'+l+'" min="'+c+'" max="'+a+'" step="'+l+'" value="'+h+'" '+k+" />");return m=m+('<input type="text" class="tdc_range_value" data-default_value="'+
f+'" '+g+' value="'+h+'"/>')+"</div></div>"},addRangeMultiple:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a=d.tdc_values,c=tdcSidebarPanel._getParameterCurrentValue(d,b),l="",f="",g=[],k="",h="",m="",n="",p="",t="",v="",u;for(u in a)a.hasOwnProperty(u)&&(g.push(a[u].unit),""===h||""===k)&&(n=a[u].unit,h=' data-range_unit="'+n+'" ',m=a[u].value,k=' data-range_value="'+m+'" ',p=a[u].range_min,t=a[u].range_max,v=a[u].range_step);if(""!==c){for(var r=
[],w=0;w<g.length&&!(r=c.split(g[w]),1<r.length);w++);r.length&&(n=g[w],h=' data-range_unit="'+n+'" ',m=r[0],k=' data-range_value="'+m+'" ')}for(u in a)a.hasOwnProperty(u)&&(c=_.uniqueId(),l+=" data-value_"+u+'="'+a[u].value+'" ',l+=" data-min_"+u+'="'+a[u].range_min+'" ',l+=" data-max_"+u+'="'+a[u].range_max+'" ',l+=" data-step_"+u+'="'+a[u].range_step+'" ',g=a[u].value,r="",a[u].unit===n&&(g=m,p=a[u].range_min,t=a[u].range_max,v=a[u].range_step,r="checked"),f+='<input name="'+tdcSidebarPanel._getParameterDomName(d)+
'_unit" data-unit="'+u+'" data-unit_value="'+a[u].unit+'" type="radio" id="'+c+'" '+r+' data-default_value="'+a[u].value+'" data-last_value="'+g+'"/>',f+='<label for="'+c+'">'+a[u].unit+"</label>");a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property">'+('<input class="tdc-multiple-range" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="range" '+
k+" "+h+" "+l+' min="'+p+'" max="'+t+'" step="'+v+'" value="'+m+'"/>');a=a+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+f+"</div>"+('<input type="text" class="tdc_range_value" value="'+m+'"/>');a+="</div>";a+="</div>";return a+="</div>"},addRangeMultipleResponsive:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a=d.tdc_values,c=tdcSidebarPanel._getParameterCurrentValue(d,b),l="",f="",g=[],k=' data-responsive="" ',
h="",m="",n="",p="",t="",v="",u="",r;for(r in a)a.hasOwnProperty(r)&&(g.push(a[r].unit),""===m||""===h)&&(p=a[r].unit,m=' data-range_unit="'+p+'" ',n=a[r].value,h=' data-range_value="'+n+'" ',t=a[r].range_min,v=a[r].range_max,u=a[r].range_step);if(""!==c){var w=c;try{var A=JSON.parse(window.atob(c));k=' data-responsive="'+c+'" ';w="undefined"===typeof A[tdcSidebar.currentViewportSettings.name]?"":A[tdcSidebar.currentViewportSettings.name]}catch(x){}if(""!==w){c=[];for(A=0;A<g.length&&!(c=w.split(g[A]),
1<c.length);A++);c.length&&(p=g[A],m=' data-range_unit="'+p+'" ',n=c[0],h=' data-range_value="'+n+'" ')}}for(r in a)a.hasOwnProperty(r)&&(g=_.uniqueId(),l+=" data-value_"+r+'="'+a[r].value+'" ',l+=" data-min_"+r+'="'+a[r].range_min+'" ',l+=" data-max_"+r+'="'+a[r].range_max+'" ',l+=" data-step_"+r+'="'+a[r].range_step+'" ',w=a[r].value,c="",a[r].unit===p&&(w=n,t=a[r].range_min,v=a[r].range_max,u=a[r].range_step,c="checked"),f+='<input name="'+tdcSidebarPanel._getParameterDomName(d)+'_unit" data-unit="'+
r+'" data-unit_value="'+a[r].unit+'" type="radio" id="'+g+'" '+c+' data-default_value="'+a[r].value+'" data-last_value="'+w+'"/>',f+='<label for="'+g+'">'+a[r].unit+"</label>");a='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property">'+('<input class="tdc-multiple-range" '+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+
'" type="range" '+h+" "+m+" "+l+" "+k+' min="'+t+'" max="'+v+'" step="'+u+'" value="'+n+'"/>');a=a+'<div class="tdc-multiple-range-wrap"><div class="tdc-multiple-range-value">'+f+"</div>"+('<input type="text" class="tdc_range_value" value="'+n+'"/>');a+="</div>";a+="</div>";return a+="</div>"},addIconSelector:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span'+
e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property">'+('<div class="tdc-icon-wrap tdc-no-icon-selected" '+tdcSidebarPanel._getParamterDataAtts(d,b)+">");a+='</div><a class="tdc-icon-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-icon-wrap").each(function(a,e){var c=jQuery(e);if(d.param_name===c.data("param_name")){var l=tdcSidebarPanel._getParameterCurrentValue(d,b);""!==l&&(c.html('<i class="'+l+'"></i>'),
c.closest(".tdc-property").find(".tdc-icon-remove").removeClass("tdc-hidden-button"))}})});return a},addUploadImage:function(d,b){var e="";_.has(d,"description")&&""!==d.description&&(e=' title="'+d.description+'" ');var a='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';a+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";a=a+'<div class="tdc-property">'+('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(d,b)+" style=\"background-image: url('"+
window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");a+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(a,e){var c=jQuery(e);if(!c.parent().parent(".tdc-bg-upload").length&&d.param_name===c.data("param_name")){var l=tdcSidebarPanel._getParameterCurrentValue(d,b);""!==l&&jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_url",
"uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:l,action:"tdc_ajax_get_image_url"}}).done(function(a,b,e){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(c.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),c.data("image_link",a.image_url),c.data("image_id",l),c.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,
c,b){})}})});return a},addTextField:function(d,b){var e="",a="";if(_.has(d,"description")&&""!==d.description){var c=jQuery("<div>"+d.description+"</div>");d.description===c.text()?e=' title="'+d.description+'" ':a='<div class="tdc-description">'+d.description+"</div>"}c="";_.has(d,"placeholder")&&""!==d.placeholder&&(c=' data-placeholder="'+d.placeholder+'" placeholder="'+d.placeholder+'" ');var l='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';l+='<div class="tdc-property-title"><span'+
e+">"+d.heading+"</span></div>";l=l+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="text" '+c+' value="'+tdcSidebarPanel._getParameterCurrentValue(d,b)+'"/>');return l=l+a+"</div></div>"},addTextFieldResponsive:function(d,b){var e="",a="";if(_.has(d,"description")&&""!==d.description){var c=jQuery("<div>"+d.description+"</div>");d.description===c.text()?e=' title="'+d.description+'" ':a='<div class="tdc-description">'+
d.description+"</div>"}c="";_.has(d,"placeholder")&&""!==d.placeholder&&(c=' data-placeholder="'+d.placeholder+'" placeholder="'+d.placeholder+'" ');var l=' data-responsive="" ',f=tdcSidebarPanel._getParameterCurrentValue(d,b);try{var g=JSON.parse(window.atob(f));l=' data-responsive="'+f+'" ';f="undefined"===typeof g[tdcSidebar.currentViewportSettings.name]?"":g[tdcSidebar.currentViewportSettings.name]}catch(k){}g='<div class="tdc-property-responsive '+tdcSidebarPanel._getParameterClasses(d)+'">';
g+='<div class="tdc-property-title"><span'+e+">"+d.heading+"</span></div>";g=g+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(d,b)+' name="'+tdcSidebarPanel._getParameterDomName(d)+'" type="text" value="'+f+'" '+c+l+e+"/>");return g=g+a+"</div></div>"},addTextAreaHtml:function(d,b){_.has(d,"description");return'<a href="#" class="tdc-open-wpeditor" data-model_id="'+b.cid+'" data-mapped_parameter_name="'+d.param_name+'">Edit Content</a>'},addTextAreaRawHtml:function(d,
b){var e=_.uniqueId("tdc_textarea_"),a="";_.has(d,"description")&&""!==d.description&&(a=' title="'+d.description+'" ');var c='<div class="'+tdcSidebarPanel._getParameterClasses(d)+'">';c+='<div class="tdc-property-title"><span'+a+">"+d.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<textarea id="'+e+'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(d,b)+">"+tdcSidebarPanel._getParameterCurrentValue(d,b)+"</textarea>");c+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",
url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(d,b)}}).done(function(a,c,b){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):jQuery("#"+e).html(a.parsed_content).addClass("tdc-textarea-visible"))}).fail(function(a,
c,b){});jQuery("body").on("keyup","#"+e,function(a){a=jQuery(a.target);var c=tdcIFrameData.getModel(a.data("model_id")),b=window.btoa(encodeURIComponent(a.val()));tdcSidebarController.onUpdate(c,a.data("param_name"),b,b)});return c},addSeparatorHorizontal:function(d,b){return'<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(d)+'"></div>'},addTextSeparatorHorizontal:function(d,b){return'<div class="tdc-sidebar-text-separator tdc-property-title '+tdcSidebarPanel._getParameterClasses(d)+
'"><span>'+d.heading+"</span></div>"},addFontHeader:function(d,b){return'<div class="tdc-sidebar-font-header '+tdcSidebarPanel._getParameterClasses(d)+'"><span class="tdc-font-ico1" title="Font size"></span><span class="tdc-font-ico2" title="Line height (Use with px or a number that will be multiplied with the current font-size)"></span><span class="tdc-font-ico3" title="Font style"></span><span class="tdc-font-ico4" title="Font weight"></span><span class="tdc-font-ico5" title="Text transform"></span><span class="tdc-font-ico6" title="Letter spacing"></span></div>'},
addFontTitle:function(d,b){return'<div class="tdc-sidebar-font-title '+tdcSidebarPanel._getParameterClasses(d)+'">'+tdcSidebarPanel._getParameterCurrentValue(d,b)+"</div>"},addFontSettings:function(d,b){var e='<div class="tdc-font-manager-wrap '+tdcSidebarPanel._getParameterClasses(d)+'">';e=e+'<div class="tdc-font-manager">'+('<div title="Clear font settings" class="tdc-sidebar-font-reset" data-model_id="'+b.cid+'" data-param_name="'+d.param_name+'">Reset font settings</div>');e+='<div title="Save font settings" class="tdc-sidebar-font-save" data-model_id="'+
b.cid+'" data-param_name="'+d.param_name+'">Save font settings</div>';e+='<div title="Load font settings" class="tdc-sidebar-font-load" data-model_id="'+b.cid+'" data-param_name="'+d.param_name+'">Load font settings</div>';return e+"</div></div>"},addClearfix:function(d,b){return'<div class="clearfix"></div>'},updateTextfieldResponsiveValues:function(d,b,e){"undefined"===typeof window.tdcResponsiveValues[d]?""!==b&&(window.tdcResponsiveValues[d]={},window.tdcResponsiveValues[d][e]={viewportName:b}):
""===b?delete window.tdcResponsiveValues[d][e]:window.tdcResponsiveValues[d][e]=b;b=_.allKeys(window.tdcResponsiveValues[d]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[d].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},updateDropdownResponsiveValues:function(d,b,e){"undefined"===typeof window.tdcResponsiveValues[d]?(window.tdcResponsiveValues[d]={},window.tdcResponsiveValues[d][e]={viewportName:b}):window.tdcResponsiveValues[d][e]=
b;b=_.allKeys(window.tdcResponsiveValues[d]);return 1===b.length&&"all"===b[0]?window.tdcResponsiveValues[d].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},updateCheckboxResponsiveValues:function(d,b,e){"undefined"===typeof window.tdcResponsiveValues[d]?(window.tdcResponsiveValues[d]={},window.tdcResponsiveValues[d][e]={viewportName:b}):window.tdcResponsiveValues[d][e]=b;b=_.allKeys(window.tdcResponsiveValues[d]);return 1===b.length&&"all"===
b[0]?window.tdcResponsiveValues[d].all:1<b.length||1===b.length&&"all"!==b[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},deleteResponsiveValue:function(d,b){"undefined"!==typeof window.tdcResponsiveValues[d]&&delete window.tdcResponsiveValues[d][b];var e=_.allKeys(window.tdcResponsiveValues[d]);return 1===e.length&&"all"===e[0]?window.tdcResponsiveValues[d].all:1<e.length||1===e.length&&"all"!==e[0]?window.btoa(JSON.stringify(window.tdcResponsiveValues[d])):""},deleteResponsiveValues:function(d){"undefined"!==
typeof window.tdcResponsiveValues[d]&&(window.tdcResponsiveValues[d]={})},getCurrentResponsiveValue:function(d,b){if("undefined"!==typeof window.tdcResponsiveValues[d])return window.tdcResponsiveValues[d][b]},setViewportCurrentResponsiveValue:function(d){var b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),tdcSidebar.currentViewportSettings.name),e=d.closest(".tdc-property-responsive");if(e.hasClass("tdc-property-textfield-responsive")){var a="";_.isUndefined(d.data("placeholder"))||(a=
d.data("placeholder"));d.attr("placeholder",a);_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?d.val(""):(d.val(b),d.attr("placeholder",b),e.addClass("tdc-css-inherited"))):(d.val(b),e.removeClass("tdc-css-inherited"))}else if(e.hasClass("tdc-property-checkbox-responsive"))a=e.find(".tdc-inherit-checkbox"),_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?d.removeAttr("checked"):(""===b?d.removeAttr("checked"):
d.attr("checked","checked"),e.addClass("tdc-css-inherited")),a.hide()):(""===b?d.removeAttr("checked"):d.attr("checked","checked"),e.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?a.hide():a.show());else if(e.hasClass("tdc-property-dropdown-responsive"))a=e.find(".tdc-inherit-select"),_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?d.find("option:selected").removeAttr("selected").find("option:first").attr("selected",
"selected"):(d.val(b),e.addClass("tdc-css-inherited")),a.hide()):(d.val(b),e.removeClass("tdc-css-inherited"),"all"===tdcSidebar.currentViewportSettings.name?a.hide():a.show());else if(e.hasClass("tdc-property-range-responsive")){a="";_.isUndefined(d.data("placeholder"))||(a=d.data("placeholder"));var c=d.next('input[type="text"]');c.attr("placeholder",a);_.isUndefined(b)?(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)?(d.val(""),c.val("")):(d.val(b),c.val(b),c.attr("placeholder",
b),e.addClass("tdc-css-inherited"))):(d.val(b),c.val(b),e.removeClass("tdc-css-inherited"))}else if(e.hasClass("tdc-property-range_multiple-responsive")){a=tdcIFrameData.getModel(d.data("model_id"));var l=d.data("param_name"),f=window.tdcAdminSettings.mappedShortcodes[a.attributes.tag];a=[];for(var g=c="",k=0;k<f.params.length;k++)if(l===f.params[k].param_name){l=f.params[k].tdc_values;for(var h in l)l.hasOwnProperty(h)&&(a.push(l[h].unit),""===c||""===g)&&(c=l[h].value,g=l[h].unit);break}_.isUndefined(b)?
(b=tdcSidebarPanel.getCurrentResponsiveValue(d.attr("name"),"all"),_.isUndefined(b)&&(d.data("range_value",c),d.data("range_unit",g),d.val(c),h=e.find('input[type="radio"][data-unit_value="'+g+'"]'),k=h.data("unit"),l=d.data("min_"+k),g=d.data("max_"+k),k=d.data("step_"+k),f=d.get(0),h.prop("checked",!0),f.min=l,f.max=g,f.step=k,f.value=c,h.data("last_value",c),e.find('input[type="text"]').val(c)),"all"===tdcSidebar.currentViewportSettings.name?e.removeClass("tdc-css-inherited"):e.addClass("tdc-css-inherited")):
e.removeClass("tdc-css-inherited");if(!_.isUndefined(b)){c=[];for(k=0;k<a.length&&!(c=b.split(a[k]),1<c.length);k++);c.length&&(c=c[0],g=a[k],d.data("range_value",c),d.data("range_unit",g),d.val(c),h=e.find('input[type="radio"][data-unit_value="'+g+'"]'),k=h.data("unit"),l=d.data("min_"+k),g=d.data("max_"+k),k=d.data("step_"+k),f=d.get(0),h.prop("checked",!0),f.min=l,f.max=g,f.step=k,f.value=c,h.data("last_value",c),e.find('input[type="text"]').val(c))}}}}})();var tdcSidebar;
(function(g,d,b){tdcSidebar={$_sidebar:b,$_editRow:b,$_editColumn:b,$_editInnerRow:b,$_editInnerColumn:b,_currentTabId:b,_currentModel:b,_$currentElement:b,_$currentRow:b,_$currentColumn:b,_$currentInnerRow:b,_$currentInnerColumn:b,$_currentElementHead:b,$_currentElementSiblings:b,$_inspector:b,$_sidebarInfo:b,$_sidebarClosePage:b,$_sidebarBullet:b,$_sidebarClose:b,$_sidebarOpen:b,$_sidebarMenu:b,$_sidebarSearch:b,$_liveIframeWrapper:b,$_iconSelector:b,$_gradient:b,$_gradientLoader:b,$_palette:b,
$_paletteLoader:b,$_fontList:b,_iconSelectorOuterHTML:b,_gradientOuterHTML:b,_paletteOuterHTML:b,_fontListOuterHTML:b,mouseOverSidebar:!1,currentViewportSettings:{name:"all",settings:b},init:function(){tdcSidebar.$_sidebar=g("#tdc-sidebar");tdcSidebar.$_liveIframeWrapper=g("#tdc-live-iframe-wrapper");tdcSidebar.$_editRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-row");tdcSidebar.$_editRow.data("name","Row");tdcSidebar.$_editColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-column");tdcSidebar.$_editColumn.data("name",
"Column");tdcSidebar.$_editInnerRow=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-row");tdcSidebar.$_editInnerRow.data("name","Inner Row");tdcSidebar.$_editInnerColumn=tdcSidebar.$_sidebar.find("#tdc-breadcrumb-inner-column");tdcSidebar.$_editInnerColumn.data("name","Inner Column");tdcSidebar.$_currentElementHead=tdcSidebar.$_sidebar.find(".tdc-current-element-head:first");tdcSidebar.$_currentElementSiblings=tdcSidebar.$_sidebar.find(".tdc-current-element-siblings:first");tdcSidebar.$_inspector=
tdcSidebar.$_sidebar.find(".tdc-inspector:first");tdcSidebar.$_sidebarInfo=tdcSidebar.$_sidebar.find(".tdc-sidebar-info:first");tdcSidebar.$_sidebarClosePage=tdcSidebar.$_sidebar.find(".tdc-close-page:first");tdcSidebar.$_sidebarBullet=tdcSidebar.$_sidebar.find(".tdc-bullet:first");tdcSidebar.$_sidebarClose=tdcSidebar.$_sidebar.find(".tdc-sidebar-close:first");tdcSidebar.$_sidebarOpen=tdcSidebar.$_sidebar.siblings(".tdc-sidebar-open:first");tdcSidebar.$_sidebarMenu=tdcSidebar.$_sidebar.find(".tdc-main-menu:first");
tdcSidebar.$_sidebarSearch=tdcSidebar.$_sidebar.find(".tdc-sidebar-modal-search:first > input");tdcSidebar.$_iconSelector=tdcSidebar.$_sidebar.find("#tdc-icon-selector");tdcSidebar._iconSelectorOuterHTML=tdcSidebar.$_iconSelector.get(0).outerHTML;tdcSidebar.$_gradient=tdcSidebar.$_sidebar.find("#tdc-gradient");tdcSidebar._gradientOuterHTML=tdcSidebar.$_gradient.get(0).outerHTML;tdcSidebar.$_palette=tdcSidebar.$_sidebar.find("#tdc-palette");tdcSidebar._paletteOuterHTML=tdcSidebar.$_palette.get(0).outerHTML;
tdcSidebar._fontListOuterHTML=tdcSidebar.$_sidebar.find("#tdc-font-list").get(0).outerHTML;tdcSidebar.$_editRow.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow()})}).mouseenter(function(b){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentRow)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentRow)}).mouseleave(function(b){tdcMaskUI.hide()});tdcSidebar.$_editColumn.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn()})}).mouseenter(function(b){d.isUndefined(tdcSidebar._$currentElement)||(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentColumn)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentColumn)}).mouseleave(function(b){tdcMaskUI.hide()});tdcSidebar.$_editInnerRow.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow()})}).mouseenter(function(b){d.isUndefined(tdcSidebar._$currentElement)||
(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentInnerRow)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerRow)}).mouseleave(function(b){tdcMaskUI.hide()});tdcSidebar.$_editInnerColumn.click(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn()})}).mouseenter(function(b){d.isUndefined(tdcSidebar._$currentElement)||
(tdcMaskUI.setCurrentElement(tdcSidebar._$currentElement),tdcMaskUI.$wrapper.hide());d.isUndefined(tdcSidebar._$currentInnerColumn)||tdcMaskUI.setCurrentContainer(tdcSidebar._$currentInnerColumn)}).mouseleave(function(b){tdcMaskUI.hide()});g(".tdc-sidebar-element").each(function(b,a){tdcSidebar._bindElement(g(a))});tdcSidebar.$_sidebarClosePage.click(function(e){var a=window.tdcAdminSettings.previousUrl.split("#");tdcMain.getContentModified()?tdConfirm.showModal("Close tagDiv Composer",tdcSidebar,
function(){window.onbeforeunload=null;window.location=a[0];tb_remove()},b,"Unsaved content. Still want to close tagDiv Composer?"):(window.onbeforeunload=null,window.location=a[0])});"1"===window.localStorage.getItem("tdc_live_iframe_wrapper_inline")&&(tdcMain.setSidebarInline(),tdcSidebar.$_sidebar.addClass("tdc-sidebar-inline"),tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-inline").removeClass("tdc-live-iframe-wrapper-full"));tdcSidebar.$_sidebarBullet.click(function(b){tdcSidebar.$_sidebar.toggleClass("tdc-sidebar-inline");
tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")?(tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"),tdcMain.setSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",1)):(tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full"),tdcMain.resetSidebarInline(),window.localStorage.setItem("tdc_live_iframe_wrapper_inline",0))});tdcSidebar.$_sidebarClose.click(function(b){tdcSidebar.$_sidebar.addClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.addClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.setSidebarHidden()});tdcSidebar.$_sidebarOpen.click(function(b){tdcSidebar.$_sidebar.removeClass("tdc-sidebar-hidden");
tdcSidebar.$_sidebarOpen.removeClass("tdc-sidebar-reopen");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-inline")&&tdcSidebar.$_liveIframeWrapper.toggleClass("tdc-live-iframe-wrapper-inline");tdcSidebar.$_sidebar.hasClass("tdc-sidebar-hidden")?tdcSidebar.$_liveIframeWrapper.removeClass("tdc-live-iframe-wrapper-full"):tdcSidebar.$_liveIframeWrapper.hasClass("tdc-live-iframe-wrapper-inline")||tdcSidebar.$_liveIframeWrapper.addClass("tdc-live-iframe-wrapper-full");tdcMain.resetSidebarHidden()});tdcSidebar.$_sidebarMenu.click(function(b){g(this).toggleClass("tdc-window-open");
g(".tdc-sidebar-modal").each(function(a,c){var b=g(c),e=b.data("button_class");b.hasClass("tdc-sidebar-modal-menu")?b.toggleClass("tdc-modal-open"):(b.removeClass("tdc-modal-open"),"undefined"!==typeof e&&""!==e&&(b=g("."+e),b.length&&b.removeClass("tdc-window-open")))})});tdcSidebar.$_sidebarSearch.keyup(function(b){var a=g(this);g(".tdc-sidebar-element").each(function(c,b){var e=g(b);-1===e.find(".tdc-element-id").html().toLowerCase().indexOf(a.val().trim().toLowerCase())?e.hide():e.show()});g(".tdc-sidebar-separator").each(function(a,
b){var c=g(b);c.nextUntil(".tdc-sidebar-separator").is(":visible")?c.show():c.hide()})});tdcSidebar.$_sidebar.on("mouseenter",function(){tdcSidebar.mouseOverSidebar=!0}).on("mouseleave",function(){tdcSidebar.mouseOverSidebar=!1});g("body").css("overflow","hidden");tdcSidebar._sidebarModal();tdcSidebar._liveInspectorTabs();tdcSidebar.updateSavedShortcodes();tdcSidebarPanel.init()},hideWpeditor:function(){g("#tdc-wpeditor").hide()},_activeBreadcrumbItem:function(){var b=tdcSidebar.getCurrentModel(),
a=b.get("tag"),c="<span>"+window.tdcPostSettings.shortcodes[b.get("tag")]+"</span>",l="",f;for(f in window.tdcAdminSettings.mappedShortcodes)if("undefined"!==typeof window.tdcAdminSettings.mappedShortcodes[f].tdc_category&&("Blocks"===window.tdcAdminSettings.mappedShortcodes[f].tdc_category||"Big Grids"===window.tdcAdminSettings.mappedShortcodes[f].tdc_category)&&window.tdcAdminSettings.mappedShortcodes[f].tdc_category===window.tdcAdminSettings.mappedShortcodes[a].tdc_category){var q="";f===a&&(q=
"tdc-selected-option");l+='<li class="'+q+'" data-block_type="'+window.tdcAdminSettings.mappedShortcodes[f].base+'"><div class="tdc-element-ico tdc-ico-'+window.tdcAdminSettings.mappedShortcodes[f].base+'"></div><div class="tdc-element-id">'+window.tdcAdminSettings.mappedShortcodes[f].name+"</div></li>"}""!==l?(l="<ul>"+l+"</ul>",tdcSidebar.$_currentElementHead.addClass("tdc-block-selection")):tdcSidebar.$_currentElementHead.removeClass("tdc-block-selection");switch(a){case "vc_row":tdcSidebar.$_editRow.hide();
tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();var k=tdcSidebar.$_editRow;break;case "vc_column":tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.hide();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();k=tdcSidebar.$_editColumn;break;case "vc_row_inner":tdcSidebar.$_editRow.show();tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.hide();tdcSidebar.$_editInnerColumn.hide();k=tdcSidebar.$_editInnerRow;break;case "vc_column_inner":tdcSidebar.$_editRow.show();
tdcSidebar.$_editColumn.show();tdcSidebar.$_editInnerRow.show();tdcSidebar.$_editInnerColumn.hide();k=tdcSidebar.$_editInnerColumn;break;default:tdcSidebar.$_editRow.show(),tdcSidebar.$_editColumn.show(),k=tdcSidebar.getCurrentElement(),"vc_column_inner"===b.get("parentModel").get("tag")?(tdcSidebar.$_editInnerRow.show(),tdcSidebar.$_editInnerColumn.show()):(tdcSidebar.$_editInnerRow.hide(),tdcSidebar.$_editInnerColumn.hide())}tdcSidebar.$_currentElementHead.html(c);tdcSidebar.$_currentElementSiblings.html(l);
tdcSidebar.$_sidebar.find(".tdc-responsiveness").addClass(a);tdcSidebar.$_currentElementHead.off().mouseenter(function(a){a.preventDefault();k.trigger(a)}).mouseleave(function(a){a.preventDefault();k.trigger(a)}).click(function(a){""!==l&&(tdcSidebar.$_currentElementSiblings.toggleClass("tdc-current-element-siblings-visible"),a=g(this),tdcSidebar.$_currentElementSiblings.hasClass("tdc-current-element-siblings-visible")?a.addClass("tdc-current-element-siblings-button-on"):a.removeClass("tdc-current-element-siblings-button-on"))});
tdcSidebar.$_currentElementSiblings.find("li").off().click(function(a){a=g(this);var c=a.data("block_type"),e=a.children(".tdc-element-id").html();a.siblings(".tdc-selected-option").removeClass("tdc-selected-option");a.addClass("tdc-selected-option");tdcSidebar.$_currentElementHead.html("<span>"+e+"</span>");d.isUndefined(c)||(b.set("tag",c),b.set("rebindToPanel",!0),tdcSidebarController.onUpdate(b));tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});tdcSidebar.$_currentElementSiblings.mouseleave(function(a){tdcSidebar.$_currentElementSiblings.removeClass("tdc-current-element-siblings-visible")});
tdcSidebar.$_inspector.show()},closeModals:function(){g(".tdc-sidebar-modal").each(function(b,a){var c=g(a),e=c.data("button_class");c.removeClass("tdc-modal-open");"undefined"!==typeof e&&""!==e&&(c=g("."+e),c.length&&c.removeClass("tdc-window-open"))})},_sidebarModal:function(){g(".tdc-add-element").click(function(){g(this).toggleClass("tdc-window-open");g(".tdc-sidebar-modal").each(function(b,a){var c=g(a),e=c.data("button_class");c.hasClass("tdc-sidebar-modal-elements")?(c.toggleClass("tdc-modal-open"),
setTimeout(function(){var a=g(".tdc-sidebar-modal-search > input");a.focus();a.val("");g(".tdc-sidebar-element").each(function(a,c){g(c).show()})},100)):(c.removeClass("tdc-modal-open"),"undefined"!==typeof e&&""!==e&&(c=g("."+e),c.length&&c.removeClass("tdc-window-open")))})})},_bindElement:function(b){b.click(function(a){a.preventDefault()}).mousedown(function(a){if(1===a.which){if("td_block_homepage_full_1"===b.data("shortcode-name")){var c=tdcIFrameData.getFirstModelByTag("td_block_homepage_full_1");
if(!d.isUndefined(c)){new tdcNotice.notice("td_block_homepage_full_1 este deja in pagina",!1,!0);return}}a.preventDefault();tdcOperationUI.activeDraggedElement(b);tdcOperationUI.showHelper(a)}}).mouseup(function(a){tdcOperationUI.isSidebarElementDragged()&&(a.preventDefault(),tdcOperationUI.deactiveDraggedElement(),tdcOperationUI.hideHelper())})},_liveInspectorTabs:function(){g("body").on("click",".tdc-tabs a",function(){var b=g(this);tdcSidebar._setCurrentTabId(b.data("tab-id"));b.hasClass("tdc-tab-active")||
(g(".tdc-tabs a").removeClass("tdc-tab-active"),b.addClass("tdc-tab-active"),g(".tdc-tab-content-wrap .tdc-tab-content").removeClass("tdc-tab-content-visible"),b=b.data("tab-id"),g("#"+b).addClass("tdc-tab-content-visible"))});g("body").on("click",".tdc-responsive-buttons > div",function(e){e=g(this);e.addClass("selected");e.siblings().removeClass("selected");var a="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;
var c=tdcAdminIFrameUI.getLiveIframe();if(!d.isUndefined(c))var l=c.contents().find(".tdc-element-selected").offset().top-c.contents().scrollTop();d.isUndefined(tdcCssEditor.timeoutContentWidth)||clearTimeout(tdcCssEditor.timeoutContentWidth);var f="",q=0;e.hasClass("tdc-responsive-all")?(tdcSidebar.currentViewportSettings={name:"all",settings:b},d.isUndefined(c)||c.css("width","100%")):e.hasClass("tdc-responsive-tablet-landscape")?(tdcSidebar.currentViewportSettings={name:"landscape",settings:{limitTop:a[2].limitBottom,
limitBottom:parseInt(a[1].limitBottom)+1}},d.isUndefined(c)||(f=1024)):e.hasClass("tdc-responsive-tablet-portrait")?(tdcSidebar.currentViewportSettings={name:"portrait",settings:{limitTop:a[1].limitBottom,limitBottom:parseInt(a[0].limitBottom)+1}},d.isUndefined(c)||(f=768)):e.hasClass("tdc-responsive-phone")&&(tdcSidebar.currentViewportSettings={name:"phone",settings:{limitTop:a[0].limitBottom,limitBottom:b}},d.isUndefined(c)||(f=375));""!==f&&(c.css("width",f),tdcCssEditor.timeoutContentWidth=setTimeout(function(){var a=
c.contents().width();a!==f&&a<f&&(q=f-a,c.css("width",f+q))},100));"dev"===window.tdcAdminSettings.deployMode&&tdcCssEditor.setMediaInterval(f,q);g(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent());tdcSidebarPanel._hook.doAction("panel_css");if(!d.isUndefined(c)){e=c.contents().find(".tdc-element-selected");if(!e.length)return;e=e.offset().top;e=0<l?window.innerHeight>l?e-l:e-100:e-100;c.contents().scrollTop(e)}"all"===tdcSidebar.currentViewportSettings.name?g(".tdc-tab-content-wrap").removeClass("tdc-viewport-responsive"):
g(".tdc-tab-content-wrap").addClass("tdc-viewport-responsive");g(".tdc-tab-content-wrap .tdc-property-responsive").each(function(){var a=g(this).find("[data-responsive]");tdcSidebarPanel.setViewportCurrentResponsiveValue(a)})})},_setCurrentTabId:function(b){tdcSidebar._currentTabId=b},getCurrentTabId:function(){return tdcSidebar._currentTabId},_setCurrentElement:function(b){tdcSidebar._$currentElement=b},getCurrentElement:function(){return tdcSidebar._$currentElement},_setCurrentRow:function(b){tdcSidebar._$currentRow=
b},getCurrentRow:function(){return tdcSidebar._$currentRow},_setCurrentColumn:function(b){tdcSidebar._$currentColumn=b},getCurrentColumn:function(){return tdcSidebar._$currentColumn},_setCurrentInnerRow:function(b){tdcSidebar._$currentInnerRow=b},getCurrentInnerRow:function(){return tdcSidebar._$currentInnerRow},_setCurrentInnerColumn:function(b){tdcSidebar._$currentInnerColumn=b},getCurrentInnerColumn:function(){return tdcSidebar._$currentInnerColumn},setSidebarInfo:function(b){tdcSidebar.$_sidebarInfo.html(b)},
getCurrentModel:function(){return tdcSidebar._currentModel},setSettings:function(e,a,c,l){if(d.isUndefined(tdcSidebar._currentModel)||d.isUndefined(c)||tdcSidebar._currentModel===c)d.isUndefined(tdcSidebar._currentModel)||tdcSidebar._currentModel.set("current",!1),d.isUndefined(e)?(tdcSidebar._setCurrentRow(b),tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=b):d.has(e,"$currentRow")&&!d.isUndefined(e.$currentRow)?
(tdcSidebar._setCurrentRow(e.$currentRow),d.has(e,"$currentColumn")&&!d.isUndefined(e.$currentColumn)?(tdcSidebar._setCurrentColumn(e.$currentColumn),d.has(e,"$currentInnerRow")&&!d.isUndefined(e.$currentInnerRow)?(tdcSidebar._setCurrentInnerRow(e.$currentInnerRow),d.has(e,"$currentInnerColumn")&&!d.isUndefined(e.$currentInnerColumn)?(tdcSidebar._setCurrentInnerColumn(e.$currentInnerColumn),d.has(e,"$currentElement")&&!d.isUndefined(e.$currentElement)?(tdcSidebar._setCurrentElement(e.$currentElement),
tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentInnerColumn.data("model_id")))):(tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentInnerRow.data("model_id")))):(tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),d.has(e,"$currentElement")&&!d.isUndefined(e.$currentElement)?
(tdcSidebar._setCurrentElement(e.$currentElement),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentElement.data("model_id"))):(tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentColumn.data("model_id"))))):(tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=tdcIFrameData.getModel(e.$currentRow.data("model_id")))):(tdcSidebar._setCurrentRow(b),
tdcSidebar._setCurrentColumn(b),tdcSidebar._setCurrentInnerRow(b),tdcSidebar._setCurrentInnerColumn(b),tdcSidebar._setCurrentElement(b),tdcSidebar._currentModel=b),d.isUndefined(tdcSidebar._currentModel)?tdcSidebarPanel.clearPanel():(tdcSidebar._currentModel.set("current",!0),tdcSidebarPanel.bindPanelToModel(tdcSidebar._currentModel,a),tdcSidebar._activeBreadcrumbItem(),tdcSidebar.closeModals(),d.isUndefined(l)||l())},buildGradient:function(){tdcSidebar.$_gradient=g(tdcSidebar._gradientOuterHTML).appendTo(tdcSidebar.$_sidebar);
tdcSidebar.$_gradient.find("#tdc-gradient-color-picker").tdGradient();return tdcSidebar.$_gradient},buildPalette:function(){tdcSidebar.$_palette=g(tdcSidebar._paletteOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_palette.find("#tdc-palette-color-picker").tdPalette();return tdcSidebar.$_palette},buildFontList:function(){tdcSidebar.$_fontList=g(tdcSidebar._fontListOuterHTML).appendTo(tdcSidebar.$_sidebar);tdcSidebar.$_fontList.html("");"undefined"!==typeof modelId&&"undefined"!==typeof mappedParameter&&
""!==window.tdcAdminSettings.tdcSavings&&"undefined"!==typeof window.tdcAdminSettings.tdcSavings.fonts&&d.map(window.tdcAdminSettings.tdcSavings.fonts,function(b){g('<div class="tdc-font-settings" data-value="'+b.value+'" data-model_id="'+modelId+'" data-param_name="'+mappedParameter+'">'+b.name+'<span class="tdc-font-delete">X</span></div>').appendTo(tdcSidebar.$_fontList)});return tdcSidebar.$_fontList},buildIconSelector:function(){tdcSidebar.$_iconSelector=g(tdcSidebar._iconSelectorOuterHTML).appendTo(tdcSidebar.$_sidebar);
return tdcSidebar.$_iconSelector},updateSavedShortcodes:function(){var b=g(".tdc-sidebar-saved-shortcodes");b.nextAll().remove();if("undefined"!==typeof window.tdcAdminSettings.tdcSavings&&""!==window.tdcAdminSettings.tdcSavings&&d.intersection(d.keys(window.tdcAdminSettings.tdcSavings),d.keys(window.tdcAdminSettings.mappedShortcodes)).length){b.show();var a;d.each(tdcAdminSettings.tdcSavings,function(c,b,e){if(c.length&&"gradients"!==b&&"fonts"!==b){var f="",l="",g=!1,q=!1;"vc_row"===b?(f="tdc-row-temp",
l=' data-shortcode-name="vc_row" ',g=!0):"vc_row_inner"===b?(f="tdc-element-inner-row-temp",l=' data-shortcode-name="vc_row_inner" ',g=!0):(f="tdc-element",l=' data-shortcode-name="'+b+'" ',q=!0);d.isUndefined(window.tdcAdminSettings.mappedShortcodes[b])||(a+='<div class="tdc-sidebar-separator tdc-sidebar-text-separator"><span>'+window.tdcAdminSettings.mappedShortcodes[b].name+"</span></div>",d.each(c,function(c,e,d){d=e="";g&&(d=c.shortcode,d=window.atob(d),d=' data-template-content="'+window.btoa(d)+
'" ');q&&(tdcIFrameData._getPostOriginalContentJSON(),e=tdcIFrameData._getContentJSON(4,window.atob(c.shortcode)),e=' data-start-values="'+window.btoa(JSON.stringify([e[0].shortcode.attrs.named]))+'" ');a+='<div class="tdc-sidebar-element '+f+'" '+l+" "+d+" "+e+'><div class="tdc-element-ico tdc-ico-template"></div><div class="tdc-element-id">'+c.name+' - template</div><div class="tdc-element-delete" data-type="'+b+'" data-name="'+c.name+'"></div></div>'}))}});var c=g(a);c.insertAfter(b);c.find(".tdc-element-delete").on("mousedown",
function(a){a.preventDefault();a.stopImmediatePropagation()}).on("mouseup",function(a){if(1===a.which){var c=g(this);a=c.data("type");c=c.data("name");if("undefined"!==typeof window.tdcAdminSettings.tdcSavings[a])for(var b=window.tdcAdminSettings.tdcSavings[a],e=0;e<b.length;e++)if(b[e].name===c.toString()){b.splice(e,1);b.length||delete window.tdcAdminSettings.tdcSavings[a];tdcUtil.updateTdcSavings();break}return!1}});b.nextAll(".tdc-sidebar-element").each(function(a,c){tdcSidebar._bindElement(g(c))})}else b.hide()}};
tdcSidebar.init()})(jQuery,_);var tdcSidebarController={};
(function(g){tdcSidebarController={updateJobBuffer:{},updateJobTimer:"",_updateJob:function(){this.value=this.oldValue=this.paramName=this.model=""},_getParamMap:function(d,b,e){for(var a=window.tdcAdminSettings.mappedShortcodes[d],c=0;c<a.params.length;c++)if(a.params[c].param_name===b)return a.params[c];a=window.tdcAdminSettings.mappedBlockTemplates[window.tdcAdminSettings.globalBlockTemplate];_.isEmpty(e.block_template_id)||(a=window.tdcAdminSettings.mappedBlockTemplates[e.block_template_id]);for(c=
0;c<a.params.length;c++)if(a.params[c].param_name===b)return a.params[c];if(0===b.indexOf("tds_")){c=b.split("-");var l=e=g;a=g;2>c.length?new tdcNotice.notice('Param "'+b+'" must have up at least one "-" separator',!0,!1):2===c.length?e=c[0]:3===c.length?(e=c[0],a=c[2]):3<c.length&&new tdcNotice.notice('Param "'+b+'" must have up to at most two "-" separator',!0,!1);if(_.isUndefined(l))for(var f in window.tdcAdminSettings.settingsStyle){if(!_.isUndefined(l))break;for(var q in window.tdcAdminSettings.settingsStyle[f])if(q===
e){l=f;break}}_.isUndefined(e)&&(e=window.tdcAdminSettings.globalStyle[l]);f=window.tdcAdminSettings.settingsStyle[l][e];for(c=0;c<f.params.length;c++)if(q=e+"-"+f.params[c].param_name,_.isUndefined(a)||(q+="-"+a),q===b)return d=JSON.parse(JSON.stringify(f.params[c])),d.param_name=e+"-"+d.param_name,_.isUndefined(a)||(d.param_name+="-"+a),d}new tdcNotice.notice("Map value not found for "+d+" "+b,!0,!1);return g},onUpdate:function(d,b,e,a){var c=new tdcSidebarController._updateJob;c.model=d;c.paramName=
b;c.oldValue=e;c.value=a;tdcSidebarController._addToBuffer(c)},_addToBuffer:function(d){var b=d.model.get("blockUid");if(!_.isUndefined(tdcSidebarController.updateJobBuffer[b])&&!_.isUndefined(d.paramName)){var e=d.model.get("attrs"),a=_.clone(e);e=tdcSidebarController._getParamMap(d.model.attributes.tag,d.paramName,e);e.value===d.value?delete a[e.param_name]:a[e.param_name]=d.value;d.model.set("attrs",a,{silent:!0})}tdcSidebarController.updateJobBuffer[b]=d;""!==tdcSidebarController.updateJobTimer&&
clearTimeout(tdcSidebarController.updateJobTimer);tdcSidebarController.updateJobTimer=setTimeout(function(){1<tdcSidebarController.updateJobBuffer.length&&(console.log("Multiple jobs detected - see below"),console.log(tdcSidebarController.updateJobBuffer));for(var a in tdcSidebarController.updateJobBuffer)tdcSidebarController._doUpdateJob(tdcSidebarController.updateJobBuffer[a]);tdcSidebarController.updateJobBuffer={};tdcSidebarController.updateJobTimer=""},500)},_doUpdateJob:function(d){if(!_.isUndefined(d.paramName)){var b=
d.model.get("attrs"),e=_.clone(b);b=tdcSidebarController._getParamMap(d.model.attributes.tag,d.paramName,b);b.value===d.value?delete e[b.param_name]:e[b.param_name]=d.value;d.model.set("attrs",e)}e={error:g,getShortcode:""};tdcIFrameData._checkModelData(d.model,e);if(!_.isUndefined(e.getShortcode)){var a=d.model.get("blockUid"),c=new tdcJobManager.job;c.shortcode=e.getShortcode;c.columns=tdcIFrameData.getColumnNumber(d.model);c.blockUid=a;parseInt(d.model.get("level"),10);d.model.set("bindNewContent",
!0);c.success_callback=function(b){var e=tdcAdminIFrameUI.getIframeWindow();tdcIFrameData.deleteCallback(d.model);d.model.set("blockUid",b.blockUid);_.has(b,"replyHtml")&&(d.model.set("shortcode",c.shortcode),d.model.set("html",b.replyHtml));_.has(b,"replyJsForEval")&&(e.tdcEvalGlobal={oldBlockUid:a},tdcAdminIFrameUI.evalInIframe(b.replyJsForEval))};c.error_callback=function(a,c){tdcDebug.log(c);tdcDebug.log(a)};e=tdcSidebar.getCurrentElement();_.isUndefined(e)&&(e=tdcSidebar.getCurrentInnerColumn(),
_.isUndefined(e)&&(e=tdcSidebar.getCurrentInnerRow(),_.isUndefined(e)&&(e=tdcSidebar.getCurrentColumn(),_.isUndefined(e)&&(e=tdcSidebar.getCurrentRow()))));_.isUndefined(e)||e.addClass("tdc-changed");tdcJobManager.addJob(c)}}}})();var tdcCssEditor={};
(function(g,d,b){tdcCssEditor={_mappedParameter:b,_model:b,_currentCssSettings:b,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(b){var a=g(b.currentTarget),c=a.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(a);g(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");
g(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");g(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(b){var e=g("img",b).attr("src"),l="";"undefined"===typeof e?(e=g(b).attr("src"),l=g(b).attr("class")):l=g("img",b).attr("class");g.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},
dataType:"json",data:{image_class:l,action:"tdc_ajax_get_image_id"}}).done(function(b,f,l){if("success"===f)if(d.isObject(b)&&d.has(b,"errors"))new tdcNotice.notice(b.errors,!0,!1);else{f=a.closest(".tdc-property-wrap");l=f.find(".tdc-css-image-remove");var g=f.find(".tdc-inherit-image");l.removeClass("tdc-hidden-button");"all"===tdcSidebar.currentViewportSettings.name?g.hide():g.show();a.attr("style","background-image: url( '"+e+"') ");a.data("image_link",e);a.data("image_id",b.image_id);window.send_to_editor=
window.original_send_to_editor;window.tb_remove();f.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof a.data("model_id")?tdcCssEditor.saveWidgetForm(a):(b=tdcCssEditor._generateCssAttValue(c),f=tdcIFrameData.getModel(a.data("model_id")),tdcSidebarController.onUpdate(f,a.data("param_name"),"",b))}}).fail(function(a,c,b){})};return!1},tdcCssImageRemoveHandler:function(b){var a=g(b.currentTarget),c=a.closest(".tdc-property-wrap");b=c.find(".tdc-css-image-wrap");var e=c.find(".tdc-inherit-image");
a.addClass("tdc-hidden-button");"all"!==tdcSidebar.currentViewportSettings.name&&e.show();c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcSidebar.currentViewportSettings.name?b.data("image_link",""):b.data("image_link","no_value");e=b.data("model_id");d.isUndefined(e)?tdcCssEditor.saveWidgetForm(a):(a=c.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),e=tdcIFrameData.getModel(e),
tdcSidebarController.onUpdate(e,b.data("param_name"),"",a))},_updateColorField:function(b){var a=b.closest(".tdc-property-wrap"),c=a.data("tdc-for"),e=a.find(".tdc-inherit-color"),f=a.find(".tdc-colorpicker-wrap"),g=b.data("no_value"),k=b.data("default_value");d.isUndefined(g)||1!==g?("all"!==tdcSidebar.currentViewportSettings.name&&e.show(),tdcCssEditor._updateData(b),e={isInherited:!1},c=tdcCssEditor._getSettingsProperty(c,"",e),e.isInherited?(b.attr("placeholder",c),b.val(""),a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),
f.attr("style","background-color: "+tdcCssEditor._getRgba(c))):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(b))):(b.val("no_value"),tdcCssEditor._updateData(b),b.val(""),d.isUndefined(k)||f.attr("style","background-color: "+tdcCssEditor._getRgba(k)),tdcCssEditor._checkDefaultColor(b))},_clearColorPicker:function(b){b=g(b.currentTarget).closest(".tdc-property-wrap");var a=b.closest(".tdc-tab-content"),c=b.find("input"),e=b.find(".tdc-inherit-color");b.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);
"all"!==tdcSidebar.currentViewportSettings.name&&(c.data("no_value",1),c.attr("placeholder",""),e.show());tdcCssEditor._checkDefaultColor(c);a.hasClass("tdc-tab-widget")&&(c.val(""),c.trigger("keyup"))},_showColorPicker:function(b){b=g(b.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===b.val()&&b.val("")},_changeColor:function(b){var a=g(b.currentTarget).closest(".tdc-property-wrap").find("input");""!==a.val()&&a.data("no_value",0);"keyup"===b.type?setTimeout(function(){tdcCssEditor._updateColorField(a)},
100):tdcCssEditor._updateColorField(a)},_inheritSelect:function(e){e=g(e.currentTarget);var a=e.closest(".tdc-property-wrap"),c=a.data("tdc-for");d.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][c])||delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][c];var l={isInherited:!1};c=tdcCssEditor._getSettingsProperty(c,b,l);var f=a.find("select:first");l.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),e.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),
e.show());d.isUndefined(c)?(f.val(f.find("option:first").val()),e.hide()):f.val(c);tdcCssEditor._updateData(f)},_inheritColor:function(e){e=g(e.currentTarget);var a=e.closest(".tdc-property-wrap"),c=a.find("input"),l=a.find(".tdc-colorpicker-wrap"),f=a.data("tdc-for");d.isUndefined(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][f])||delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name][f];c.data("no_value",0);var q={isInherited:!1};f=tdcCssEditor._getSettingsProperty(f,
b,q);q.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),e.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),e.show());d.isUndefined(f)?(c.val(""),e.hide(),tdcCssEditor._updateData(c),tdcCssEditor._checkDefaultColor(c)):(c.val(""),c.attr("placeholder",f),l.attr("style","background-color: "+tdcCssEditor._getRgba(f)),tdcCssEditor._updateData(c))},_inheritImage:function(e){var a=g(e.currentTarget);e=a.closest(".tdc-property-wrap");var c=e.find(".tdc-css-image-wrap"),l=e.find(".tdc-css-image-remove");
e.find(".tdc-inherit-image").hide();l.addClass("tdc-hidden-button");c.data("image_link","");l=c.data("model_id");d.isUndefined(l)?tdcCssEditor.saveWidgetForm(a):(a=e.closest(".tdc-tab-content"),a=tdcCssEditor._generateCssAttValue(a),l=tdcIFrameData.getModel(l),tdcSidebarController.onUpdate(l,c.data("param_name"),"",a));l={isInherited:!1};a=tdcCssEditor._getSettingsProperty("background-image",b,l);l.isInherited?(e.addClass(tdcCssEditor._INHERITED_CSS_CLASS),c.attr("style","background-image: url('"+
a+"'")):c.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(e){e=g(e.currentTarget);var a=e.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,e){tdcCssEditor._currentCssSettings=b;if("undefined"===typeof e)g(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(g("."+a.get(0).className));
else{var c=tdcIFrameData.getModel(e);tdcSidebarController.onUpdate(c,a.data("param_name"),"","");g(".tdc-responsiveness").replaceWith(tdcCssEditor.generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[e,a],"Are you sure you want to clear all the CSS settings of the selected component?")},_changeTextInput:function(b){var a=g(b.currentTarget),c=a.parent(),e=a;c.hasClass("tdc-box-margin")||c.hasClass("tdc-box-border")||c.hasClass("tdc-box-padding")||(e=a.closest(".tdc-property-wrap"));
c=a.val();var f=1;a.hasClass("tdc-css-opacity")&&(f=.01);var q=NaN;switch(b.type){case "keyup":switch(b.keyCode){case 38:g.isNumeric(c)&&(q=parseFloat(c)+f);break;case 40:g.isNumeric(c)&&(q=parseFloat(c)-f)}break;case "mousewheel":b.preventDefault(),b.stopImmediatePropagation(),g.isNumeric(c)&&(q=0<b.originalEvent.deltaY?parseFloat(c)-f:parseFloat(c)+f)}d.isNaN(q)||(1>f&&(q=q.toFixed(2)),a.val(q));tdcCssEditor._updateData(a);c=e.data("tdc-for");b={isInherited:!1};c=tdcCssEditor._getSettingsProperty(c,
"",b);b.isInherited?(a.attr("placeholder",c),a.val(""),e.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):e.removeClass(tdcCssEditor._INHERITED_CSS_CLASS)},_keydownTextInput:function(b){if(38===b.keyCode||40===b.keyCode)return!1},_focusTextInput:function(b){b=g(b.currentTarget);for(var a=b.closest(".tdc-property-wrap"),c=a[0].classList,e=0;e<c.length;e++)0===c[e].indexOf("tdc-el-")&&a.removeClass(c[e]);a.addClass("tdc-el-"+b.data("tdc-for"))},_changeDropDown:function(b){b=g(b.currentTarget);var a=b.closest(".tdc-property-wrap"),
c=a.find(".tdc-inherit-select");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(b);var e=a.data("tdc-for"),f={isInherited:!1};tdcCssEditor._getSettingsProperty(e,"",f);f.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),c.hide()):(a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcSidebar.currentViewportSettings.name?c.hide():0===b[0].selectedIndex?d.isUndefined(tdcCssEditor._currentCssSettings.all)||d.isUndefined(tdcCssEditor._currentCssSettings.all[e])?
c.hide():c.show():c.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var b=g("body");b.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);b.on("focus",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._focusTextInput);b.on("change keyup",".tdc-tab-design .tdc-css-bg-color",
tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);b.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-width",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-width",tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-size",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design .tdc-css-shadow-color",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-h",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-h",
tdcCssEditor._changeTextInput);b.on("keydown",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-shadow-offset-v",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);b.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",
".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._changeTextInput);b.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);b.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);b.on("keydown",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-gradient-direction",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-content-h-align",
tdcCssEditor._changeDropDown);b.on("keydown",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._keydownTextInput);b.on("keyup mousewheel",".tdc-tab-design input.tdc-css-z-index",tdcCssEditor._changeTextInput);b.on("change",".tdc-tab-design .tdc-css-display",tdcCssEditor._changeDropDown);b.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);b.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);b.on("click",".tdc-tab-design .tdc-inherit-color",
tdcCssEditor._inheritColor);b.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);b.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);b.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);b.on("click",".tdc-clear-css-properties",tdcCssEditor._clearCssProperties)},setMediaInterval:function(b,a){var c=g(".tdc-media-interval");c.length||(c=g('<div class="tdc-media-interval"><div class="tdc-media-interval-head"><label></label> - <output></output></div><input type="range" name="mediaIntervalInput" min="20" max="50" step="1" value="30" data-scroll-bar-width="'+
a+'"></div>'),g("body").append(c),c.find("input").on("input",function(a){var b=g(this),e=tdcAdminIFrameUI.getLiveIframe(),l=b.data("scroll-bar-width");c.find("output").html(b.val());tdcCssEditor.timeoutMediaInterval=setTimeout(function(){d.isUndefined(tdcCssEditor.timeoutMediaInterval)||clearTimeout(tdcCssEditor.timeoutMediaInterval);e.css("width",parseInt(b.val())+parseInt(l))},200)}));""===b?c.hide():(c.show(),tdcCssEditor.timeoutIframeHtml=setTimeout(function(){d.isUndefined(tdcCssEditor.timeoutIframeHtml)||
clearTimeout(tdcCssEditor.timeoutIframeHtml);if(!d.isUndefined(tdcSidebar.currentViewportSettings.settings)){var a=c.find("label"),e=c.find("input"),g=c.find("output");a.html(tdcSidebar.currentViewportSettings.name);d.isUndefined(tdcSidebar.currentViewportSettings.settings.limitBottom)?e.attr("min",200):e.attr("min",tdcSidebar.currentViewportSettings.settings.limitBottom);e.attr("max",tdcSidebar.currentViewportSettings.settings.limitTop);e.attr("value",b);g.html(b+"px")}},100))},_updateData:function(b){var a=
b.data("model_id"),c=b.data("param_name"),e=b.closest(".tdc-tab-content");"undefined"===typeof a?tdcCssEditor.saveWidgetForm(b):(b=tdcIFrameData.getModel(a),e=tdcCssEditor._generateCssAttValue(e),tdcSidebarController.onUpdate(b,c,"",e))},saveWidgetForm:function(b){var a=b.closest("form");b=b.closest(".tdc-tab-content");if(a.length){var c=a.find('input[name="id_base"]').val(),e=a.find('input[name="widget-id"]').val().replace(c+"-","");c="'widget-"+c+"["+e+"][tdc_css]'";e=a.find("input[name="+c+"]");
var d=tdcCssEditor._generateCssAttValue(b);b.data("tdc_css",d);e.length?e.val(d):a.append('<input type="hidden" name='+c+' value="'+d+'">')}},addWidgetCssEditor:function(b,a){tdcCssEditor._mappedParameter=b;return tdcCssEditor._generateEditorContent(a)},addComposerCssEditor:function(b,a){tdcCssEditor._mappedParameter=b;tdcCssEditor._model=a;var c=a.get("attrs")[b.param_name];return tdcCssEditor._generateEditorContent(c)},_checkDefaultColor:function(b){var a=b.closest(".tdc-property-wrap").find(".tdc-colorpicker-wrap");
""===b.val()&&(b=b.data("default_value"),d.isUndefined(b)?a.attr("style",""):a.attr("style","background-color: "+tdcCssEditor._getRgba(b)))},_generateEditorContent:function(e){if(d.isEmpty(e))tdcCssEditor._currentCssSettings=b;else try{var a=JSON.parse(window.atob(e));tdcDebug.log(a);d.isObject(a)?tdcCssEditor._currentCssSettings=a:tdcCssEditor._currentCssSettings=b}catch(c){tdcCssEditor._currentCssSettings=b,new tdcNotice.notice(c.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){g(".tdc-css-image-wrap").each(function(a,
e){var c=g(e),l=c.closest(".tdc-property-wrap"),k=l.find(".tdc-css-image-remove"),h=l.find(".tdc-inherit-image"),m={isInherited:!1},n=tdcCssEditor._getSettingsProperty("background-image",b,m);m.isInherited?l.addClass(tdcCssEditor._INHERITED_CSS_CLASS):l.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);d.isUndefined(n)?(k.addClass("tdc-hidden-button"),h.hide()):("no_value"===n?k.addClass("tdc-hidden-button"):(k.removeClass("tdc-hidden-button"),c.attr("style",'background-image: url("'+n+'")')),"all"!==
tdcSidebar.currentViewportSettings.name&&h.show());c.data("image_link",n)});g(".tdc-inherit").each(function(a,e){var c=g(e),l=c.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||l.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))c.hide();else{var k=l.data("tdc-for");l={isInherited:!1};k=tdcCssEditor._getSettingsProperty(k,b,l);l.isInherited?c.hide():d.isUndefined(k)||c.show()}})});return tdcCssEditor.generateEditorResponsiveContent()},_cleanCss:function(e,a){if("undefined"===
typeof a)return b;if("no_value"===a)return a;if("background-image"===e){var c=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(a);return d.isEmpty(c)?"":c[2]}a=a.toLowerCase();a=a.replace(/!important|px/g,"");return a.trim()},_getDataNoValue:function(b){var a="";"no_value"===b&&(a=' data-no_value="1" ');return a},callbackColorPicker:function(){g(".tdc-tab-design .tdc-property-colorpicker").each(function(){g("#tdc-palette-color-picker").tdPalette();var b=g(this),a=b.find("input"),c=b.closest(".tdc-property-wrap");
b=b.find(".tdc-colorpicker-wrap");d.isUndefined(a.val())||""===a.val()||b.attr("style","background: "+a.val());c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?""!==a.attr("placeholder")&&b.attr("style","background-color: "+tdcCssEditor._getRgba(a.attr("placeholder"))):("no_value"===a.val()&&a.val(""),tdcCssEditor._checkDefaultColor(a))})},generateEditorResponsiveContent:function(){function e(){return k={isInherited:!1}}function a(a){return"all"!==tdcSidebar.currentViewportSettings.name?'placeholder="'+
a+'"':""}function c(){return k.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function l(a,b){var g=tdcCssEditor._getSettingsProperty(a,b,e()),l="-",h="";k.isInherited&&(l=g,g="");d.isUndefined(q)||"margin-left"!==a&&"margin-right"!==a||(h=q.get("tag"),h="vc_column"===h||"vc_column_inner"===h?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+a+'" name="" type="text" value="'+g+'" class="tdc-css-box-input tdc-css-box-input-'+a+c()+h+'" title="Css '+a+'" placeholder="'+l+
'" '+tdcSidebarPanel._getParamterDataAtts(f,q)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");var f=tdcCssEditor._mappedParameter,q=tdcCssEditor._model,k={isInherited:!1};var h='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(f)+'">');h=h+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+l("margin-top","");h+=l("margin-right","");h+=l("margin-bottom","");h+=l("margin-left","");h=h+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+
l("border-top-width","");h+=l("border-right-width","");h+=l("border-bottom-width","");h+=l("border-left-width","");h=h+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+l("padding-top","");h+=l("padding-right","");h+=l("padding-bottom","");h+=l("padding-left","");h+="</div></div></div></div>";var m=tdcCssEditor._getSettingsProperty("border-style",b,e());h+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+c()+'" data-tdc-for="border-style">';h=h+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-border-style" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="">');h+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},
{value:"inherit",display:"Inherit"}],m);h+="</select></div></div>";m=d.uniqueId();var n=tdcCssEditor._getSettingsProperty("border-color","",e()),p="";k.isInherited&&(p=n,n="");h+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+c()+'" data-tdc-for="border-color">';h=h+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-border-color" '+tdcSidebarPanel._getParamterDataAtts(f,q)+tdcCssEditor._getDataNoValue(n)+' data-default_value="#888888" id="'+m+'" name="" type="text" '+a(p)+' value="'+n+'"/>');h+="</div></div>";m=tdcCssEditor._getSettingsProperty("border-radius","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+c()+'" data-tdc-for="border-radius">';h=h+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';m=tdcCssEditor._getSettingsProperty("width","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-width tdc-textfield-small'+c()+'" data-tdc-for="width">';h=h+'<div class="tdc-property-title"><span title="Css shadow-size">Width</span></div><div class="tdc-property">'+
('<input class="tdc-css-width" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small "></div>';m=tdcCssEditor._getSettingsProperty("shadow-size","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+c()+'" data-tdc-for="shadow-size">';h=h+'<div class="tdc-property-title"><span title="Css shadow-size">Shadow size</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-size" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+="</div></div>";m=d.uniqueId();n=tdcCssEditor._getSettingsProperty("shadow-color","",e());p="";k.isInherited&&(p=n,n="");h+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-shadow-color'+c()+'" data-tdc-for="shadow-color">';h=h+'<div class="tdc-property-title"><span title="Css shadow-color">Shadow color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-shadow-color" '+tdcSidebarPanel._getParamterDataAtts(f,q)+tdcCssEditor._getDataNoValue(n)+' data-default_value="#888888" id="'+m+'" name="" type="text" '+a(p)+' value="'+n+'"/>');h+="</div></div>";m=tdcCssEditor._getSettingsProperty("shadow-offset-h","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+c()+'" data-tdc-for="shadow-offset-h">';h=h+'<div class="tdc-property-title"><span title="Css shadow-offset-h">Shadow offset H</span></div><div class="tdc-property">'+
('<input class="tdc-css-shadow-offset-h" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+="</div></div>";m=tdcCssEditor._getSettingsProperty("shadow-offset-v","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-shadow-size tdc-textfield-small'+c()+'" data-tdc-for="shadow-offset-v">';h=h+'<div class="tdc-property-title"><span title="Css shadow-offset-v">Shadow offset V</span></div><div class="tdc-property">'+('<input class="tdc-css-shadow-offset-v" '+
tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';m=d.uniqueId();n=tdcCssEditor._getSettingsProperty("background-color","",e());p="";k.isInherited&&(p=n,n="");h+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+c()+'" data-tdc-for="background-color">';h=h+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(f,q)+tdcCssEditor._getDataNoValue(n)+' id="'+m+'" name="" type="text" '+a(p)+' value="'+n+'"/>');h+="</div></div>";tdcCssEditor._getSettingsProperty("background-image",b,e());h+='<div class="tdc-property-wrap tdc-property-attach_image'+c()+'">';h=h+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+
('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(f,q)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");h+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';m=tdcCssEditor._getSettingsProperty("background-style",b,e());h+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+c()+'" data-tdc-for="background-style">';h=h+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-style" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="">');h+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],m);h+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("background-position",b,e());h+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+c()+'" data-tdc-for="background-position">';h=h+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="">');h+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],m);h+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("opacity","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+c()+'" data-tdc-for="opacity">';h=h+'<div class="tdc-property-title"><span title="Css background-image opacity">Background opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');
h+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';m=d.uniqueId();n=tdcCssEditor._getSettingsProperty("color-1-overlay","",e());p="";k.isInherited&&(p=n,n="");h+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+c()+'" data-tdc-for="color-1-overlay">';h=h+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(f,q)+tdcCssEditor._getDataNoValue(n)+' id="'+m+'" name="" type="text" '+a(p)+' value="'+n+'"/>');h+="</div></div>";m=d.uniqueId();n=tdcCssEditor._getSettingsProperty("color-2-overlay","",e());p="";k.isInherited&&(p=n,n="");h+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+c()+'" data-tdc-for="color-2-overlay">';h=h+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property"><div class="tdc-colorpicker-wrap"></div>'+
('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(f,q)+tdcCssEditor._getDataNoValue(n)+' id="'+m+'" name="" type="text" '+a(p)+' value="'+n+'"/>');h+="</div></div>";m=tdcCssEditor._getSettingsProperty("gradient-direction","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+c()+'" data-tdc-for="gradient-direction">';h=h+'<div class="tdc-property-title"><span title="Css gradient direction">Gradient direction</span></div><div class="tdc-property">'+
('<input class="tdc-css-gradient-direction" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator tdc-separator-small"></div>';m=tdcCssEditor._getSettingsProperty("content-h-align",b,e());h+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+c()+'" data-tdc-for="content-h-align">';h=h+'<div class="tdc-property-title"><span title="Css content horizontal align">H. align<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-content-h-align" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="">');h+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Default"},{value:"content-horiz-left",display:"Left"},{value:"content-horiz-center",display:"Center"},{value:"content-horiz-right",display:"Right"}],m);h+="</select></div></div>";m=tdcCssEditor._getSettingsProperty("z-index","",e());n="";k.isInherited&&(n=m,m="");h+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+c()+'" data-tdc-for="z-index">';
h=h+'<div class="tdc-property-title"><span title="Z-index">Z-index</span></div><div class="tdc-property">'+('<input class="tdc-css-z-index" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="" type="text" '+a(n)+' value="'+m+'"/>');h+="</div></div>";m=tdcCssEditor._getSettingsPropertyFromCssSettings("display",b);h+='<div class="tdc-property-wrap tdc-display tdc-dropdown-big'+c()+'" data-tdc-for="display">';h=h+'<div class="tdc-property-title"><span title="Css content horizontal align">Display</span></div><div class="tdc-property">'+
('<select class="tdc-css-display" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' name="">');h+=tdcCssEditor._generateDropdownOptions([{value:"",display:"Show"},{value:"none",display:"Hidden"},{value:"inline",display:"Inline"},{value:"inline-block",display:"Inline-block"},{value:"block",display:"Block"},{value:"table",display:"Table"},{value:"inline-table",display:"Inline-table"}],m);h=h+'</select></div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+
('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(f,q)+' title="Clear all tab css settings">Clear CSS settings</div>');h+="</div>";tdcSidebarPanel._hook.addAction("panel_css",tdcCssEditor.callbackColorPicker);tdcSidebarPanel._hook.addAction("panel_css",function(){g(".tdc-inherit").each(function(a,c){var e=g(c),f=e.closest(".tdc-property-wrap");if("all"===tdcSidebar.currentViewportSettings.name||f.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))e.hide();else{var l=f.data("tdc-for");
f={isInherited:!1};l=tdcCssEditor._getSettingsProperty(l,b,f);f.isInherited?e.hide():d.isUndefined(l)||e.show()}})});return h},_getAvailableViewportSetting:function(b,a,c){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(b){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]&&(d="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[b]?d=b:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==
typeof d){if("undefined"!==typeof tdcCssEditor._currentCssSettings[d][a])return tdcSidebar.currentViewportSettings.name!==d&&(c.isInherited=!0,tdcDebug.log(a)),tdcCssEditor._cleanCss(a,tdcCssEditor._currentCssSettings[d][a]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",a,c)}}},_getSettingsPropertyFromCssSettings:function(b,a){var c;if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d=tdcSidebar.currentViewportSettings.name;if("undefined"!==typeof tdcCssEditor._currentCssSettings[d]&&
"undefined"!==typeof tdcCssEditor._currentCssSettings[d][b])return tdcSidebar.currentViewportSettings.name!==d&&tdcDebug.log(b),tdcCssEditor._cleanCss(b,tdcCssEditor._currentCssSettings[d][b])}"undefined"===typeof c&&"undefined"!==typeof a&&(c=a);return c},_getSettingsProperty:function(b,a,c){var d;"undefined"===typeof c&&(c={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcSidebar.currentViewportSettings.name,b,c));"undefined"===
typeof d&&"undefined"!==typeof a&&(d=a);return d},_generateDropdownOptions:function(b,a,c){for(var e=[],f,g=!1,k=0,h=0;h<b.length;h++)d.isUndefined(c)||c!==b[h].value||(k=h),f="",d.isUndefined(a)||a!==b[h].value||(f='selected="selected"',g=!0),e.push("<option "+f+' value="'+b[h].value+'">'+b[h].display+"</option>");g||(e[k]='<option selected="selected" value="'+b[k].value+'">'+b[k].display+"</option>");return e.join("")},_generateCssAttValue:function(b){var a={},c=b.find(".tdc-css-box-input-margin-top").val().trim(),
e=b.find(".tdc-css-box-input-margin-right").val().trim(),f=b.find(".tdc-css-box-input-margin-bottom").val().trim(),g=b.find(".tdc-css-box-input-margin-left").val().trim(),k=b.find(".tdc-css-box-input-border-top-width").val().trim(),h=b.find(".tdc-css-box-input-border-right-width").val().trim(),m=b.find(".tdc-css-box-input-border-bottom-width").val().trim(),n=b.find(".tdc-css-box-input-border-left-width").val().trim(),p=b.find(".tdc-css-box-input-padding-top").val().trim(),t=b.find(".tdc-css-box-input-padding-right").val().trim(),
v=b.find(".tdc-css-box-input-padding-bottom").val().trim(),u=b.find(".tdc-css-box-input-padding-left").val().trim(),r=b.find(".tdc-css-border-radius").val().trim(),w=b.find(".tdc-css-width").val().trim(),A=b.find(".tdc-css-shadow-size").val().trim(),x=b.find(".tdc-css-shadow-offset-h").val().trim(),z=b.find(".tdc-css-shadow-offset-v").val().trim(),y=b.find(".tdc-css-opacity").val().trim(),B=b.find(".tdc-css-gradient-direction").val().trim(),C=b.find(".tdc-css-z-index").val().trim();""!==c&&(a["margin-top"]=
c);""!==e&&(a["margin-right"]=e);""!==f&&(a["margin-bottom"]=f);""!==g&&(a["margin-left"]=g);""!==k&&(a["border-top-width"]=k);""!==h&&(a["border-right-width"]=h);""!==m&&(a["border-bottom-width"]=m);""!==n&&(a["border-left-width"]=n);""!==p&&(a["padding-top"]=p);""!==t&&(a["padding-right"]=t);""!==v&&(a["padding-bottom"]=v);""!==u&&(a["padding-left"]=u);c=b.find(".tdc-css-border-style");e=c.val().trim();""===e||c.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["border-style"]=
e);c=b.find(".tdc-css-border-color");e=c.val().trim();""!==e?a["border-color"]=e:(c=c.data("no_value"),d.isUndefined(c)||1!==c||(a["border-color"]="no_value"));""!==r&&(a["border-radius"]=r);""!==w&&(a.width=w);""!==A&&(a["shadow-size"]=A);r=b.find(".tdc-css-shadow-color");w=r.val().trim();""!==w?a["shadow-color"]=w:(r=r.data("no_value"),d.isUndefined(r)||1!==r||(a["shadow-color"]="no_value"));""!==x&&(a["shadow-offset-h"]=x);""!==z&&(a["shadow-offset-v"]=z);x=b.find(".tdc-css-bg-color");z=x.val().trim();
""!==z?a["background-color"]=z:(x=x.data("no_value"),d.isUndefined(x)||1!==x||(a["background-color"]="no_value"));x=b.find(".tdc-css-bg-image");x.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(x=x.data("image_link"),d.isUndefined(x)||("no_value"===x?a["background-image"]="no_value":""!==x&&(a["background-image"]='url("'+x+'")')));x=b.find(".tdc-css-bg-style");z=x.val().trim();""===z||x.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["background-style"]=
z);x=b.find(".tdc-css-bg-position");z=x.val().trim();""===z||x.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["background-position"]=z);""!==y&&(a.opacity=y);y=b.find(".tdc-css-color-1-overlay");x=y.val().trim();""!==x?a["color-1-overlay"]=x:(y=y.data("no_value"),d.isUndefined(y)||1!==y||(a["color-1-overlay"]="no_value"));y=b.find(".tdc-css-color-2-overlay");x=y.val().trim();""!==x?a["color-2-overlay"]=x:(y=y.data("no_value"),d.isUndefined(y)||1!==y||(a["color-2-overlay"]=
"no_value"));""!==B&&(a["gradient-direction"]=B);""!==C&&(a["z-index"]=C);B=b.find(".tdc-css-content-h-align");C=B.val().trim();""===C||B.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(a["content-h-align"]=C);b=b.find(".tdc-css-display");a.display=b.val().trim();d.isUndefined(tdcCssEditor._currentCssSettings)&&(tdcCssEditor._currentCssSettings={});d.isUndefined(a["border-style"])||"solid"!==a["border-style"]||("all"===tdcSidebar.currentViewportSettings.name||d.isUndefined(tdcCssEditor._currentCssSettings.all)||
d.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete a["border-style"];d.isUndefined(a["background-style"])||"cover"!==a["background-style"]||("all"===tdcSidebar.currentViewportSettings.name||d.isUndefined(tdcCssEditor._currentCssSettings.all)||d.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&delete a["background-style"];d.isUndefined(a["background-position"])||"center top"!==a["background-position"]||("all"===tdcSidebar.currentViewportSettings.name||
d.isUndefined(tdcCssEditor._currentCssSettings.all)||d.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&delete a["background-position"];tdcDebug.log(a);d.isEmpty(a)?(delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"],delete tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name]=
a,d.isUndefined(tdcSidebar.currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_max_width"]=tdcSidebar.currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcSidebar.currentViewportSettings.name+"_min_width"]=tdcSidebar.currentViewportSettings.settings.limitBottom));tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return d.isEmpty(tdcCssEditor._currentCssSettings)?
"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(b){return-1!==b.indexOf("rgb")?b:(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?"rgb("+parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16)+")":""}}})(jQuery,_);
(function(g,d,b,e){g.widget("wp.wpColorPicker",{options:{defaultColor:!1,change:!1,clear:!1,hide:!0,palettes:!0,width:255,mode:"hsv"},_create:function(){if(g.support.iris){var a=this,b=a.element;g.extend(a.options,b.data());a.close=g.proxy(a.close,a);a.initialValue=b.val();b.addClass("wp-color-picker").hide().wrap('<div class="wp-picker-container" />');a.wrap=b.parent();a.toggler=g('<a tabindex="0" class="wp-color-result" />').insertBefore(b).css({backgroundColor:a.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",
wpColorPickerL10n.current);a.pickerContainer=g('<div class="wp-picker-holder" />').insertAfter(b);a.button=g('<input type="button" class="button button-small hidden" />');a.options.defaultColor?a.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):a.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear);b.wrap('<span class="wp-picker-input-wrap" />').after(a.button);b.iris({target:a.pickerContainer,hide:a.options.hide,width:a.options.width,mode:a.options.mode,palettes:a.options.palettes,
change:function(b,c){a.toggler.css({backgroundColor:c.color.toString()});g.isFunction(a.options.change)&&a.options.change.call(this,b,c)}});b.val(a.initialValue);a._addListeners();a.options.hide||a.toggler.click()}},_addListeners:function(){var a=this;a.wrap.on("click.wpcolorpicker",function(a){a.stopPropagation()});a.toggler.click(function(){a.toggler.hasClass("wp-picker-open")?a.close():a.open()});a.element.change(function(b){var c=g(this).val();if(""===c||"#"===c)a.toggler.css("backgroundColor",
""),g.isFunction(a.options.clear)&&a.options.clear.call(this,b)});a.toggler.on("keyup",function(b){if(13===b.keyCode||32===b.keyCode)b.preventDefault(),a.toggler.trigger("click").next().focus()});a.button.click(function(b){var c=g(this);c.hasClass("wp-picker-clear")?(a.element.val(""),a.toggler.css("backgroundColor",""),g.isFunction(a.options.clear)&&a.options.clear.call(this,b)):c.hasClass("wp-picker-default")&&a.element.val(a.options.defaultColor).change()})},open:function(){this.element.show().iris("toggle").focus();
this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");g("body").trigger("click.wpcolorpicker").on("click.wpcolorpicker",this.close)},close:function(){this.element.hide();this.element.iris("instance")&&this.element.iris("toggle");this.button.addClass("hidden");this.wrap.removeClass("wp-picker-active");this.toggler.removeClass("wp-picker-open");g("body").off("click.wpcolorpicker",this.close)},color:function(a){if(a===e)return this.element.iris("option",
"color");this.element.iris("option","color",a)},defaultColor:function(a){if(a===e)return this.options.defaultColor;this.options.defaultColor=a}});typeof Color.fn.toString!==e&&(Color.fn.toString=function(){if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(6>a.length)for(var b=6-a.length-1;0<=b;b--)a="0"+a;return"#"+a});g.cs_ParseColorValue=function(a){a=a.replace(/\s+/g,"");var b=-1!==a.indexOf("rgba")?parseFloat(100*
a.replace(/^.*,(.+)\)/,"$1")):100;return{value:a,alpha:b,rgba:100>b?!0:!1}};g.widget("wp.tdGradientColorPicker",g.wp.wpColorPicker,{open_gradient:function(a){this.element.show().iris("show").focus();this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.wrap.find(".tdc-gradient-result-percentage").html("");this.element.tdGradient().get(0).init(a)}});g.widget("wp.tdPaletteColorPicker",g.wp.wpColorPicker,{open_palette:function(a){this.element.show().iris("show").focus();
this.button.removeClass("hidden");this.wrap.addClass("wp-picker-active");this.toggler.addClass("wp-picker-open");this.element.tdPalette().get(0).init(a)}});"undefined"===typeof g.fn.tdGradient&&(g.fn.tdGradient=function(){return this.each(function(){var a=this,b=g(this);a.$this=b;if(!1!==b.data("rgba")){var l=g.cs_ParseColorValue(b.val());b.tdGradientColorPicker({clear:function(){b.trigger("keyup")},change:function(c,d){var e=d.color.toString();b.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",
e);b.val(e).trigger("change");a.triggerSelection?a.setColor(e,!0):a.setColor(e)},create:function(){var c=b.data("a8cIris"),q=b.closest(".wp-picker-container"),k=g('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(q.find(".wp-picker-holder")),h=k.find(".cs-alpha-slider"),m=k.find(".cs-alpha-text"),n=k.find(".cs-alpha-slider-offset"),p=g('<div class="tdc-gradient-result-wrap"></div>').prependTo(q);
p=g('<div class="tdc-gradient-result"><div class="tdc-gradient-color tdc-gradient-left-color"></div><div class="tdc-gradient-color tdc-gradient-right-color"></div></div>').prependTo(p);g('<div class="tdc-gradient-degree-label">deg.</div><input class="tdc-gradient-degree" placeholder="0">').appendTo(q.find(".wp-picker-input-wrap"));g('<div class="tdc-gradient-result-labels"><div class="tdc-gradient-result-label">Solid color</div><div class="tdc-gradient-result-label tdc-gradient-result-percentage"></div><div class="tdc-gradient-result-label">Gradient</div></div>').prependTo(q);
g('<div class="tdc-gradient-save">Save Gradient</div>').appendTo(q);var t=g('<div class="tdc-gradient-presets">Gradient presets</div>').appendTo(q),v=g('<div class="tdc-gradient-values-wrapper"></div>').appendTo(q);v=g('<div class="tdc-gradient-values"></div>').appendTo(v);if("undefined"!==typeof d.tdcAdminSettings.tdcSavings.gradients&&d.tdcAdminSettings.tdcSavings.gradients.length)for(var u=!1,r=d.tdcAdminSettings.tdcSavings.gradients.length-1;0<=r;r--){var w=d.tdcAdminSettings.tdcSavings.gradients[r];
try{var A=JSON.parse(d.atob(w));"undefined"!==typeof A.css&&(u=!0,g('<div class="tdc-gradient-value" style="'+A.css+'" data-gradient="'+w+'"><div class="tdc-gradient-value-delete"></div></div>').appendTo(v))}catch(x){}}u||t.hide();a.$container=q;a.$gradientResult=p;h.slider({slide:function(a,d){var e=parseFloat(d.value/100);c._color._alpha=e;b.tdGradientColorPicker("color",c._color.toString());m.text(1>e?e:"")},create:function(){var d=parseFloat(l.alpha/100);m.text(1>d?d:"");n.css("background-color",
l.value);q.on("click",".wp-picker-clear",function(){c._color._alpha=1;m.text("");h.slider("option","value",100).trigger("slide");a.triggerSelection?a.setColor(e,!0):a.setColor(e)});q.on("click",".wp-picker-default",function(){var a=g.cs_ParseColorValue(b.data("default-color")),d=parseFloat(a.alpha/100);c._color._alpha=d;m.text(1>d?d:"");h.slider("option","value",a.alpha).trigger("slide")});q.on("click",".wp-color-result",function(a){k.toggle()});g("body").on("click.wpcolorpicker",function(){k.hide()});
q.on("change keyup",".tdc-gradient-degree",function(b){b=g(this);a.degree=b.val().trim();a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()})},value:l.alpha,step:1,min:0,max:100})}})}else b.tdGradientColorPicker({clear:function(){b.trigger("keyup")},change:function(a,c){b.val(c.color.toString()).trigger("change")}});"undefined"===typeof a.setColor&&(a.setColor=function(b,c){"undefined"===typeof a.currentColor&&(a.currentColor="left",a.$gradientResult.find(".tdc-gradient-selected-color").remove(),
a.$container.find(".tdc-gradient-left-color").html('<span class="tdc-gradient-selected-color"></span>'),a.color1=b);switch(a.currentColor){case "left":a.color1=b;"undefined"!==typeof b||"undefined"===typeof a.color2||a.mixedColors.length||(a.color1=a.color2,a.color2=b,a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a._showColor(a.color1));break;case "right":a.color2=b;"undefined"!==
typeof b||"undefined"===typeof a.color1||a.mixedColors.length||(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),a.currentColor="left",a._showColor(a.color1));break;case "mixed":a._setMixedColor(b),"undefined"===typeof b&&"undefined"!==typeof a.color1&&(a.$gradientResult.find(".tdc-gradient-selected-color").remove(),a.$container.find(".tdc-gradient-left-color").html('<div class="tdc-gradient-selected-color"></div>'),
a.currentColor="left",a._showColor(a.color1))}var d=a.$container.find(".tdc-gradient-degree");"undefined"===typeof a.degree?d.val(""):d.val(a.degree);a.mixedColors=a._getMixedColors();a._updateGradient();!0===c&&a._saveValue()},a._showColor=function(b){a.triggerSelection=!1;a.$this.tdGradientColorPicker("color",b);a.triggerSelection=!0;b=g.cs_ParseColorValue(b);var c=parseFloat(b.alpha/100);c=1>c?c:"";a.$container.find(".cs-alpha-text").text(c);a.$container.find(".cs-alpha-slider-offset").css("background-color",
b.value);a.$container.find(".cs-alpha-slider").slider("option","value",b.alpha).trigger("slide")},a.$container.on("mousedown",".tdc-gradient-color",function(b){b.stopImmediatePropagation();var c=g(this),d=a.$container.find(".tdc-gradient-result-percentage");a.$gradientResult.find(".tdc-gradient-selected-color").remove();c.html('<div class="tdc-gradient-selected-color"></div>');c.hasClass("tdc-gradient-mix-color")?(c.addClass("tdc-gradient-current-mix"),a.eventOffsetX=b.offsetX,d.html(Math.round(100-
c.data("percentage"))+"%")):d.html("");b=g(b.currentTarget);if(b.hasClass("tdc-gradient-left-color")){if(a.currentColor="left","undefined"!==typeof a.color1)var e=a.color1}else b.hasClass("tdc-gradient-right-color")?(a.currentColor="right","undefined"!==typeof a.color2&&(e=a.color2)):(a.currentColor="mixed",b=a._getCurrentMixedColor(),"undefined"!==typeof b&&(e=b.color));"undefined"!==typeof e&&a._showColor(e)}),a.$container.on("mousedown",".tdc-gradient-result",function(b){if(b.target===b.currentTarget){var c=
g(b.target);c.find(".tdc-gradient-selected-color").remove();var d=g('<div class="tdc-gradient-mix-color tdc-gradient-color"><div class="tdc-gradient-selected-color"></div></div>').appendTo(c);b=b.pageX-c.offset().left-d.outerWidth(!0)/2;c=Math.round(100-100*b/(c.width()-d.outerWidth(!0)));d.css("left",b);d.data("percentage",c);a.currentColor="mixed"}}),a.$container.on("mouseup",".tdc-gradient-mix-color",function(b){g(this).removeClass("tdc-gradient-current-mix");a.eventOffsetX=e}),a.$container.on("mousemove",
".tdc-gradient-result",function(b){var c=a.$container.find(".tdc-gradient-result-percentage"),d=a.$container.find(".tdc-gradient-result"),e=d.find(".tdc-gradient-right-color"),f=d.find(".tdc-gradient-current-mix");if(f.length){var g=0;"undefined"!==typeof a.eventOffsetX&&(g=a.eventOffsetX);b=b.pageX-d.offset().left-f.width()/2-g;g=100*b/(d.width()-f.outerWidth(!0));0>g?b=g=0:100<g&&(g=100,b=d.width()-e.outerWidth(!0));c.html(Math.round(g)+"%");f.css("left",b);f.data("percentage",Math.round(100-g));
a.mixedColors=a._getMixedColors();a._updateGradient();a._saveValue()}}),a._getCurrentMixedColor=function(){var b=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color"),c;b.length&&(c={color:b.parent().data("color"),percentage:b.parent().data("percentage")});return c},a._setMixedColor=function(b){var c=a.$container.find(".tdc-gradient-result-percentage"),d=a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color > .tdc-gradient-selected-color");
d.length&&("undefined"===typeof b?(d.parent().remove(),c.html("")):d.parent().data("color",b))},a._getMixedColors=function(){var b=[];a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color").each(function(){var a=g(this),c=a.data("color");a=a.data("percentage");b.push({color:c,percentage:a})});b.sort(function(a,b){return a.percentage-b.percentage});return b},a._updateGradient=function(){if("undefined"!==typeof a.color1&&"undefined"!==typeof a.color2&&a.color1!==a.color2){var b="",
c="",d=c="",l=["-webkit-linear-gradient","linear-gradient"];c="undefined"!==typeof a.degree&&""!==a.degree.trim()?a.degree+"deg,":"0deg,";for(var m=0;m<l.length;m++){var n="";if("undefined"!==typeof a.mixedColors)for(var p=0;p<a.mixedColors.length;p++){var t="";"undefined"!==typeof a.mixedColors[p].percentage&&(t=a.mixedColors[p].percentage+"%");"undefined"!==typeof a.mixedColors[p].color&&(n+=a.mixedColors[p].color+" "+t+",")}b+="background: "+l[m]+"("+c+a.color2+","+n+a.color1+");";d+="background: "+
l[m]+"( -90deg,"+a.color2+","+n+a.color1+");"}c=c+a.color2+","+n+a.color1;a.result={type:"gradient",color1:a.color1,color2:a.color2,mixedColors:a.mixedColors,degree:a.degree,css:b,cssParams:c};a.$gradientResult.attr("style",d)}else if("undefined"!==typeof a.color1||"undefined"!==typeof a.color2){b="color1";var v="color2";"undefined"!==typeof a.color2&&(b="color2",v="color1");if(a.mixedColors.length){var u=a.mixedColors[0];"undefined"!==typeof a.color2&&(u=a.mixedColors[a.mixedColors.length-1]);b=
a.$container.find(".tdc-gradient-result").find(".tdc-gradient-mix-color");g.each(b,function(){var b=g(this);u.color===b.data("color")&&u.percentage===b.data("percentage")&&(a[v]=b.data("color"),b.remove())});a.mixedColors=a._getMixedColors();a._updateGradient();a._showColor(a[v])}else a.result={type:"solid",color:a[b],css:"background: "+a[b]+";"},a.$gradientResult.css("background",a[b])}else a.result=e,a.$gradientResult.css("background","")},a.$container.on("mousedown",".tdc-gradient-save",function(b){var c=
a.$container.find(".tdc-gradient-values");""===d.tdcAdminSettings.tdcSavings&&(d.tdcAdminSettings.tdcSavings={});"undefined"===typeof d.tdcAdminSettings.tdcSavings.gradients&&(d.tdcAdminSettings.tdcSavings.gradients=[]);if("gradient"===a.result.type){var e=d.btoa(JSON.stringify(a.result));-1===d.tdcAdminSettings.tdcSavings.gradients.indexOf(e)&&(d.tdcAdminSettings.tdcSavings.gradients.push(e),tdcUtil.updateTdcSavings(this,function(){g('<div class="tdc-gradient-value" style="'+a.result.css+'" data-gradient="'+
e+'"><div class="tdc-gradient-value-delete"></div></div>').prependTo(c);a.$container.find(".tdc-gradient-presets").show()}))}}),a.$container.on("mousedown",".tdc-gradient-value",function(b){b=jQuery(b.currentTarget).data("gradient");var c=a.$container.parent().prev(".tdc-property-gradient"),d=c.find("input");c=c.find(".tdc-gradient-wrap");a.init(b);d.val(b);c.attr("style",a.result.css);d.trigger("change")}),a.$container.on("mousedown",".tdc-gradient-value-delete",function(b){b.preventDefault();b.stopImmediatePropagation();
if("undefined"===typeof d.tdcAdminSettings.tdcSavings.gradients||0===d.tdcAdminSettings.tdcSavings.gradients.length)a.$container.find(".tdc-gradient-value").remove();else{var c=g(this).parent();b=c.data("gradient");b=d.tdcAdminSettings.tdcSavings.gradients.indexOf(b);d.tdcAdminSettings.tdcSavings.gradients.splice(b,1);b=!0;for(var e in d.tdcAdminSettings.tdcSavings)if(d.tdcAdminSettings.tdcSavings[e].length){b=!1;break}b&&(d.tdcAdminSettings.tdcSavings="");tdcUtil.updateTdcSavings(this,function(){""!==
d.tdcAdminSettings.tdcSavings&&0!==d.tdcAdminSettings.tdcSavings.gradients.length||a.$container.find(".tdc-gradient-presets").hide();c.remove()})}}),a._saveValue=function(){var b=a.$container.parent().prev(".tdc-property-gradient"),c=b.find("input");b=b.find(".tdc-gradient-wrap");if("undefined"===typeof a.result)c.val(""),b.removeAttr("style");else{switch(a.result.type){case "solid":c.val(a.result.color);break;case "gradient":c.val(d.btoa(JSON.stringify(a.result)))}b.attr("style",a.result.css)}c.trigger("change")},
a.init=function(b){a.triggerSelection=!1;a.color1=e;a.color2=e;a.mixedColors=e;a.degree=e;a.currentColor=e;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color","");a.$container.find(".cs-alpha-slider").slider("option","value",100).trigger("slide");var c=a.$container.find(".tdc-gradient-result");c.find(".tdc-gradient-mix-color").remove();if("undefined"!==typeof b&&""!==b){try{b=JSON.parse(d.atob(b));a.color1=b.color1;a.color2=b.color2;a.degree=
b.degree;a.setColor(a.color1);a.$this.tdGradientColorPicker("color",a.color1);a.mixedColors=b.mixedColors;if("undefined"!==typeof a.mixedColors)for(var f=0;f<a.mixedColors.length;f++){var l=g('<div class="tdc-gradient-color tdc-gradient-mix-color"></div>').appendTo(c),m=(c.width()-l.outerWidth(!0))*(100-a.mixedColors[f].percentage)/100;l.css("left",m);l.data("percentage",a.mixedColors[f].percentage);"undefined"!==typeof a.mixedColors[f].color&&l.data("color",a.mixedColors[f].color)}a._updateGradient()}catch(n){a.setColor(b),
a.$this.tdGradientColorPicker("color",b)}b=g.cs_ParseColorValue(a.color1);c=parseFloat(b.alpha/100);c=1>c?c:"";a.$container.find(".cs-alpha-text").text(c);a.$container.find(".cs-alpha-slider-offset").css("background-color",b.value);a.$container.find(".cs-alpha-slider").slider("option","value",b.alpha).trigger("slide")}else a.setColor(e),a.$container.find(".wp-picker-clear").trigger("click");a.triggerSelection=!0})})});"undefined"===typeof g.fn.tdPalette&&(g.fn.tdPalette=function(){return this.each(function(){var a=
this,b=g(this);a.$this=b;if(!1!==b.data("rgba")){var d=g.cs_ParseColorValue(b.val());b.tdPaletteColorPicker({clear:function(){b.trigger("keyup")},change:function(c,d){var e=d.color.toString();b.closest(".wp-picker-container").find(".cs-alpha-slider-offset").css("background-color",e);b.val(e).trigger("change");a.triggerSelection?a.setColor(e,!0):a.setColor(e)},create:function(){var c=b.data("a8cIris"),l=b.closest(".wp-picker-container"),k=g('<div class="cs-alpha-wrap"><div class="cs-alpha-slider"></div><div class="cs-alpha-slider-offset"></div><div class="cs-alpha-text"></div></div>').appendTo(l.find(".wp-picker-holder")),
h=k.find(".cs-alpha-slider"),m=k.find(".cs-alpha-text"),n=k.find(".cs-alpha-slider-offset");a.$container=l;h.slider({slide:function(a,d){var e=parseFloat(d.value/100);c._color._alpha=e;b.tdPaletteColorPicker("color",c._color.toString());m.text(1>e?e:"")},create:function(){var f=parseFloat(d.alpha/100);m.text(1>f?f:"");n.css("background-color",d.value);l.on("click",".wp-picker-clear",function(){c._color._alpha=1;m.text("");h.slider("option","value",100).trigger("slide");a.triggerSelection?a.setColor(e,
!0):a.setColor(e)});l.on("click",".wp-picker-default",function(){var a=g.cs_ParseColorValue(b.data("default-color")),d=parseFloat(a.alpha/100);c._color._alpha=d;m.text(1>d?d:"");h.slider("option","value",a.alpha).trigger("slide")});l.on("click",".wp-color-result",function(a){k.toggle()});g("body").on("click.wpcolorpicker",function(){k.hide()})},value:d.alpha,step:1,min:0,max:100})}})}else b.tdPaletteColorPicker({clear:function(){b.trigger("keyup")},change:function(a,c){b.val(c.color.toString()).trigger("change")}});
"undefined"===typeof a.setColor&&(a.setColor=function(b,c){a.color=b;!0===c&&a._saveValue()},a._saveValue=function(){var b=a.$container.parent().prev(".tdc-property-colorpicker"),c=b.find("input");b=b.find(".tdc-colorpicker-wrap");"undefined"===typeof a.color?(c.val(""),b.removeAttr("style")):(c.val(a.color),b.attr("style","background: "+a.color));c.trigger("change")},a.init=function(b){a.triggerSelection=!1;a.color=e;a.$container.find(".cs-alpha-text").text("");a.$container.find(".cs-alpha-slider-offset").css("background-color",
"");a.$container.find(".cs-alpha-slider").slider("option","value",100).trigger("slide");if("undefined"!==typeof b&&""!==b){a.setColor(b);a.$this.tdPaletteColorPicker("color",b);b=g.cs_ParseColorValue(a.color);var c=parseFloat(b.alpha/100);c=1>c?c:"";a.$container.find(".cs-alpha-text").text(c);a.$container.find(".cs-alpha-slider-offset").css("background-color",b.value);a.$container.find(".cs-alpha-slider").slider("option","value",b.alpha).trigger("slide")}else a.setColor(e),a.$container.find(".wp-picker-clear").trigger("click");
a.triggerSelection=!0})})})})(jQuery,window,document);
(function(g){var d=function(){this.cssImportStatements=[];this.cssKeyframeStatements=[];this.cssRegex=RegExp("([\\s\\S]*?){([\\s\\S]*?)}","gi");this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})";this.combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})";this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)";this.cssImportStatementRegex=RegExp("@import .*?;",
"gi")};d.prototype.stripComments=function(b){return b.replace(new RegExp(this.cssCommentsRegex,"gi"),"")};d.prototype.parseCSS=function(b){if(void 0===b)return[];for(var d=[];;){var a=this.cssImportStatementRegex.exec(b);if(null!==a)this.cssImportStatements.push(a[0]),d.push({selector:"@imports",type:"imports",styles:a[0]});else break}b=b.replace(this.cssImportStatementRegex,"");a=new RegExp(this.cssKeyframeRegex,"gi");for(var c;;){c=a.exec(b);if(null===c)break;d.push({selector:"@keyframes",type:"keyframes",
styles:c[0]})}b=b.replace(a,"");for(a=new RegExp(this.combinedCSSRegex,"gi");;){c=a.exec(b);if(null===c)break;var g=void 0===c[2]?c[5].split("\r\n").join("\n").trim():c[2].split("\r\n").join("\n").trim();var f=new RegExp(this.cssCommentsRegex,"gi"),q=f.exec(g);null!==q&&(g=g.replace(f,"").trim());g=g.replace(/\n+/,"\n");-1!==g.indexOf("@media")?(g={selector:g,type:"media",subStyles:this.parseCSS(c[3]+"\n}")},null!==q&&(g.comments=q[0]),d.push(g)):(c=this.parseRules(c[6]),c={selector:g,rules:c},"@font-face"===
g&&(c.type="font-face"),null!==q&&(c.comments=q[0]),d.push(c))}return d};d.prototype.parseRules=function(b){b=b.split("\r\n").join("\n");var d=[];b=b.split(";");for(var a=0;a<b.length;a++){var c=b[a];c=c.trim();if(-1!==c.indexOf(":")){c=c.split(":");var g=c[0].trim();c=c.slice(1).join(":").trim();1>g.length||1>c.length||d.push({directive:g,value:c})}else"base64,"===c.trim().substr(0,7)?d[d.length-1].value+=c.trim():0<c.length&&d.push({directive:"",value:c,defective:!0})}return d};d.prototype.findCorrespondingRule=
function(b,d,a){void 0===a&&(a=!1);for(var c=!1,e=0;e<b.length&&(b[e].directive!==d||(c=b[e],a!==b[e].value));e++);return c};d.prototype.findBySelector=function(b,d,a){void 0===a&&(a=!1);for(var c=[],e=0;e<b.length;e++)!1===a?b[e].selector===d&&c.push(b[e]):-1!==b[e].selector.indexOf(d)&&c.push(b[e]);if(2>c.length)return c;b=c[0];for(e=1;e<c.length;e++)this.intelligentCSSPush([b],c[e]);return[b]};d.prototype.deleteBySelector=function(b,d){for(var a=[],c=0;c<b.length;c++)b[c].selector!==d&&a.push(b[c]);
return a};d.prototype.compressCSS=function(b){for(var d=[],a={},c=0;c<b.length;c++){var g=b[c];if(!0!==a[g.selector]){var f=this.findBySelector(b,g.selector);0!==f.length&&(d.push(f[0]),a[g.selector]=!0)}}return d};d.prototype.cssDiff=function(b,d){if(b.selector!==d.selector||"media"===b.type||"media"===d.type)return!1;for(var a={selector:b.selector,rules:[]},c,e,f=0;f<b.rules.length;f++)c=b.rules[f],e=this.findCorrespondingRule(d.rules,c.directive,c.value),!1===e?a.rules.push(c):c.value!==e.value&&
a.rules.push(c);for(f=0;f<d.rules.length;f++)e=d.rules[f],c=this.findCorrespondingRule(b.rules,e.directive),!1===c&&(e.type="DELETED",a.rules.push(e));return 0===a.rules.length?!1:a};d.prototype.intelligentMerge=function(b,d,a){void 0===a&&(a=!1);for(var c=0;c<d.length;c++)this.intelligentCSSPush(b,d[c],a);for(c=0;c<b.length;c++)d=b[c],"media"!==d.type&&"keyframes"!==d.type&&(d.rules=this.compactRules(d.rules))};d.prototype.intelligentCSSPush=function(b,d,a){var c=!1;void 0===a&&(a=!1);if(!1===a)for(a=
0;a<b.length;a++){if(b[a].selector===d.selector){c=b[a];break}}else for(a=b.length-1;-1<a;a--)if(b[a].selector===d.selector){c=b[a];break}if(!1===c)b.push(d);else if("media"!==d.type)for(b=0;b<d.rules.length;b++){a=d.rules[b];var e=this.findCorrespondingRule(c.rules,a.directive);!1===e?c.rules.push(a):"DELETED"===a.type?e.type="DELETED":e.value=a.value}else c.subStyles=c.subStyles.concat(d.subStyles)};d.prototype.compactRules=function(b){for(var d=[],a=0;a<b.length;a++)"DELETED"!==b[a].type&&d.push(b[a]);
return d};d.prototype.getCSSForEditor=function(b,d){void 0===d&&(d=0);var a="";void 0===b&&(b=this.css);for(var c=0;c<b.length;c++)"imports"===b[c].type&&(a+=b[c].styles+"\n\n");for(c=0;c<b.length;c++){var e=b[c];if(void 0!==e.selector){var f="";void 0!==e.comments&&(f=e.comments+"\n");"media"===e.type?(a+=f+e.selector+"{\n",a+=this.getCSSForEditor(e.subStyles,d+1),a+="}\n\n"):"keyframes"!==e.type&&"imports"!==e.type&&(a+=this.getSpaces(d)+f+e.selector+" {\n",a+=this.getCSSOfRules(e.rules,d+1),a+=
this.getSpaces(d)+"}\n\n")}}for(c=0;c<b.length;c++)"keyframes"===b[c].type&&(a+=b[c].styles+"\n\n");return a};d.prototype.getImports=function(b){for(var d=[],a=0;a<b.length;a++)"imports"===b[a].type&&d.push(b[a].styles);return d};d.prototype.getCSSOfRules=function(b,d){for(var a="",c=0;c<b.length;c++)void 0!==b[c]&&(a=void 0===b[c].defective?a+(this.getSpaces(d)+b[c].directive+": "+b[c].value+";\n"):a+(this.getSpaces(d)+b[c].value+";\n"));return a||"\n"};d.prototype.getSpaces=function(b){for(var d=
"",a=0;a<4*b;a++)d+=" ";return d};d.prototype.applyNamespacing=function(b,d){var a=b,c="."+this.cssPreviewNamespace;void 0!==d&&(c=d);"string"===typeof b&&(a=this.parseCSS(b));for(var e=0;e<a.length;e++){var f=a[e];if(!(-1<f.selector.indexOf("@font-face")||-1<f.selector.indexOf("keyframes")||-1<f.selector.indexOf("@import")||-1<f.selector.indexOf(".form-all")||-1<f.selector.indexOf("#stage")))if("media"!==f.type){for(var g=f.selector.split(","),k=[],h=0;h<g.length;h++)-1===g[h].indexOf(".supernova")?
k.push(c+" "+g[h]):k.push(g[h]);f.selector=k.join(",")}else f.subStyles=this.applyNamespacing(f.subStyles,d)}return a};d.prototype.clearNamespacing=function(b,d){void 0===d&&(d=!1);var a=b,c="."+this.cssPreviewNamespace;"string"===typeof b&&(a=this.parseCSS(b));for(var e=0;e<a.length;e++){var f=a[e];if("media"!==f.type){for(var g=f.selector.split(","),k=[],h=0;h<g.length;h++)k.push(g[h].split(c+" ").join(""));f.selector=k.join(",")}else f.subStyles=this.clearNamespacing(f.subStyles,!0)}return!1===
d?this.getCSSForEditor(a):a};d.prototype.createStyleElement=function(b,d,a){void 0===a&&(a=!1);!1===this.testMode&&"nonamespace"!==a&&(d=this.applyNamespacing(d));"string"!==typeof d&&(d=this.getCSSForEditor(d));!0===a&&(d=this.getCSSForEditor(this.parseCSS(d)));if(!1!==this.testMode)return this.testMode("create style #"+b,d);(a=document.getElementById(b))&&a.parentNode.removeChild(a);a=document.head||document.getElementsByTagName("head")[0];var c=document.createElement("style");c.id=b;c.type="text/css";
a.appendChild(c);c.styleSheet&&!c.sheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d))};g.cssjs=d})(this);jQuery("#tdc-live-iframe").load(function(){jQuery("body").addClass("tdcComposerLoaded")});var tdcLivePanel;
(function(g,d){tdcLivePanel={$tdcAction:d,$tdcContent:d,$tdcIframeCover:d,_iframeSrc:d,$panel:d,_currentSettingsPanel:d,_currentSettingsPanelInLoading:!1,init:function(){tdcLivePanel.$panel=jQuery("#tdc-live-panel");tdcLivePanel.$tdcAction=tdcLivePanel.$panel.find("#tdc_action");tdcLivePanel.$tdcContent=tdcLivePanel.$panel.find("#tdc_content");tdcLivePanel.$tdcCustomized=tdcLivePanel.$panel.find("#tdc_customized");tdcLivePanel.$tdcIframeCover=jQuery("#tdc-iframe-cover");tdcLivePanel.$panel.submit({},
function(b){var d=jQuery("#tdc-live-iframe-temp");d.load(function(){var a=jQuery(this);if("tdc-live-iframe-temp"!==a.attr("id"))tdcAdminIFrameUI.checkIframe(a);else{var b=jQuery("#tdc-live-iframe");tdcLivePanel.$tdcIframeCover.removeClass("tdc-iframe-cover-show");b.addClass("tdc-remove-iframe");setTimeout(function(){b.remove();d.attr("id","tdc-live-iframe");tdcAdminIFrameUI.checkIframe(d);tdcLivePanel.$panel.attr("action","")},400)}})});tdcLivePanel.$panel.on("change","#tdc_page_template",function(b){b.preventDefault();
b=jQuery(this);var d=b.data("control-id");jQuery("#hidden_"+d).val(b.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".tdc-page-template",function(b){b=jQuery(this);var d=b.data("control-id");jQuery("#hidden_"+d).val(b.closest(".td-box").attr("id"));tdcLivePanel.submit()});tdcLivePanel.$panel.on("click",".td-visual-selector-o-img",function(b){b.preventDefault();b=jQuery(this);var d=b.data("uid");jQuery("#"+d).val(b.data("option-value"));tdcLivePanel.submit()});
tdcLivePanel.$panel.on("click",".tdc-panel-menu",function(b){var d=jQuery(this);b=d.data("menu_id");d=d.data("menu_name");tdcLivePanelMenuSettings.showSettings(b,d)});tdcLivePanel.$panel.on("click",".tdc-page-settings",function(b){tdcLivePanelPageSettings.showSettings()})},setCurrentSettingsPanel:function(b){if(!g.isUndefined(b)){if(!g.isUndefined(tdcLivePanel._currentSettingsPanel)){if(tdcLivePanel._currentSettingsPanel===b)return;var d=tdcLivePanel._currentSettingsPanel.hasClass("clear-position"),
a=d?tdcLivePanel._currentSettingsPanel.getPosition(!1):tdcLivePanel._currentSettingsPanel.getPosition(!0);tdcLivePanel._currentSettingsPanel.removeClass("clear-position");tdcLivePanel._currentSettingsPanel.closeSettings()}tdcLivePanel._currentSettingsPanel=b;!g.isUndefined(d)&&d&&(tdcLivePanel._currentSettingsPanel.addClass("clear-position"),tdcLivePanel._currentSettingsPanel.setPosition(a))}},getCurrentSettingsPanel:function(){return tdcLivePanel._currentSettingsPanel},submit:function(){var b=jQuery("#tdc-live-iframe");
g.isUndefined(tdcLivePanel._iframeSrc)&&(tdcLivePanel._iframeSrc=b.attr("src"));var e="uid_"+Math.floor(1E4*Math.random()+1)+"_"+Math.floor(100*Math.random()+1),a=jQuery('<iframe id="tdc-live-iframe-temp" name="'+e+'" scrolling="auto" src="about:blank" style="width: 100%; height: 100%" class="tdc-live-iframe-temp"></iframe>');a.insertAfter(b);a.load(function(){jQuery(a.get(0).contentWindow).scrollTop(jQuery(b.get(0).contentWindow).scrollTop())});tdcLivePanel.$panel.attr("target",e);tdcLivePanel.$panel.attr("action",
tdcLivePanel._iframeSrc);tdcLivePanel.$tdcIframeCover.show();tdcLivePanel.$tdcIframeCover.addClass("tdc-iframe-cover-show");e={error:d,getShortcode:""};tdcIFrameData.getShortcodeFromData(e);g.isUndefined(e.error)||tdcDebug.log(e.error);g.isUndefined(e.getShortcode)||(tdcLivePanel.$tdcContent.val(e.getShortcode),window.tdcPostSettings.postContent=e.getShortcode);tdcLivePanel.$tdcAction.val("preview");tdcLivePanel.$tdcCustomized.val(JSON.stringify(window.tdcAdminSettings.customized));tdcLivePanel.$panel.submit()}};
tdcLivePanel.init()})(_);function preinit(g){api.menuList=g.find("#menu-to-edit");api.targetList=api.menuList}var tdcLivePanelMenuSettings;
(function(g,d){tdcLivePanelMenuSettings={_isInitialized:!1,_menuId:d,_menuName:d,_url:d,_currentIframeId:d,$_currentIframeMenuSettings:d,$_tdcMenuSettings:d,$_iframeCloseButton:d,$_iframeApplyButton:d,$_iframeOkButton:d,init:function(){tdcLivePanelMenuSettings._isInitialized||(tdcLivePanelMenuSettings.$_tdcMenuSettings=jQuery("#tdc-menu-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(b,d){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelMenuSettings);tdcLivePanelMenuSettings._menuId=
b;tdcLivePanelMenuSettings._menuName=d;tdcLivePanelMenuSettings._url=window.tdcAdminSettings.adminUrl+"/nav-menus.php?action=edit&menu="+b+"&tdc-menu-settings=1";tdcLivePanelMenuSettings._currentIframeId="tdc-iframe-settings-menu-"+tdcLivePanelMenuSettings._menuId;tdcLivePanelMenuSettings.$_currentIframeMenuSettings=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+tdcLivePanelMenuSettings._currentIframeId);var a=tdcLivePanelMenuSettings._currentIframeId+"-data",c=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+
a);c.length||(c=jQuery('<div id="'+a+'" style="display: none"></div>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.append(c));tdcLivePanelMenuSettings.$_tdcMenuSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelMenuSettings.$_tdcMenuSettings);tdcLivePanelMenuSettings.$_currentIframeMenuSettings.length?(tdcLivePanelMenuSettings.$_currentIframeMenuSettings.show(),tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:b,menuName:d}),tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId)):
(tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass("tdc-dropped"),tdcLivePanelMenuSettings.$_currentIframeMenuSettings=jQuery('<iframe id="'+tdcLivePanelMenuSettings._currentIframeId+'" class="tdc-iframe-settings-menu" src="'+tdcLivePanelMenuSettings._url+'" data-menu_id="'+tdcLivePanelMenuSettings._menuId+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelMenuSettings.$_tdcMenuSettings.children(".content").append(tdcLivePanelMenuSettings.$_currentIframeMenuSettings),
tdcLivePanelMenuSettings.$_currentIframeMenuSettings.load(function(){var a=tdcLivePanelMenuSettings.$_currentIframeMenuSettings.contents();tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass("tdc-dropped");tdcLivePanelMenuSettings._setIframeInterface({type:"menu",menuId:tdcLivePanelMenuSettings._menuId,menuName:tdcLivePanelMenuSettings._menuName});tdcLivePanelMenuSettings._synchronizeIframeMenuData(tdcLivePanelMenuSettings._currentIframeId);a.find("body").on("mousedown mouseup",function(a){window.parent.jQuery("#tdc-menu-settings").trigger(a)});
tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()}));tdcLivePanelMenuSettings.$_currentIframeMenuSettings.siblings(".tdc-iframe-settings-menu").each(function(a,b){var c=jQuery(b);c.is(":visible")&&(tdcLivePanelMenuSettings._synchronizeIframeMenuData(c.attr("id")),c.hide())});tdcLivePanelMenuSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelMenuSettings.closeSettings()},_closeSettings:function(){if(!g.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)){var b=
jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")),d=jQuery("#"+tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe")+"-data"),a=d.html(),c=b.contents().find("#update-nav-menu");""!==a&&(c.html(a),tdcLivePanelMenuSettings._reinitWpNavMenu(b[0].contentWindow||b[0].contentDocument),d.html(""));tdcLivePanelMenuSettings.$_tdcMenuSettings.hide();b.hide()}},closeSettings:function(){g.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)||(tdcLivePanelMenuSettings.$_iframeCloseButton.trigger("click"),
tdcLivePanelMenuSettings.removeClass("clear-position"))},setPosition:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.css({top:b.top,left:b.left})},getPosition:function(b){var d={};d.top=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().top-jQuery(window).scrollTop();d.left=tdcLivePanelMenuSettings.$_tdcMenuSettings.offset().left-jQuery(window).scrollLeft();b&&(d.top+=tdcLivePanelMenuSettings.$_tdcMenuSettings.height()/2,d.left+=tdcLivePanelMenuSettings.$_tdcMenuSettings.width()/2);return d},
addClass:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.addClass(b)},removeClass:function(b){tdcLivePanelMenuSettings.$_tdcMenuSettings.removeClass(b)},hasClass:function(b){return tdcLivePanelMenuSettings.$_tdcMenuSettings.hasClass(b)},_synchronizeIframeMenuData:function(b){var d=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+b+"-data"),a=d.html();b=tdcLivePanelMenuSettings.$_tdcMenuSettings.find("#"+b);var c=b.contents().find("#update-nav-menu");""===a?d.html(c.contents().clone()):(c.html(a),
tdcLivePanelMenuSettings._reinitWpNavMenu(b[0].contentWindow||b[0].contentDocument))},_reinitWpNavMenu:function(b){b.menus.oneThemeLocationNoMenus=!1;b.wpNavMenu.jQueryExtensions=function(){};b.wpNavMenu.attachMenuEditListeners=function(){};b.wpNavMenu.attachQuickSearchListeners=function(){};b.wpNavMenu.attachThemeLocationsListeners=function(){};b.wpNavMenu.attachMenuSaveSubmitListeners=function(){};b.wpNavMenu.attachTabsPanelListeners=function(){};b.wpNavMenu.attachUnsavedChangesListener=function(){};
b.wpNavMenu.initManageLocations=function(){};b.wpNavMenu.initAccessibility=function(){};b.wpNavMenu.initToggles=function(){};b.wpNavMenu.initPreviewing=function(){};b.wpNavMenu.init()},_setIframeInterface:function(b){function d(a,b){var c=jQuery("#"+a),d=c.contents(),e=jQuery("#"+a+"-data");d.find("#update-nav-menu").find("select[name*=td_mega_menu_cat]").each(function(a,b){var c=jQuery(b),d=c.find("option"),e=c.find("option:first");""===c.val()?(d.removeAttr("selected"),e.attr("selected","selected")):
d.each(function(a,b){var d=jQuery(b);c.val()===d.attr("value")?d.attr("selected","selected"):d.removeAttr("selected")})});d.find("#update-nav-menu").find("input").each(function(a,b){var c=jQuery(b);c.attr("value",c.val())});e.html(d.find("#update-nav-menu").contents().clone());!0===b&&(tdcLivePanelMenuSettings.$_tdcMenuSettings.hide(),c.hide())}function a(a){a=jQuery(a);var b=a.data("current_iframe");a=a.data("current_menu");b=jQuery("#"+b);var c=b.contents();(b[0].contentWindow||b[0].contentDocument).wpNavMenu.eventOnClickMenuSave();
b=c.find("#update-nav-menu").serializeArray();window.tdcAdminSettings.customized.menus["existing_menu_"+a]=JSON.stringify(b);tdcLivePanel.submit()}if(g.isUndefined(b))tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
""),tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",""),tdcLivePanelMenuSettings.$_iframeCloseButton.hide(),tdcLivePanelMenuSettings.$_iframeApplyButton.hide(),tdcLivePanelMenuSettings.$_iframeOkButton.hide();else{var c=b.menuId;b=b.menuName;g.isUndefined(tdcLivePanelMenuSettings.$_iframeCloseButton)&&(tdcLivePanelMenuSettings.$_iframeCloseButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-close-button"),tdcLivePanelMenuSettings.$_iframeCloseButton.click(function(a){tdcLivePanelMenuSettings._closeSettings()}));
g.isUndefined(tdcLivePanelMenuSettings.$_iframeApplyButton)&&(tdcLivePanelMenuSettings.$_iframeApplyButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-apply-button"),tdcLivePanelMenuSettings.$_iframeApplyButton.click(function(b){d(jQuery(this).data("current_iframe"),!1);a(this)}));g.isUndefined(tdcLivePanelMenuSettings.$_iframeOkButton)&&(tdcLivePanelMenuSettings.$_iframeOkButton=tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".tdc-iframe-ok-button"),tdcLivePanelMenuSettings.$_iframeOkButton.click(function(b){d(jQuery(this).data("current_iframe"),
!0);a(this)}));tdcLivePanelMenuSettings.$_tdcMenuSettings.find(".title").html("MENU: "+b);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_iframe","tdc-iframe-settings-menu-"+c);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-menu-"+c);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-menu-"+c);tdcLivePanelMenuSettings.$_iframeCloseButton.data("current_menu",c);tdcLivePanelMenuSettings.$_iframeApplyButton.data("current_menu",
c);tdcLivePanelMenuSettings.$_iframeOkButton.data("current_menu",c);tdcLivePanelMenuSettings.$_iframeCloseButton.show();tdcLivePanelMenuSettings.$_iframeApplyButton.show();tdcLivePanelMenuSettings.$_iframeOkButton.show()}},saveMenuSettings:function(){tdcLivePanelMenuSettings.$_tdcMenuSettings.find("iframe").each(function(b,d){var a=jQuery(d);tdcLivePanelMenuSettings._synchronizeIframeMenuData(a.attr("id"));(d.contentWindow||d.contentDocument).wpNavMenu.eventOnClickMenuSave();var c=a.data("menu_id");
a=a.contents().find("#update-nav-menu");var e=a.serializeArray(),f={};a.find("input[name=nav-menu-data]").val(JSON.stringify(e));a.find("input[type=hidden]").each(function(a,b){var c=jQuery(b);f[c.attr("name")]=c.val()});jQuery.ajax({url:"nav-menus.php?menu="+c,method:"POST",data:f})})}};tdcLivePanelMenuSettings.init()})(_);var tdcLivePanelPageSettings;
(function(g,d){tdcLivePanelPageSettings={_isInitialized:!1,_url:d,_currentIframeId:d,$_tdcPageSettings:d,$_currentIframePageSettings:d,$_iframeCloseButton:d,$_iframeApplyButton:d,$_iframeOkButton:d,init:function(){tdcLivePanelPageSettings._isInitialized||(tdcLivePanelPageSettings.$_tdcPageSettings=jQuery("#tdc-page-settings"),tdcLivePanelMenuSettings._isInitialized=!0)},showSettings:function(){tdcLivePanel.setCurrentSettingsPanel(tdcLivePanelPageSettings);tdcLivePanelPageSettings._url=window.tdcAdminSettings.editPostUrl+
"&tdc-page-settings=1";tdcLivePanelPageSettings.$_currentIframePageSettings=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-settings-page");tdcLivePanelPageSettings.$_tdcPageSettings.show();tdcWindowFrame.setWindowFrame(tdcLivePanelPageSettings.$_tdcPageSettings);tdcLivePanelPageSettings.$_currentIframePageSettings.length?(tdcLivePanelPageSettings.$_currentIframePageSettings.show(),tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"})):(tdcLivePanelPageSettings.$_tdcPageSettings.addClass("tdc-dropped"),
tdcLivePanelPageSettings.$_currentIframePageSettings=jQuery('<iframe class="tdc-iframe-settings-page" src="'+tdcLivePanelPageSettings._url+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>'),tdcLivePanelPageSettings.$_tdcPageSettings.children(".content").append(tdcLivePanelPageSettings.$_currentIframePageSettings),tdcLivePanelPageSettings.$_currentIframePageSettings.load(function(){var b=tdcLivePanelPageSettings.$_currentIframePageSettings.contents();tdcLivePanelPageSettings.$_tdcPageSettings.removeClass("tdc-dropped");
tdcLivePanelPageSettings._setIframeInterface({type:"page_settings"});b.find("body").on("mousedown mouseup",function(b){window.parent.jQuery("#tdc-page-settings").trigger(b)});tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()}));tdcLivePanelPageSettings!==tdcLivePanel.getCurrentSettingsPanel()&&tdcLivePanelPageSettings.closeSettings()},_setIframeInterface:function(b){function d(a){var b=jQuery("iframe.tdc-iframe-settings-page");b.contents();
!0===a&&(tdcLivePanelPageSettings.$_tdcPageSettings.hide(),b.hide())}function a(a){a=jQuery("iframe.tdc-iframe-settings-page").contents().find("#post").serializeArray();for(var b={td_homepage_loop:{},td_page:{},page_template:""},c=0;c<a.length;c++){var d=a[c].name;"td_homepage_loop[td_sidebar_position]"===d||"td_homepage_loop[td_sidebar]"===d||"td_homepage_loop[td_layout]"===d||"td_homepage_loop[list_custom_title_show]"===d||"td_homepage_loop[list_custom_title]"===d||"td_homepage_loop[post_ids]"===
d||"td_homepage_loop[category_id]"===d||"td_homepage_loop[category_ids]"===d||"td_homepage_loop[tag_slug]"===d||"td_homepage_loop[autors_id]"===d||"td_homepage_loop[installed_post_types]"===d||"td_homepage_loop[sort]"===d||"td_homepage_loop[limit]"===d||"td_homepage_loop[offset]"===d||"td_homepage_loop[el_class]"===d||"td_homepage_loop[show_featured_posts]"===d||"td_homepage_loop[td_unique_articles]"===d||"td_homepage_loop[td_unique_articles]"===d?(d=d.replace(/td_homepage_loop\[|\]/gi,""),b.td_homepage_loop[d]=
a[c].value):"td_page[td_unique_articles]"===d?b.td_page[d.replace(/td_page\[|\]/gi,"")]=a[c].value:"page_template"===d&&(b.page_template=a[c].value)}window.tdcAdminSettings.customized.page_settings=JSON.stringify(b);tdcLivePanel.submit()}g.isUndefined(b)?(tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe",""),tdcLivePanelPageSettings.$_iframeCloseButton.hide(),
tdcLivePanelPageSettings.$_iframeApplyButton.hide(),tdcLivePanelPageSettings.$_iframeOkButton.hide()):(g.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)&&(tdcLivePanelPageSettings.$_iframeCloseButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-close-button"),tdcLivePanelPageSettings.$_iframeCloseButton.click(function(a){tdcLivePanelPageSettings._closeSettings()})),g.isUndefined(tdcLivePanelPageSettings.$_iframeApplyButton)&&(tdcLivePanelPageSettings.$_iframeApplyButton=
tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-apply-button"),tdcLivePanelPageSettings.$_iframeApplyButton.click(function(b){d(!1);a(this)})),g.isUndefined(tdcLivePanelPageSettings.$_iframeOkButton)&&(tdcLivePanelPageSettings.$_iframeOkButton=tdcLivePanelPageSettings.$_tdcPageSettings.find(".tdc-iframe-ok-button"),tdcLivePanelPageSettings.$_iframeOkButton.click(function(b){d(!0);a(this)})),tdcLivePanelPageSettings.$_tdcPageSettings.find(".title").html("Page settings"),tdcLivePanelPageSettings.$_iframeCloseButton.data("current_iframe",
"tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeApplyButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeOkButton.data("current_iframe","tdc-iframe-settings-page"),tdcLivePanelPageSettings.$_iframeCloseButton.show(),tdcLivePanelPageSettings.$_iframeApplyButton.show(),tdcLivePanelPageSettings.$_iframeOkButton.show())},_closeSettings:function(){tdcLivePanelPageSettings.$_tdcPageSettings.hide();tdcLivePanelPageSettings.removeClass("clear-position");
tdcLivePanelPageSettings.setPosition({top:"",left:""})},closeSettings:function(){g.isUndefined(tdcLivePanelPageSettings.$_iframeCloseButton)||tdcLivePanelPageSettings.$_iframeCloseButton.trigger("click")},setPosition:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.css({top:b.top,left:b.left})},getPosition:function(b){var d={};d.top=tdcLivePanelPageSettings.$_tdcPageSettings.offset().top-jQuery(window).scrollTop();d.left=tdcLivePanelPageSettings.$_tdcPageSettings.offset().left-jQuery(window).scrollLeft();
b&&(d.top+=tdcLivePanelPageSettings.$_tdcPageSettings.height()/2,d.left+=tdcLivePanelPageSettings.$_tdcPageSettings.width()/2);return d},addClass:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.addClass(b)},removeClass:function(b){tdcLivePanelPageSettings.$_tdcPageSettings.removeClass(b)},hasClass:function(b){return tdcLivePanelPageSettings.$_tdcPageSettings.hasClass(b)}};tdcLivePanelPageSettings.init()})(_);
